const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/howler-BXccDGgb.js","assets/_commonjsHelpers-C4iS2aBk.js"])))=>i.map(i=>d[i]);
import{_ as Z,z as ae,A as ue,o as s,c as f,d as c,a as oe,j as q,B as se,r as R,C as le,D as ie,u as a,E as B,G as K,e as D,F as O,h as X,f as b,w as i,g as p,y as J,k as A,p as V,m as l,n as de,q as M,s as ce,v as re,H as me,i as pe}from"./index-C42x9dto.js";import{u as $,C as W,x as fe,_ as ve}from"./super-vue3-tabs-DsD33yXe.js";import{u as _e,_ as he,a as ye}from"./TmsScheduleUploadSection-CAhfzunZ.js";import{_ as Te}from"./Chip-CHTRFFzB.js";const ge=["for"],Se={class:"title"},Ve=["id"],xe={__name:"InputText",props:ae(["identifier"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(h){const v=ue(h,"modelValue");return(y,C)=>(s(),f("label",{class:"input",for:h.identifier},[c("div",Se,[oe(y.$slots,"default",{},void 0,!0)]),q(c("input",{type:"text",inputmode:"numeric",pattern:"[0-9]+",name:"",id:h.identifier,"onUpdate:modelValue":C[0]||(C[0]=U=>v.value=U)},null,8,Ve),[[se,v.value,void 0,{number:!0}]])],8,ge))}},De=Z(xe,[["__scopeId","data-v-0d8d5576"]]);function Y(h,{volume:v=1,playbackRate:y=1,soundEnabled:C=!0,interrupt:U=!1,autoplay:P=!1,onload:E,...k}={}){const g=R(null),_=R(!1),T=R(null),o=R(null);function m(){var d;typeof E=="function"&&E.call(this),T.value=(T.value||((d=o.value)==null?void 0:d.duration())||0)*1e3,P===!0&&(_.value=!0)}return le(async()=>{const d=await ie(()=>import("./howler-BXccDGgb.js").then(N=>N.h),__vite__mapDeps([0,1]));g.value=d.default.Howl,o.value=new g.value({src:a(h),volume:a(v),rate:a(y),onload:m,...k})}),B(()=>[h],()=>{g.value&&g.value&&o&&o.value&&(o.value=new g.value({src:a(h),volume:a(v),rate:a(y),onload:m,...k}))}),B(()=>[a(v),a(y)],()=>{o.value&&(o.value.volume(a(v)),o.value.rate(a(y)))}),{play:d=>{typeof d>"u"&&(d={}),!(!o.value||!C&&!d.forceSoundEnabled)&&(U&&o.value.stop(),d.playbackRate&&o.value.rate(d.playbackRate),o.value.play(d.id),o.value.once("end",()=>{o.value&&o.value&&!o.value.playing()&&(_.value=!1)}),_.value=!0)},sound:o,isPlaying:_,duration:T,pause:d=>{o.value&&(o.value.pause(typeof d=="number"?d:void 0),_.value=!1)},stop:d=>{o.value&&(o.value.stop(typeof d=="number"?d:void 0),_.value=!1)}}}const Ue="/Pathe-Tools/assets/rosetta-DA6vQKhk.ogg",Ee="/Pathe-Tools/assets/gerwim-hi7crA_V.ogg",ke=h=>(ce("data-v-95a5ee15"),h=h(),re(),h),Ie={class:"container dark"},Ce={class:"flex",style:{"flex-wrap":"wrap"}},Pe={key:0,style:{flex:"50% 1 1"}},Ae=ke(()=>c("h2",null,"Geplande omroepen",-1)),Me={id:"upcoming-announcements",class:"flex",style:{"flex-direction":"column",gap:"8px"}},$e={class:"room"},be={class:"title"},Le={class:"time"},Oe={class:"flex chips"},Re=["onDblclick"],Ne={id:"parameters",style:{flex:"229px 1 1"}},we={key:0},Ge={key:0,class:"small"},Xe={key:0,class:"small"},Be={class:"flex",style:{"flex-wrap":"wrap",gap:"8px","margin-top":"-4px"}},je={class:"queue"},ze=["onClick"],He={class:"clock"},qe={__name:"AnnouncerView",setup(h){const v=_e(),y=R(()=>new Date);setInterval(C,1e3),C();function C(){y.value=new Date}const U=$("announcement-voice","rosetta"),P=$("announce-start",!1),E=$("announce-plf-start",!0),k=$("announce-plf-start-grace-period",15),g=$("announce-main-show",!1),_=$("announce-credits",!0),T=$("announce-credits-grace-period",60),o=$("announce-end",!1),m=K({rosetta:{sprite:{auditorium01:[0,1201.6326530612246],auditorium02:[3e3,1332.2448979591836],auditorium03:[6e3,1332.2448979591836],auditorium04:[9e3,1384.489795918368],auditorium05:[12e3,1436.7346938775504],auditorium06:[15e3,1436.7346938775504],auditorium07:[18e3,1515.102040816327],auditorium08:[21e3,1515.102040816327],auditorium09:[24e3,1488.9795918367347],auditorium10:[27e3,1306.1224489795932],auditorium11:[3e4,1462.8571428571427],auditorium12:[33e3,1515.1020408163233],auditorium13:[36e3,1488.9795918367383],auditorium14:[39e3,1488.9795918367383],auditorium15:[42e3,1567.3469387755076],auditorium16:[45e3,1488.9795918367383],auditorium17:[48e3,1515.1020408163233],auditorium18:[51e3,1462.8571428571463],auditorium19:[54e3,1724.0816326530605],auditorium20:[57e3,1593.4693877551],chime:[6e4,3084.51247165533],credits:[65e3,1501.6099773242645],end:[68e3,1563.7868480725672],mainshow:[71e3,1793.3333333333367],start:[74e3,989.9092970521508]}},gerwim:{sprite:{auditorium01:[0,824.9659863945578],auditorium02:[2e3,870.9070294784577],auditorium03:[4e3,790.2040816326528],auditorium04:[6e3,886.8253968253965],auditorium05:[8e3,838.5260770975051],auditorium06:[1e4,866.757369614513],auditorium07:[12e3,987.7777777777776],auditorium08:[14e3,665.6689342403635],credits:[16e3,936.5532879818588],start:[18e3,638.9342403628114]}}});({play:m.rosetta.play,isPlaying:m.rosetta.isPlaying}=Y(Ue,{sprite:m.rosetta.sprite,preload:!0,onplay:async()=>{document.dispatchEvent(new CustomEvent("announcerSoundPlay"))},onend:async()=>{document.dispatchEvent(new CustomEvent("announcerSoundEnd"))}})),{play:m.gerwim.play,isPlaying:m.gerwim.isPlaying}=Y(Ee,{sprite:m.gerwim.sprite,preload:!0,onplay:async()=>{document.dispatchEvent(new CustomEvent("announcerSoundPlay"))},onend:async()=>{document.dispatchEvent(new CustomEvent("announcerSoundEnd"))}});let S=K([]);B(S,async n=>{var u;if(n[0]&&!m.rosetta.sprite[n[0].id]&&S.shift(),n[0]&&!Object.values(m).some(t=>t.isPlaying)){const t=S[0];(u=m[U.value])!=null&&u.sprite[t.id]?m[U.value].play(t):m.rosetta.play(t),document.addEventListener("announcerSoundEnd",()=>{S.shift()},{once:!0})}},{deep:!0});const L=R([]);B([v,P,E,k,g,_,T,o],([n])=>H(n)),H(v);function H(n){let u=[];P.value&&n.table.forEach(t=>{t.scheduledTime&&u.push({announceTime:t.scheduledTime,announcement:["chime","start",`auditorium${w(t.AUDITORIUM)}`],announcementType:"start",status:"unscheduled",...t})}),E.value&&n.table.filter(t=>{var I;return(I=t.AUDITORIUM)==null?void 0:I.includes("4DX")}).forEach(t=>{t.scheduledTime&&u.push({announceTime:new Date(t.scheduledTime.getTime()-k.value*6e4),announcement:["chime","start",`auditorium${w(t.AUDITORIUM)}`],status:"unscheduled",announcementType:"start4dx",...t})}),g.value&&n.table.forEach(t=>{t.scheduledTime&&u.push({announceTime:t.featureTime,announcement:["chime","mainshow",`auditorium${w(t.AUDITORIUM)}`],status:"unscheduled",announcementType:"mainshow",...t})}),_.value&&n.table.forEach(t=>{t.creditsTime&&u.push({announceTime:new Date(t.creditsTime.getTime()-T.value*1e3),announcement:["chime","credits",`auditorium${w(t.AUDITORIUM)}`],status:"unscheduled",announcementType:"credits",...t})}),o.value&&n.table.forEach(t=>{t.scheduledTime&&u.push({announceTime:t.endTime,announcement:["chime","end",`auditorium${w(t.AUDITORIUM)}`],status:"unscheduled",announcementType:"end",...t})}),L.value.filter(t=>t.status==="scheduled").forEach(t=>{const I=u.findIndex(x=>t.announceTime===x.announceTime&&t.announcement.join()===x.announcement.join());I&&u.splice(I,1),u.push(t)}),L.value=[...u.filter(t=>Date.now()-t.announceTime<1e4).sort((t,I)=>t.announceTime-I.announceTime)],C()}setInterval(j,3e4),B(L,j),j();function j(){L.value.filter(n=>n.announceTime-Date.now()<6e4&&n.status==="unscheduled").forEach(n=>{n.status!=="scheduled"&&(n.status="scheduled",setTimeout(()=>{n.status==="scheduled"&&(n.status="announcing",n.announcement.forEach(u=>{S.push({id:u})}))},n.announceTime-Date.now()))})}function d(n){return n<6e4?Math.floor(n/1e3)+" s":n<6e5?Math.floor(n/6e4)+":"+String(Math.floor(n%6e4/1e3)).padStart(2,"0")+" min":n<36e5?Math.floor(n/6e4)+" min":Math.floor(n/36e5)+":"+String(Math.floor(n%36e5/6e4)).padStart(2,"0")+" h"}function N(n){const u={start:"start",mainshow:"start hoofdfilm",credits:"aftiteling",end:"einde voorstelling",chime:"geluidje"};let t=n.match(/^(auditorium)([0-9]+)$/);return u[n]?u[n]:t?`zaal ${Number(t[2])}`:n}function ee(n){return n.charAt(0).toUpperCase()+n.slice(1)}function w(n){return n!=null&&n.toLowerCase().includes("rooftop")?"08":String(n==null?void 0:n.match(/\d+/)).padStart(2,"0")}return(n,u)=>{const t=he,I=Te,x=me,G=ye,F=ve,ne=De,te=pe;return s(),f(O,null,[c("main",Ie,[D(t),c("section",null,[c("div",Ce,[a(v).table.length>0?(s(),f("div",Pe,[Ae,c("div",Me,[(s(!0),f(O,null,X(L.value,e=>q((s(),f("div",{class:A(["film",{announcing:e.status==="announcing"}])},[c("div",$e,p(e.AUDITORIUM==="PULR 8"||e.AUDITORIUM==="Rooftop"?"RT":e.AUDITORIUM.replace(/^\w+\s/,"")),1),c("div",be,p(e.title),1),c("div",Le,p(e.scheduledTime.toLocaleTimeString("nl-NL"))+" – "+p(e.endTime.toLocaleTimeString("nl-NL")),1),c("div",Oe,[(s(!0),f(O,null,X(e.extras,r=>(s(),V(I,{class:A({"translucent-white":!(e.announcementType==="start4dx"&&r==="4DX")})},{default:i(()=>[l(p(r),1)]),_:2},1032,["class"]))),256))]),c("div",{class:A(["announcement",e.announcement]),onDblclick:r=>e.announcement.forEach(z=>{a(S).push({id:z})}),style:{display:"grid","grid-template-columns":"64px 130px 1fr"}},[e.status==="announcing"?(s(),V(x,{key:0,fill:""},{default:i(()=>[l("graphic_eq")]),_:1})):e.announcementType==="start"||e.announcementType==="start4dx"?(s(),V(x,{key:1,fill:"",class:A({pulsate:e.status==="scheduled"})},{default:i(()=>[l("play_arrow")]),_:2},1032,["class"])):e.announcementType==="mainshow"?(s(),V(x,{key:2,fill:"",class:A({pulsate:e.status==="scheduled"})},{default:i(()=>[l("play_circle")]),_:2},1032,["class"])):e.announcementType==="credits"?(s(),V(x,{key:3,fill:"",class:A({pulsate:e.status==="scheduled"})},{default:i(()=>[l("stop_circle")]),_:2},1032,["class"])):e.announcementType==="end"?(s(),V(x,{key:4,fill:"",class:A({pulsate:e.status==="scheduled"})},{default:i(()=>[l("stop")]),_:2},1032,["class"])):(s(),V(x,{key:5,fill:""},{default:i(()=>[l("schedule")]),_:1})),c("div",null,p(e.announceTime.toLocaleTimeString("nl-NL"))+" ("+p(d(e.announceTime-y.value))+") ",1),c("div",{style:de({opacity:e.status==="announcing"?1:.35})},[l(" '"),(s(!0),f(O,null,X(e.announcement,(r,z)=>{var Q;return q((s(),f("span",{class:A(["word",{announcing:e.announceTime<=y.value&&((Q=a(S)[0])==null?void 0:Q.id)===r}])},p(N(r))+p(z<e.announcement.length-1?" ":""),3)),[[J,r!=="chime"]])}),256)),l("' ")],4)],42,Re)],2)),[[J,y.value-e.announceTime<1e4]])),256))])])):b("",!0),c("div",Ne,[D(a(fe),{themeColor:"#ffc426"},{default:i(()=>[D(a(W),{value:"Opties"},{default:i(()=>[D(G,{modelValue:a(P),"onUpdate:modelValue":u[0]||(u[0]=e=>M(P)?P.value=e:null),identifier:"announceStart"},{default:i(()=>[l(" 'Start' omroepen ")]),_:1},8,["modelValue"]),a(v).table.some(e=>{var r;return(r=e.AUDITORIUM)==null?void 0:r.includes("4DX")})?(s(),V(G,{key:0,modelValue:a(E),"onUpdate:modelValue":u[1]||(u[1]=e=>M(E)?E.value=e:null),identifier:"announcePlfStart"},{default:i(()=>[c("span",null,[l("'Start' "),a(P)?(s(),f("b",we,"extra")):b("",!0),l(" omroepen bij 4DX")])]),_:1},8,["modelValue"])):b("",!0),a(E)&&a(v).table.some(e=>{var r;return(r=e.AUDITORIUM)==null?void 0:r.includes("4DX")})?(s(),V(F,{key:1,modelValue:a(k),"onUpdate:modelValue":u[2]||(u[2]=e=>M(k)?k.value=e:null),modelModifiers:{number:!0},identifier:"announcePlfStartGracePeriod",min:"0",max:"30",unit:"min"},{default:i(()=>[l(" Voorlooptijd 'start' bij 4DX "),a(T)>0?(s(),f("div",Ge," De 4DX-inloop wordt "+p(a(k))+" min van tevoren omgeroepen. ",1)):b("",!0)]),_:1},8,["modelValue"])):b("",!0),D(G,{modelValue:a(g),"onUpdate:modelValue":u[3]||(u[3]=e=>M(g)?g.value=e:null),identifier:"announceMainShow"},{default:i(()=>[l(" 'Start hoofdfilm' omroepen ")]),_:1},8,["modelValue"]),D(G,{modelValue:a(_),"onUpdate:modelValue":u[4]||(u[4]=e=>M(_)?_.value=e:null),identifier:"announceCredits"},{default:i(()=>[l(" 'Aftiteling' omroepen ")]),_:1},8,["modelValue"]),a(_)?(s(),V(F,{key:2,modelValue:a(T),"onUpdate:modelValue":u[5]||(u[5]=e=>M(T)?T.value=e:null),modelModifiers:{number:!0},identifier:"announceCreditsGracePeriod",step:"15",min:"0",max:"240",unit:"s"},{default:i(()=>[l(" Voorlooptijd 'aftiteling' "),a(T)>0?(s(),f("div",Xe," De aftiteling wordt "+p(a(T))+" s van tevoren omgeroepen. ",1)):b("",!0)]),_:1},8,["modelValue"])):b("",!0),D(G,{modelValue:a(o),"onUpdate:modelValue":u[6]||(u[6]=e=>M(o)?o.value=e:null),identifier:"announceEnd"},{default:i(()=>[l(" 'Einde voorstelling' omroepen ")]),_:1},8,["modelValue"]),D(ne,{modelValue:a(U),"onUpdate:modelValue":u[7]||(u[7]=e=>M(U)?U.value=e:null),identifier:"voice"},{default:i(()=>[l("Naam stem")]),_:1},8,["modelValue"])]),_:1}),D(a(W),{value:"Handmatig"},{default:i(()=>[c("div",Be,[(s(!0),f(O,null,X(Object.keys(m.rosetta.sprite),e=>(s(),V(te,{onClick:r=>a(S).push({id:e})},{default:i(()=>[l(p(N(e)),1)]),_:2},1032,["onClick"]))),256))]),c("div",je,[(s(!0),f(O,null,X(a(S),(e,r)=>(s(),f("div",{onClick:z=>a(S).splice(r,1)},[D(x,{fill:!0},{default:i(()=>[l("graphic_eq")]),_:1}),l(" "+p(ee(N(e.id,!0))),1)],8,ze))),256))])]),_:1})]),_:1})])])])]),c("div",He,p(y.value.toLocaleTimeString("nl-NL")),1)],64)}}},We=Z(qe,[["__scopeId","data-v-95a5ee15"]]);export{We as default};
