const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/howler-BXccDGgb.js","assets/_commonjsHelpers-C4iS2aBk.js"])))=>i.map(i=>d[i]);
import{c as ae,u as le,S as se,a as oe,_ as ue,b as ie}from"./DropZone-Z4PCQ3YW.js";import{_ as X,x as K,y as Z,r as $,o as u,c as g,d as s,a as F,i as z,v as G,u as t,F as C,h as A,j as U,p as w,w as o,l as i,g as b,z as ee,A as de,B as re,C as me,D as R,E as Y,e as v,G as J,n as fe,f as B}from"./index-BjcDeCQu.js";import{u as pe,_ as ce,a as ve}from"./TmsScheduleUploadSection-DX-BdVBR.js";import{_ as _e}from"./Chip-B6f9gQet.js";const ge=["for"],be={class:"title"},Te={class:"input"},Se=["id","value"],ye={class:"words"},Ve={key:1},ke={__name:"InputAnnouncement",props:K(["identifier"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(T){const _=Z(T,"modelValue"),k=$(null),{focused:S}=ae(k);function I(a){const h={start:"start",mainshow:"start hoofdfilm",credits:"aftiteling",end:"einde voorstelling",chime:"geluidje"};let c=a.match(/^(auditorium)([0-9]+|(#))$/);return h[a]?{name:h[a],valid:!0}:c&&c[2]==="#"?{name:"zaal #",valid:!0}:c?{name:`zaal ${Number(c[2])}`,valid:!0}:{name:a,valid:!1}}return(a,h)=>{const c=ee;return u(),g("label",{class:"input",for:T.identifier},[s("div",be,[F(a.$slots,"default",{},void 0,!0)]),s("div",Te,[s("input",{ref_key:"inputElement",ref:k,type:"text",inputmode:"numeric",pattern:"[0-9]+",name:"",id:T.identifier,value:_.value.join(" "),onInput:h[0]||(h[0]=r=>a.$emit("update:modelValue",r.target.value.split(" ")))},null,40,Se),z(s("div",ye,[(u(!0),g(C,null,A(_.value,r=>(u(),g("div",{class:U(["word",{valid:I(r).valid}])},[r==="chime"?(u(),w(c,{key:0,fill:!0,style:{"--size":"14px"}},{default:o(()=>h[1]||(h[1]=[i("music_note")])),_:1})):(u(),g("span",Ve,b(I(r).name),1))],2))),256))],512),[[G,!t(S)]])])],8,ge)}}},he=X(ke,[["__scopeId","data-v-ad2b6dd0"]]),De={},Ue={class:"primary",type:"button"};function we(T,_){return u(),g("button",Ue,[F(T.$slots,"default",{},void 0,!0)])}const Ie=X(De,[["render",we],["__scopeId","data-v-03dd0e73"]]),Ce=["for"],$e={class:"title"},xe=["id"],Ae={__name:"InputText",props:K(["identifier"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(T){const _=Z(T,"modelValue");return(k,S)=>(u(),g("label",{class:"input",for:T.identifier},[s("div",$e,[F(k.$slots,"default",{},void 0,!0)]),z(s("input",{type:"text",inputmode:"numeric",pattern:"[0-9]+",name:"",id:T.identifier,"onUpdate:modelValue":S[0]||(S[0]=I=>_.value=I)},null,8,xe),[[de,_.value]])],8,Ce))}},Ee=X(Ae,[["__scopeId","data-v-70fdb9ff"]]);function Me(T,{volume:_=1,playbackRate:k=1,soundEnabled:S=!0,interrupt:I=!1,autoplay:a=!1,onload:h,...c}={}){const r=$(null),y=$(!1),E=$(null),d=$(null);function j(e){var D;typeof h=="function"&&h.call(this,e),E.value=(E.value||((D=d.value)==null?void 0:D.duration())||0)*1e3,a===!0&&(y.value=!0)}return re(async()=>{await me(()=>import("./howler-BXccDGgb.js").then(e=>e.h),__vite__mapDeps([0,1])),r.value=Howl,d.value=new r.value({src:t(T),volume:t(_),rate:t(k),onload:j,...c})}),R(()=>[t(T)],()=>{r.value&&r.value&&d&&d.value&&(d.value=new r.value({src:t(T),volume:t(_),rate:t(k),onload:j,...c}))}),R(()=>[t(_),t(k)],()=>{d.value&&(d.value.volume(t(_)),d.value.rate(t(k)))}),{play:e=>{typeof e>"u"&&(e={}),!(!d.value||!S&&!e.forceSoundEnabled)&&(I&&d.value.stop(),e.playbackRate&&d.value.rate(e.playbackRate),d.value.play(e.id),d.value.once("end",()=>{d.value&&d.value&&!d.value.playing()&&(y.value=!1)}),y.value=!0)},sound:d,isPlaying:y,duration:E,pause:e=>{d.value&&(d.value.pause(typeof e=="number"?e:void 0),y.value=!1)},stop:e=>{d.value&&(d.value.stop(typeof e=="number"?e:void 0),y.value=!1)}}}const Oe="/Pathe-Tools/assets/rosetta-PY6t9944.ogg",Pe="/Pathe-Tools/assets/gerwim-hi7crA_V.ogg",Le={class:"container dark"},Ne={class:"flex",style:{"flex-wrap":"wrap-reverse"}},Be={style:{flex:"50% 1 1"}},Re={id:"upcoming-announcements"},je={class:"room"},ze={class:"title"},Xe={class:"time"},Ge={class:"flex chips"},Fe=["onDblclick"],He={key:"0"},qe={key:1},We={class:"manual-sounds-list"},Qe={class:"manual-sounds-list"},Ye={class:"queue"},Je=["onClick"],Ke={key:"0"},Ze=["disabled"],en={class:"clock"},nn={__name:"AnnouncerView",setup(T){const _=pe(),k=$(!0),S=$(()=>new Date);setInterval(I,1e3),I();function I(){S.value=new Date}const a=le("announcer-options",{plfStart:{enabled:!0,minutesBeforeStartTime:15,announcement:["chime","start","auditorium#"]},start:{enabled:!1,announcement:["chime","start","auditorium#"]},mainShow:{enabled:!1,announcement:["chime","mainshow","auditorium#"]},credits:{enabled:!0,secondsBeforeCreditsTime:60,announcement:["chime","credits","auditorium#"]},end:{enabled:!1,announcement:["chime","end","auditorium#"]},voice:"Rosetta"}),h={rosetta:Oe,gerwim:Pe},c=Y({rosetta:{sprite:{auditorium01:[0,1201.6326530612246],auditorium02:[3e3,1332.2448979591836],auditorium03:[6e3,1332.2448979591836],auditorium04:[9e3,1384.489795918368],auditorium05:[12e3,1436.7346938775504],auditorium06:[15e3,1436.7346938775504],auditorium07:[18e3,1515.102040816327],auditorium08:[21e3,1515.102040816327],auditorium09:[24e3,1488.9795918367347],auditorium10:[27e3,1306.1224489795932],auditorium11:[3e4,1462.8571428571427],auditorium12:[33e3,1515.1020408163233],auditorium13:[36e3,1488.9795918367383],auditorium14:[39e3,1488.9795918367383],auditorium15:[42e3,1567.3469387755076],auditorium16:[45e3,1488.9795918367383],auditorium17:[48e3,1515.1020408163233],auditorium18:[51e3,1462.8571428571463],auditorium19:[54e3,1724.0816326530605],auditorium20:[57e3,1593.4693877551],chime:[6e4,3084.51247165533],credits:[65e3,1501.6099773242645],end:[68e3,1563.7868480725672],mainshow:[71e3,1793.3333333333367],preshow:[74e3,1814.036281179142],start:[77e3,989.9092970521508]}},gerwim:{sprite:{auditorium01:[0,824.9659863945578],auditorium02:[2e3,870.9070294784577],auditorium03:[4e3,790.2040816326528],auditorium04:[6e3,886.8253968253965],auditorium05:[8e3,838.5260770975051],auditorium06:[1e4,866.757369614513],auditorium07:[12e3,987.7777777777776],auditorium08:[14e3,665.6689342403635],credits:[16e3,936.5532879818588],start:[18e3,638.9342403628114]}}});Object.keys(c).forEach(l=>{({play:c[l].play,isPlaying:c[l].isPlaying}=Me(h[l],{sprite:c[l].sprite,preload:!0,onplay:async()=>{document.dispatchEvent(new CustomEvent("announcerSoundPlay"))},onend:async()=>{document.dispatchEvent(new CustomEvent("announcerSoundEnd"))}}))});let r=Y([]);R(r,async l=>{var e,D,m;if(l[0]&&!c.rosetta.sprite[l[0].id]&&r.shift(),l[0]&&!Object.values(c).some(f=>f.isPlaying)){const f=r[0];(D=c[(e=a.value.voice)==null?void 0:e.toLowerCase()])!=null&&D.sprite[f.id]?c[(m=a.value.voice)==null?void 0:m.toLowerCase()].play(f):c.rosetta.play(f),document.addEventListener("announcerSoundEnd",()=>{r.shift()},{once:!0})}},{deep:!0});const y=$([]);R([_,a],([l])=>E(l),{deep:!0}),E(_);function E(l){let e=[];const D=["start","plfStart","mainShow","credits","end"];l.table.forEach(m=>{m.scheduledTime&&D.forEach(f=>{var P;if(!a.value[f].enabled)return;let V,O=a.value[f].announcement.map(x=>x.replace("#",q(m.AUDITORIUM)));switch(f){case"start":V=m.scheduledTime;break;case"plfStart":if(!((P=m.AUDITORIUM)!=null&&P.includes("4DX")))return;V=new Date(m.scheduledTime.getTime()-a.value.plfStart.minutesBeforeStartTime*6e4);break;case"mainShow":V=m.featureTime;break;case"credits":V=new Date(m.creditsTime.getTime()-a.value.credits.secondsBeforeCreditsTime*1e3);break;case"end":V=m.endTime;break}V&&e.push({announceTime:V,announcement:O,status:"unscheduled",announcementType:f,...m,key:V+O.join()})})}),y.value.filter(m=>m.status==="scheduled").forEach(m=>{const f=e.findIndex(V=>m.announceTime===V.announceTime&&m.announcement.join()===V.announcement.join());f&&e.splice(f,1),e.push(m)}),y.value=[...e.filter(m=>Date.now()-m.announceTime<1e4).sort((m,f)=>m.announceTime-f.announceTime)],I()}setInterval(d,3e4),R(y,d),d();function d(){y.value.filter(l=>l.announceTime-Date.now()<6e4&&l.status==="unscheduled").forEach(l=>{l.status!=="scheduled"&&(l.status="scheduled",setTimeout(()=>{l.status==="scheduled"&&(l.status="announcing",l.announcement.forEach(e=>{r.push({id:e,key:new Date().getTime()+e})}))},Math.max(l.announceTime-Date.now()-5e3,0)))})}function j(l){return l<6e4?Math.floor(l/1e3)+" s":l<6e5?Math.floor(l/6e4)+":"+String(Math.floor(l%6e4/1e3)).padStart(2,"0")+" min":l<36e5?Math.floor(l/6e4)+" min":Math.floor(l/36e5)+":"+String(Math.floor(l%36e5/6e4)).padStart(2,"0")+" h"}function M(l){const e={start:"start",preshow:"start voorprogramma",mainshow:"start hoofdfilm",credits:"aftiteling",end:"einde voorstelling",chime:"geluidje"};let D=l.match(/^(auditorium)([0-9]+)$/);return e[l]?e[l]:D?`zaal ${Number(D[2])}`:l}function H(l){return l.charAt(0).toUpperCase()+l.slice(1)}function q(l){return l!=null&&l.toLowerCase().includes("rooftop")?"08":String(l==null?void 0:l.match(/\d+/)).padStart(2,"0")}return(l,e)=>{const D=ce,m=_e,f=ee,V=Ee,O=Ie,P=oe,x=ve,L=he,W=ue,ne=ie,te=se;return u(),g(C,null,[s("main",Le,[v(D),s("section",null,[s("div",Ne,[s("div",Be,[e[22]||(e[22]=s("h2",null,"Geplande omroepen",-1)),s("div",Re,[v(J,{name:"list"},{default:o(()=>[(u(!0),g(C,null,A(y.value,n=>z((u(),g("div",{class:U(["film",{announcing:n.status==="announcing"}]),key:n.key},[s("div",je,b(n.AUDITORIUM==="PULR 8"||n.AUDITORIUM==="Rooftop"?"RT":n.AUDITORIUM.replace(/^\w+\s/,"").split(" ")[0]),1),s("div",ze,b(n.title),1),s("div",Xe,b(n.scheduledTime.toLocaleTimeString("nl-NL"))+" – "+b(n.endTime.toLocaleTimeString("nl-NL")),1),s("div",Ge,[(u(!0),g(C,null,A(n.extras,p=>(u(),w(m,{class:U({"translucent-white":!(n.announcementType==="start4dx"&&p==="4DX")})},{default:o(()=>[i(b(p),1)]),_:2},1032,["class"]))),256))]),s("div",{class:U(["announcement",n.announcement]),onDblclick:p=>n.announcement.forEach(N=>{t(r).push({id:N,key:new Date().getTime()+N})}),style:{display:"grid","grid-template-columns":"64px 130px 1fr"}},[n.announcementType==="plfStart"?(u(),w(f,{key:0,class:U({pulsate:n.status==="scheduled"})},{default:o(()=>e[14]||(e[14]=[i("line_start_diamond")])),_:2},1032,["class"])):n.announcementType==="start"?(u(),w(f,{key:1,class:U({pulsate:n.status==="scheduled"})},{default:o(()=>e[15]||(e[15]=[i("line_start_square")])),_:2},1032,["class"])):n.announcementType==="mainShow"?(u(),w(f,{key:2,class:U({pulsate:n.status==="scheduled"})},{default:o(()=>e[16]||(e[16]=[i("line_start_circle")])),_:2},1032,["class"])):n.announcementType==="credits"?(u(),w(f,{key:3,class:U({pulsate:n.status==="scheduled"})},{default:o(()=>e[17]||(e[17]=[i("line_end_circle")])),_:2},1032,["class"])):n.announcementType==="end"?(u(),w(f,{key:4,class:U({pulsate:n.status==="scheduled"})},{default:o(()=>e[18]||(e[18]=[i("line_end_square")])),_:2},1032,["class"])):(u(),w(f,{key:5},{default:o(()=>e[19]||(e[19]=[i("schedule")])),_:1})),s("div",null,b(n.announceTime.toLocaleTimeString("nl-NL"))+" ("+b(j(n.announceTime-S.value))+") ",1),s("div",{style:fe({opacity:n.status==="announcing"?1:.35})},[e[20]||(e[20]=i(" '")),(u(!0),g(C,null,A(n.announcement,(p,N)=>{var Q;return z((u(),g("span",{class:U(["word",{announcing:n.announceTime<=S.value&&((Q=t(r)[0])==null?void 0:Q.id)===p}])},b(M(p))+b(N<n.announcement.length-1?" ":""),3)),[[G,p!=="chime"]])}),256)),e[21]||(e[21]=i("' "))],4)],42,Fe)],2)),[[G,S.value-n.announceTime<1e4]])),128)),y.value.filter(n=>S.value-n.announceTime<1e4).length<1?(u(),g("p",He,"Er zijn geen omroepen gepland.")):B("",!0),t(_).table.length<1?(u(),g("p",qe,"Upload eerst een bestand.")):B("",!0)]),_:1})])]),v(te,{style:{"flex-basis":"229px"}},{default:o(()=>[v(ne,null,{default:o(()=>[v(P,{value:"Stem"},{default:o(()=>[s("fieldset",null,[e[24]||(e[24]=s("legend",null,"Stem",-1)),v(V,{modelValue:t(a).voice,"onUpdate:modelValue":e[0]||(e[0]=n=>t(a).voice=n),identifier:"voice"},{default:o(()=>e[23]||(e[23]=[i("Naam stem")])),_:1},8,["modelValue"])]),s("fieldset",null,[e[25]||(e[25]=s("legend",null,"Handmatig afspelen",-1)),s("div",We,[(u(!0),g(C,null,A(Object.keys(c.rosetta.sprite).filter(n=>!n.startsWith("auditorium")),n=>(u(),w(O,{onClick:p=>t(r).push({id:n,key:new Date().getTime()+n})},{default:o(()=>[i(b(M(n)),1)]),_:2},1032,["onClick"]))),256))]),s("div",Qe,[(u(!0),g(C,null,A(Object.keys(c.rosetta.sprite).filter(n=>n.startsWith("auditorium")),n=>(u(),w(O,{onClick:p=>t(r).push({id:n,key:new Date().getTime()+n})},{default:o(()=>[i(b(M(n)),1)]),_:2},1032,["onClick"]))),256))])]),s("fieldset",null,[e[27]||(e[27]=s("legend",null,"Nu afgespeeld",-1)),s("div",Ye,[v(J,{name:"list"},{default:o(()=>[(u(!0),g(C,null,A(t(r),(n,p)=>(u(),g("div",{onClick:N=>t(r).splice(p,1),key:n.key,class:U({announcing:p===0})},[v(f,{fill:!0},{default:o(()=>e[26]||(e[26]=[i("graphic_eq")])),_:1}),i(" "+b(H(M(n.id,!0))),1)],10,Je))),128)),t(r).length<1?(u(),g("p",Ke,"Er wordt momenteel geen omroep afgespeeld.")):B("",!0)]),_:1})])])]),_:1}),t(_).table.length>0?(u(),w(P,{key:0,value:"Omroep"},{default:o(()=>[k.value?(u(),g("div",{key:0,onClick:e[1]||(e[1]=n=>k.value=!1),class:"parameters-warning"},[v(f,{fill:"",style:{"--size":"48px"}},{default:o(()=>e[28]||(e[28]=[i("warning")])),_:1}),e[29]||(e[29]=s("p",null,[i(" Het is afgeraden deze opties aan te passen."),s("br"),s("br"),i(" De standaardinstellingen zijn samengesteld op basis van wat het beste lijkt te werken volgens de medewerkers."),s("br"),s("br"),i(" Als je deze instellingen aanpast, dan hebben medewerkers mogelijk geen zekerheid meer over wanneer een omroep afgespeeld wordt. ")],-1))])):B("",!0),s("fieldset",{disabled:!t(_).table.some(n=>{var p;return(p=n.AUDITORIUM)==null?void 0:p.includes("4DX")})},[e[33]||(e[33]=s("legend",null,"4DX-inloop",-1)),v(x,{modelValue:t(a).plfStart.enabled,"onUpdate:modelValue":e[2]||(e[2]=n=>t(a).plfStart.enabled=n),identifier:"announcePlfStart",disabled:!t(_).table.some(n=>{var p;return(p=n.AUDITORIUM)==null?void 0:p.includes("4DX")})},{default:o(()=>e[30]||(e[30]=[s("span",null,"Omroepen",-1)])),_:1},8,["modelValue","disabled"]),v(L,{modelValue:t(a).plfStart.announcement,"onUpdate:modelValue":e[3]||(e[3]=n=>t(a).plfStart.announcement=n),identifier:"announcePlfStartAnnouncement",disabled:!t(a).plfStart.enabled||!t(_).table.some(n=>{var p;return(p=n.AUDITORIUM)==null?void 0:p.includes("4DX")})},{default:o(()=>e[31]||(e[31]=[i(" Inhoud ")])),_:1},8,["modelValue","disabled"]),v(W,{modelValue:t(a).plfStart.minutesBeforeStartTime,"onUpdate:modelValue":e[4]||(e[4]=n=>t(a).plfStart.minutesBeforeStartTime=n),modelModifiers:{number:!0},identifier:"announcePlfStartGracePeriod",min:"0",max:"30",unit:"min",disabled:!t(a).plfStart.enabled||!t(_).table.some(n=>{var p;return(p=n.AUDITORIUM)==null?void 0:p.includes("4DX")})},{default:o(()=>[e[32]||(e[32]=i(" Voorlooptijd ")),s("small",null," De omroep wordt "+b(t(a).plfStart.minutesBeforeStartTime)+" min voor de aanvangstijd afgespeeld. ",1)]),_:1},8,["modelValue","disabled"])],8,Ze),s("fieldset",null,[e[36]||(e[36]=s("legend",null,"Start",-1)),v(x,{modelValue:t(a).start.enabled,"onUpdate:modelValue":e[5]||(e[5]=n=>t(a).start.enabled=n),identifier:"announceStart"},{default:o(()=>e[34]||(e[34]=[i(" Omroepen ")])),_:1},8,["modelValue"]),v(L,{modelValue:t(a).start.announcement,"onUpdate:modelValue":e[6]||(e[6]=n=>t(a).start.announcement=n),identifier:"announceStartAnnouncement",disabled:!t(a).start.enabled},{default:o(()=>e[35]||(e[35]=[i(" Inhoud ")])),_:1},8,["modelValue","disabled"])]),s("fieldset",null,[e[39]||(e[39]=s("legend",null,"Start hoofdfilm",-1)),v(x,{modelValue:t(a).mainShow.enabled,"onUpdate:modelValue":e[7]||(e[7]=n=>t(a).mainShow.enabled=n),identifier:"announceMainShow"},{default:o(()=>e[37]||(e[37]=[i(" Omroepen ")])),_:1},8,["modelValue"]),v(L,{modelValue:t(a).mainShow.announcement,"onUpdate:modelValue":e[8]||(e[8]=n=>t(a).mainShow.announcement=n),identifier:"announceMainShowAnnouncement",disabled:!t(a).mainShow.enabled},{default:o(()=>e[38]||(e[38]=[i(" Inhoud ")])),_:1},8,["modelValue","disabled"])]),s("fieldset",null,[e[43]||(e[43]=s("legend",null,"Aftiteling",-1)),v(x,{modelValue:t(a).credits.enabled,"onUpdate:modelValue":e[9]||(e[9]=n=>t(a).credits.enabled=n),identifier:"announceCredits"},{default:o(()=>e[40]||(e[40]=[i(" Omroepen ")])),_:1},8,["modelValue"]),v(L,{modelValue:t(a).credits.announcement,"onUpdate:modelValue":e[10]||(e[10]=n=>t(a).credits.announcement=n),identifier:"announceCreditsAnnouncement",disabled:!t(a).credits.enabled},{default:o(()=>e[41]||(e[41]=[i(" Inhoud ")])),_:1},8,["modelValue","disabled"]),v(W,{modelValue:t(a).credits.secondsBeforeCreditsTime,"onUpdate:modelValue":e[11]||(e[11]=n=>t(a).credits.secondsBeforeCreditsTime=n),modelModifiers:{number:!0},identifier:"announceCreditsGracePeriod",step:"15",min:"0",max:"240",unit:"s",disabled:!t(a).credits.enabled},{default:o(()=>[e[42]||(e[42]=i(" Voorlooptijd ")),s("small",null," De omroep wordt "+b(t(a).credits.secondsBeforeCreditsTime)+" s voor de aftiteling afgespeeld. ",1)]),_:1},8,["modelValue","disabled"])]),s("fieldset",null,[e[46]||(e[46]=s("legend",null,"Einde voorstelling",-1)),v(x,{modelValue:t(a).end.enabled,"onUpdate:modelValue":e[12]||(e[12]=n=>t(a).end.enabled=n),identifier:"announceEnd"},{default:o(()=>e[44]||(e[44]=[i(" Omroepen ")])),_:1},8,["modelValue"]),v(L,{modelValue:t(a).end.announcement,"onUpdate:modelValue":e[13]||(e[13]=n=>t(a).end.announcement=n),identifier:"announceEndAnnouncement",disabled:!t(a).end.enabled},{default:o(()=>e[45]||(e[45]=[i(" Inhoud ")])),_:1},8,["modelValue","disabled"])])]),_:1})):B("",!0)]),_:1})]),_:1})])])]),s("div",en,b(S.value.toLocaleTimeString("nl-NL")),1)],64)}}},on=X(nn,[["__scopeId","data-v-4fec8e79"]]);export{on as default};
