const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/howler-BXccDGgb.js","assets/_commonjsHelpers-C4iS2aBk.js"])))=>i.map(i=>d[i]);
import{_ as Y,y as ne,z as te,o as i,c as f,d as c,a as ae,i as H,A as ue,r as w,B as oe,C as ie,u as a,D as G,E as Q,e as D,F as L,g as N,f as C,w as d,x as K,j as X,t as h,m as V,l as s,n as le,p as A,q as se,s as de,G as re,h as ce}from"./index-JT9-a_Xn.js";import{a as me,u as M,_ as fe,b as pe,c as ve}from"./TmsScheduleUploadSection-BO4DSgRd.js";import{_ as _e}from"./Chip-CXoWqPru.js";import{C as J,x as he}from"./super-vue3-tabs-CMX-DoSm.js";const ye=["for"],Te={class:"title"},ge=["id"],Se={__name:"InputText",props:ne(["identifier"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(y){const p=te(y,"modelValue");return(g,k)=>(i(),f("label",{class:"input",for:y.identifier},[c("div",Te,[ae(g.$slots,"default",{},void 0,!0)]),H(c("input",{type:"text",inputmode:"numeric",pattern:"[0-9]+",name:"",id:y.identifier,"onUpdate:modelValue":k[0]||(k[0]=U=>p.value=U)},null,8,ge),[[ue,p.value,void 0,{number:!0}]])],8,ye))}},Ve=Y(Se,[["__scopeId","data-v-a93f9514"]]);function W(y,{volume:p=1,playbackRate:g=1,soundEnabled:k=!0,interrupt:U=!1,autoplay:P=!1,onload:E,...I}={}){const S=w(null),v=w(!1),T=w(null),o=w(null);function m(){var r;typeof E=="function"&&E.call(this),T.value=(T.value||((r=o.value)==null?void 0:r.duration())||0)*1e3,P===!0&&(v.value=!0)}return oe(async()=>{const r=await ie(()=>import("./howler-BXccDGgb.js").then(O=>O.h),__vite__mapDeps([0,1]));S.value=r.default.Howl,o.value=new S.value({src:a(y),volume:a(p),rate:a(g),onload:m,...I})}),G(()=>[y],()=>{S.value&&S.value&&o&&o.value&&(o.value=new S.value({src:a(y),volume:a(p),rate:a(g),onload:m,...I}))}),G(()=>[a(p),a(g)],()=>{o.value&&(o.value.volume(a(p)),o.value.rate(a(g)))}),{play:r=>{typeof r>"u"&&(r={}),!(!o.value||!k&&!r.forceSoundEnabled)&&(U&&o.value.stop(),r.playbackRate&&o.value.rate(r.playbackRate),o.value.play(r.id),o.value.once("end",()=>{o.value&&o.value&&!o.value.playing()&&(v.value=!1)}),v.value=!0)},sound:o,isPlaying:v,duration:T,pause:r=>{o.value&&(o.value.pause(typeof r=="number"?r:void 0),v.value=!1)},stop:r=>{o.value&&(o.value.stop(typeof r=="number"?r:void 0),v.value=!1)}}}const xe="/Pathe-Tools/assets/rosetta-DA6vQKhk.ogg",De="/Pathe-Tools/assets/gerwim-hi7crA_V.ogg",Ue=y=>(se("data-v-7c248e28"),y=y(),de(),y),Ee={class:"container dark"},Ie={class:"flex",style:{"flex-wrap":"wrap"}},ke={key:0,style:{flex:"50% 1 1"}},Pe=Ue(()=>c("h2",null,"Geplande omroepen",-1)),Ae={id:"upcoming-announcements",class:"flex",style:{"flex-direction":"column",gap:"8px"}},Me={class:"room"},be={class:"title"},Ce={class:"time"},$e={class:"flex chips"},we=["onDblclick"],Oe={id:"parameters",style:{flex:"229px 1 1"}},Re={key:0},Le={key:0,class:"small"},Ne={key:0,class:"small"},Ge={class:"flex",style:{"flex-wrap":"wrap",gap:"8px","margin-top":"-4px"}},Be={class:"queue"},Xe={__name:"AnnouncerView",setup(y){const p=me(),g=w(()=>new Date);setInterval(k,1e3),k();function k(){g.value=new Date}const U=M("announcement-voice","rosetta"),P=M("announce-start",!1),E=M("announce-plf-start",!0),I=M("announce-plf-start-grace-period",15),S=M("announce-main-show",!1),v=M("announce-credits",!0),T=M("announce-credits-grace-period",60),o=M("announce-end",!1),m=Q({rosetta:{sprite:{auditorium01:[0,1201.6326530612246],auditorium02:[3e3,1332.2448979591836],auditorium03:[6e3,1332.2448979591836],auditorium04:[9e3,1384.489795918368],auditorium05:[12e3,1436.7346938775504],auditorium06:[15e3,1436.7346938775504],auditorium07:[18e3,1515.102040816327],auditorium08:[21e3,1515.102040816327],auditorium09:[24e3,1488.9795918367347],auditorium10:[27e3,1306.1224489795932],auditorium11:[3e4,1462.8571428571427],auditorium12:[33e3,1515.1020408163233],auditorium13:[36e3,1488.9795918367383],auditorium14:[39e3,1488.9795918367383],auditorium15:[42e3,1567.3469387755076],auditorium16:[45e3,1488.9795918367383],auditorium17:[48e3,1515.1020408163233],auditorium18:[51e3,1462.8571428571463],auditorium19:[54e3,1724.0816326530605],auditorium20:[57e3,1593.4693877551],chime:[6e4,3084.51247165533],credits:[65e3,1501.6099773242645],end:[68e3,1563.7868480725672],mainshow:[71e3,1793.3333333333367],start:[74e3,989.9092970521508]}},gerwim:{sprite:{auditorium01:[0,824.9659863945578],auditorium02:[2e3,870.9070294784577],auditorium03:[4e3,790.2040816326528],auditorium04:[6e3,886.8253968253965],auditorium05:[8e3,838.5260770975051],auditorium06:[1e4,866.757369614513],auditorium07:[12e3,987.7777777777776],auditorium08:[14e3,665.6689342403635],credits:[16e3,936.5532879818588],start:[18e3,638.9342403628114]}}});({play:m.rosetta.play,isPlaying:m.rosetta.isPlaying}=W(xe,{sprite:m.rosetta.sprite,preload:!0,onplay:async()=>{document.dispatchEvent(new Event("announcerSoundPlay"))},onend:async()=>{document.dispatchEvent(new Event("announcerSoundEnd"))}})),{play:m.gerwim.play,isPlaying:m.gerwim.isPlaying}=W(De,{sprite:m.gerwim.sprite,preload:!0,onplay:async()=>{document.dispatchEvent(new Event("announcerSoundPlay"))},onend:async()=>{document.dispatchEvent(new Event("announcerSoundEnd"))}});let x=Q([]);G(x,async t=>{var u;if(t[0]&&!m.rosetta.sprite[t[0].id]&&x.shift(),t[0]&&!Object.values(m).some(e=>e.isPlaying)){const e=x[0];(u=m[U.value])!=null&&u.sprite[e.id]?m[U.value].play(e):m.rosetta.play(e),document.addEventListener("announcerSoundEnd",()=>{x.shift()},{once:!0})}},{deep:!0});const $=w([]);G([p,P,E,I,S,v,T,o],([t])=>z(t)),z(p);function z(t){let u=[];P.value&&t.table.forEach(e=>{var l;e.scheduledTime&&u.push({announceTime:e.scheduledTime,announcement:["chime","start",`auditorium${String((l=e.AUDITORIUM)==null?void 0:l.match(/\d+/)).padStart(2,"0")}`],announcementType:"start",status:"unscheduled",...e})}),E.value&&t.table.filter(e=>{var l;return(l=e.AUDITORIUM)==null?void 0:l.includes("4DX")}).forEach(e=>{var l;e.scheduledTime&&u.push({announceTime:new Date(e.scheduledTime.getTime()-I.value*6e4),announcement:["chime","start",`auditorium${String((l=e.AUDITORIUM)==null?void 0:l.match(/\d+/)).padStart(2,"0")}`],status:"unscheduled",announcementType:"start4dx",...e})}),S.value&&t.table.forEach(e=>{var l;e.scheduledTime&&u.push({announceTime:e.featureTime,announcement:["chime","mainshow",`auditorium${String((l=e.AUDITORIUM)==null?void 0:l.match(/\d+/)).padStart(2,"0")}`],status:"unscheduled",announcementType:"mainshow",...e})}),v.value&&t.table.forEach(e=>{var l;e.creditsTime&&u.push({announceTime:new Date(e.creditsTime.getTime()-T.value*1e3),announcement:["chime","credits",`auditorium${String((l=e.AUDITORIUM)==null?void 0:l.match(/\d+/)).padStart(2,"0")}`],status:"unscheduled",announcementType:"credits",...e})}),o.value&&t.table.forEach(e=>{var l;e.scheduledTime&&u.push({announceTime:e.endTime,announcement:["chime","end",`auditorium${String((l=e.AUDITORIUM)==null?void 0:l.match(/\d+/)).padStart(2,"0")}`],status:"unscheduled",announcementType:"end",...e})}),$.value.filter(e=>e.status==="scheduled").forEach(e=>{u.find(l=>e.announceTime===l.announceTime&&e.announcement.join()===l.announcement.join())||u.push(e)}),$.value=[...u.filter(e=>Date.now()-e.announceTime<1e4).sort((e,l)=>e.announceTime-l.announceTime)],k()}setInterval(B,3e4),G($,B),B();function B(){$.value.filter(t=>t.announceTime-Date.now()<6e4&&t.status==="unscheduled").forEach(t=>{t.status!=="scheduled"&&(t.status="scheduled",setTimeout(()=>{t.status==="scheduled"&&(t.status="announcing",t.announcement.forEach(u=>{x.push({id:u})}))},t.announceTime-Date.now()))})}function r(t){return t<6e4?Math.floor(t/1e3)+" s":t<6e5?Math.floor(t/6e4)+":"+String(Math.floor(t%6e4/1e3)).padStart(2,"0")+" min":t<36e5?Math.floor(t/6e4)+" min":Math.floor(t/36e5)+":"+String(Math.floor(t%36e5/6e4)).padStart(2,"0")+" h"}function O(t){const u={start:"start",mainshow:"start hoofdfilm",credits:"aftiteling",end:"einde voorstelling"};let e=t.match(/^(auditorium)([0-9]+)$/);return u[t]?u[t]:e?`zaal ${Number(e[2])}`:t}return(t,u)=>{const e=fe,l=_e,b=re,R=pe,q=ve,Z=Ve,ee=ce;return i(),f("div",Ee,[D(e),c("section",null,[c("div",Ie,[a(p).table.length>0?(i(),f("div",ke,[Pe,c("div",Ae,[(i(!0),f(L,null,N($.value,n=>H((i(),f("div",{class:X(["film",{announcing:n.status==="announcing"}])},[c("div",Me,h(n.AUDITORIUM==="PULR 8"?"RT":n.AUDITORIUM.replace(/^\w+\s/,"")),1),c("div",be,h(n.title),1),c("div",Ce,h(n.scheduledTime.toLocaleTimeString("nl-NL"))+" – "+h(n.endTime.toLocaleTimeString("nl-NL")),1),c("div",$e,[(i(!0),f(L,null,N(n.extras,_=>(i(),V(l,{class:X({"translucent-white":n.announcementType!=="start4dx"})},{default:d(()=>[s(h(_),1)]),_:2},1032,["class"]))),256))]),c("div",{class:X(["announcement",n.announcement]),onDblclick:_=>n.announcement.forEach(j=>{a(x).push({id:j})}),style:{display:"grid","grid-template-columns":"64px 130px 1fr"}},[n.status==="announcing"?(i(),V(b,{key:0,fill:"",class:"pulsate"},{default:d(()=>[s("graphic_eq")]),_:1})):n.announcementType==="start"?(i(),V(b,{key:1,fill:""},{default:d(()=>[s("play_arrow")]),_:1})):n.announcementType==="mainshow"?(i(),V(b,{key:2,fill:""},{default:d(()=>[s("play_circle")]),_:1})):n.announcementType==="credits"?(i(),V(b,{key:3,fill:""},{default:d(()=>[s("stop_circle")]),_:1})):n.announcementType==="end"?(i(),V(b,{key:4,fill:""},{default:d(()=>[s("stop")]),_:1})):(i(),V(b,{key:5,fill:""},{default:d(()=>[s("schedule")]),_:1})),c("div",null,h(n.announceTime.toLocaleTimeString("nl-NL"))+" ("+h(r(n.announceTime-g.value))+") ",1),c("div",{style:le({opacity:n.status==="announcing"?1:.35})},[s(" '"),(i(!0),f(L,null,N(n.announcement,(_,j)=>{var F;return H((i(),f("span",{class:X(["word",{announcing:n.announceTime<=g.value&&((F=a(x)[0])==null?void 0:F.id)===_}])},h(O(_))+h(j<n.announcement.length-1?" ":""),3)),[[K,_!=="chime"]])}),256)),s("' ")],4)],42,we)],2)),[[K,g.value-n.announceTime<1e4]])),256))])])):C("",!0),c("div",Oe,[D(a(he),{themeColor:"#ffc426"},{default:d(()=>[D(a(J),{value:"Opties"},{default:d(()=>[D(R,{modelValue:a(P),"onUpdate:modelValue":u[0]||(u[0]=n=>A(P)?P.value=n:null),identifier:"announceStart"},{default:d(()=>[s(" 'Start' omroepen ")]),_:1},8,["modelValue"]),a(p).table.some(n=>{var _;return(_=n.AUDITORIUM)==null?void 0:_.includes("4DX")})?(i(),V(R,{key:0,modelValue:a(E),"onUpdate:modelValue":u[1]||(u[1]=n=>A(E)?E.value=n:null),identifier:"announcePlfStart"},{default:d(()=>[c("span",null,[s("'Start' "),a(P)?(i(),f("b",Re,"extra")):C("",!0),s(" omroepen bij 4DX")])]),_:1},8,["modelValue"])):C("",!0),a(E)&&a(p).table.some(n=>{var _;return(_=n.AUDITORIUM)==null?void 0:_.includes("4DX")})?(i(),V(q,{key:1,modelValue:a(I),"onUpdate:modelValue":u[2]||(u[2]=n=>A(I)?I.value=n:null),modelModifiers:{number:!0},identifier:"announcePlfStartGracePeriod",min:"0",max:"30",unit:"min"},{default:d(()=>[s(" Voorlooptijd 'start' bij 4DX "),a(T)>0?(i(),f("div",Le," De 4DX-inloop wordt "+h(a(I))+" min van tevoren omgeroepen. ",1)):C("",!0)]),_:1},8,["modelValue"])):C("",!0),D(R,{modelValue:a(S),"onUpdate:modelValue":u[3]||(u[3]=n=>A(S)?S.value=n:null),identifier:"announceMainShow"},{default:d(()=>[s(" 'Start hoofdfilm' omroepen ")]),_:1},8,["modelValue"]),D(R,{modelValue:a(v),"onUpdate:modelValue":u[4]||(u[4]=n=>A(v)?v.value=n:null),identifier:"announceCredits"},{default:d(()=>[s(" 'Aftiteling' omroepen ")]),_:1},8,["modelValue"]),a(v)?(i(),V(q,{key:2,modelValue:a(T),"onUpdate:modelValue":u[5]||(u[5]=n=>A(T)?T.value=n:null),modelModifiers:{number:!0},identifier:"announceCreditsGracePeriod",step:"15",min:"0",max:"240",unit:"s"},{default:d(()=>[s(" Voorlooptijd 'aftiteling' "),a(T)>0?(i(),f("div",Ne," De aftiteling wordt "+h(a(T))+" s van tevoren omgeroepen. ",1)):C("",!0)]),_:1},8,["modelValue"])):C("",!0),D(R,{modelValue:a(o),"onUpdate:modelValue":u[6]||(u[6]=n=>A(o)?o.value=n:null),identifier:"announceEnd"},{default:d(()=>[s(" 'Einde voorstelling' omroepen ")]),_:1},8,["modelValue"]),D(Z,{modelValue:a(U),"onUpdate:modelValue":u[7]||(u[7]=n=>A(U)?U.value=n:null),identifier:"voice"},{default:d(()=>[s("Naam stem")]),_:1},8,["modelValue"])]),_:1}),D(a(J),{value:"Handmatig"},{default:d(()=>[c("div",Ge,[(i(!0),f(L,null,N(Object.keys(m.rosetta.sprite),n=>(i(),V(ee,{onClick:_=>a(x).push({id:n})},{default:d(()=>[s(h(O(n)),1)]),_:2},1032,["onClick"]))),256))]),c("div",Be,[(i(!0),f(L,null,N(a(x),n=>(i(),f("div",null,[D(b,{fill:!0},{default:d(()=>[s("graphic_eq")]),_:1}),s(" "+h(O(n.id)),1)]))),256))])]),_:1})]),_:1})])])])])}}},Fe=Y(Xe,[["__scopeId","data-v-7c248e28"]]);export{Fe as default};
