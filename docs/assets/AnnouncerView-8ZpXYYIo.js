const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/howler-BXccDGgb.js","assets/_commonjsHelpers-C4iS2aBk.js"])))=>i.map(i=>d[i]);
import{c as te,u as ae,S as le,_ as oe,a as se,b as ue}from"./DropZone-C6y5QN_Y.js";import{_ as z,x as K,y as J,r as A,o as i,c as _,d as o,a as W,i as N,v as R,u as t,F as $,h as M,j as D,p as w,w as u,l as s,g as b,z as Y,A as ie,B as de,C as re,D as O,E as Q,e as g,n as me,f as q,s as fe}from"./index-Bhte5luT.js";import{u as pe,_ as ce,a as ve}from"./TmsScheduleUploadSection-DNgzzNKG.js";import{_ as ge}from"./Chip-DXAiJ13r.js";const _e=["for"],be={class:"title"},Te={class:"input"},Se=["id","value"],ye={class:"words"},Ve={key:1},he={__name:"InputAnnouncement",props:K(["identifier"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(S){const v=J(S,"modelValue"),y=A(null),{focused:V}=te(y);function x(a){const h={start:"start",mainshow:"start hoofdfilm",credits:"aftiteling",end:"einde voorstelling",chime:"geluidje"};let c=a.match(/^(auditorium)([0-9]+|(#))$/);return h[a]?{name:h[a],valid:!0}:c&&c[2]==="#"?{name:"zaal #",valid:!0}:c?{name:`zaal ${Number(c[2])}`,valid:!0}:{name:a,valid:!1}}return(a,h)=>{const c=Y;return i(),_("label",{class:"input",for:S.identifier},[o("div",be,[W(a.$slots,"default",{},void 0,!0)]),o("div",Te,[o("input",{ref_key:"inputElement",ref:y,type:"text",inputmode:"numeric",pattern:"[0-9]+",name:"",id:S.identifier,value:v.value.join(" "),onInput:h[0]||(h[0]=f=>a.$emit("update:modelValue",f.target.value.split(" ")))},null,40,Se),N(o("div",ye,[(i(!0),_($,null,M(v.value,f=>(i(),_("div",{class:D(["word",{valid:x(f).valid}])},[f==="chime"?(i(),w(c,{key:0,fill:!0,style:{"--size":"14px"}},{default:u(()=>h[1]||(h[1]=[s("music_note")])),_:1})):(i(),_("span",Ve,b(x(f).name),1))],2))),256))],512),[[R,!t(V)]])])],8,_e)}}},ke=z(he,[["__scopeId","data-v-ad2b6dd0"]]),Ue=["for"],xe={class:"title"},we=["id"],De={__name:"InputText",props:K(["identifier"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(S){const v=J(S,"modelValue");return(y,V)=>(i(),_("label",{class:"input",for:S.identifier},[o("div",xe,[W(y.$slots,"default",{},void 0,!0)]),N(o("input",{type:"text",inputmode:"numeric",pattern:"[0-9]+",name:"",id:S.identifier,"onUpdate:modelValue":V[0]||(V[0]=x=>v.value=x)},null,8,we),[[ie,v.value]])],8,Ue))}},Ie=z(De,[["__scopeId","data-v-70fdb9ff"]]);function Ae(S,{volume:v=1,playbackRate:y=1,soundEnabled:V=!0,interrupt:x=!1,autoplay:a=!1,onload:h,...c}={}){const f=A(null),T=A(!1),E=A(null),d=A(null);function P(){var e;typeof h=="function"&&h.call(this),E.value=(E.value||((e=d.value)==null?void 0:e.duration())||0)*1e3,a===!0&&(T.value=!0)}return de(async()=>{const e=await re(()=>import("./howler-BXccDGgb.js").then(U=>U.h),__vite__mapDeps([0,1]));f.value=e.default.Howl,d.value=new f.value({src:t(S),volume:t(v),rate:t(y),onload:P,...c})}),O(()=>[S],()=>{f.value&&f.value&&d&&d.value&&(d.value=new f.value({src:t(S),volume:t(v),rate:t(y),onload:P,...c}))}),O(()=>[t(v),t(y)],()=>{d.value&&(d.value.volume(t(v)),d.value.rate(t(y)))}),{play:e=>{typeof e>"u"&&(e={}),!(!d.value||!V&&!e.forceSoundEnabled)&&(x&&d.value.stop(),e.playbackRate&&d.value.rate(e.playbackRate),d.value.play(e.id),d.value.once("end",()=>{d.value&&d.value&&!d.value.playing()&&(T.value=!1)}),T.value=!0)},sound:d,isPlaying:T,duration:E,pause:e=>{d.value&&(d.value.pause(typeof e=="number"?e:void 0),T.value=!1)},stop:e=>{d.value&&(d.value.stop(typeof e=="number"?e:void 0),T.value=!1)}}}const Ce="/Pathe-Tools/assets/rosetta-DA6vQKhk.ogg",$e="/Pathe-Tools/assets/gerwim-hi7crA_V.ogg",Ee={class:"container dark"},Me={class:"flex",style:{"flex-wrap":"wrap-reverse"}},Oe={style:{flex:"50% 1 1"}},Pe={key:0,id:"upcoming-announcements",class:"flex",style:{"flex-direction":"column",gap:"8px"}},Le={class:"room"},Be={class:"title"},Ne={class:"time"},Re={class:"flex chips"},ze=["onDblclick"],je={key:1},Xe={key:2},Fe=["disabled"],Ge={class:"flex",style:{"flex-wrap":"wrap",gap:"8px","margin-top":"-4px"}},He={class:"queue"},Qe=["onClick"],qe={class:"clock"},Ke={__name:"AnnouncerView",setup(S){const v=pe(),y=A(!0),V=A(()=>new Date);setInterval(x,1e3),x();function x(){V.value=new Date}const a=ae("announcer-options",{plfStart:{enabled:!0,minutesBeforeStartTime:15,announcement:["chime","start","auditorium#"]},start:{enabled:!1,announcement:["chime","start","auditorium#"]},mainShow:{enabled:!1,announcement:["chime","mainshow","auditorium#"]},credits:{enabled:!0,secondsBeforeCreditsTime:60,announcement:["chime","credits","auditorium#"]},end:{enabled:!1,announcement:["chime","end","auditorium#"]},voice:"Rosetta"}),h={rosetta:Ce,gerwim:$e},c=Q({rosetta:{sprite:{auditorium01:[0,1201.6326530612246],auditorium02:[3e3,1332.2448979591836],auditorium03:[6e3,1332.2448979591836],auditorium04:[9e3,1384.489795918368],auditorium05:[12e3,1436.7346938775504],auditorium06:[15e3,1436.7346938775504],auditorium07:[18e3,1515.102040816327],auditorium08:[21e3,1515.102040816327],auditorium09:[24e3,1488.9795918367347],auditorium10:[27e3,1306.1224489795932],auditorium11:[3e4,1462.8571428571427],auditorium12:[33e3,1515.1020408163233],auditorium13:[36e3,1488.9795918367383],auditorium14:[39e3,1488.9795918367383],auditorium15:[42e3,1567.3469387755076],auditorium16:[45e3,1488.9795918367383],auditorium17:[48e3,1515.1020408163233],auditorium18:[51e3,1462.8571428571463],auditorium19:[54e3,1724.0816326530605],auditorium20:[57e3,1593.4693877551],chime:[6e4,3084.51247165533],credits:[65e3,1501.6099773242645],end:[68e3,1563.7868480725672],mainshow:[71e3,1793.3333333333367],start:[74e3,989.9092970521508]}},gerwim:{sprite:{auditorium01:[0,824.9659863945578],auditorium02:[2e3,870.9070294784577],auditorium03:[4e3,790.2040816326528],auditorium04:[6e3,886.8253968253965],auditorium05:[8e3,838.5260770975051],auditorium06:[1e4,866.757369614513],auditorium07:[12e3,987.7777777777776],auditorium08:[14e3,665.6689342403635],credits:[16e3,936.5532879818588],start:[18e3,638.9342403628114]}}});Object.keys(c).forEach(l=>{({play:c[l].play,isPlaying:c[l].isPlaying}=Ae(h[l],{sprite:c[l].sprite,preload:!0,onplay:async()=>{document.dispatchEvent(new CustomEvent("announcerSoundPlay"))},onend:async()=>{document.dispatchEvent(new CustomEvent("announcerSoundEnd"))}}))});let f=Q([]);O(f,async l=>{var e,U,r;if(l[0]&&!c.rosetta.sprite[l[0].id]&&f.shift(),l[0]&&!Object.values(c).some(m=>m.isPlaying)){const m=f[0];(U=c[(e=a.value.voice)==null?void 0:e.toLowerCase()])!=null&&U.sprite[m.id]?c[(r=a.value.voice)==null?void 0:r.toLowerCase()].play(m):c.rosetta.play(m),document.addEventListener("announcerSoundEnd",()=>{f.shift()},{once:!0})}},{deep:!0});const T=A([]);O([v,a],([l])=>E(l),{deep:!0}),E(v);function E(l){let e=[];const U=["start","plfStart","mainShow","credits","end"];l.table.forEach(r=>{r.scheduledTime&&U.forEach(m=>{var I;if(!a.value[m].enabled)return;let k;switch(m){case"start":k=r.scheduledTime;break;case"plfStart":if(!((I=r.AUDITORIUM)!=null&&I.includes("4DX")))return;k=new Date(r.scheduledTime.getTime()-a.value.plfStart.minutesBeforeStartTime*6e4);break;case"mainShow":k=r.featureTime;break;case"credits":k=new Date(r.creditsTime.getTime()-a.value.credits.secondsBeforeCreditsTime*1e3);break;case"end":k=r.endTime;break}k&&e.push({announceTime:k,announcement:a.value[m].announcement.map(C=>C.replace("#",X(r.AUDITORIUM))),status:"unscheduled",announcementType:m,...r})})}),T.value.filter(r=>r.status==="scheduled").forEach(r=>{const m=e.findIndex(k=>r.announceTime===k.announceTime&&r.announcement.join()===k.announcement.join());m&&e.splice(m,1),e.push(r)}),T.value=[...e.filter(r=>Date.now()-r.announceTime<1e4).sort((r,m)=>r.announceTime-m.announceTime)],x()}setInterval(d,3e4),O(T,d),d();function d(){T.value.filter(l=>l.announceTime-Date.now()<6e4&&l.status==="unscheduled").forEach(l=>{l.status!=="scheduled"&&(l.status="scheduled",setTimeout(()=>{l.status==="scheduled"&&(l.status="announcing",l.announcement.forEach(e=>{f.push({id:e})}))},Math.max(l.announceTime-Date.now()-5e3,0)))})}function P(l){return l<6e4?Math.floor(l/1e3)+" s":l<6e5?Math.floor(l/6e4)+":"+String(Math.floor(l%6e4/1e3)).padStart(2,"0")+" min":l<36e5?Math.floor(l/6e4)+" min":Math.floor(l/36e5)+":"+String(Math.floor(l%36e5/6e4)).padStart(2,"0")+" h"}function L(l){const e={start:"start",mainshow:"start hoofdfilm",credits:"aftiteling",end:"einde voorstelling",chime:"geluidje"};let U=l.match(/^(auditorium)([0-9]+)$/);return e[l]?e[l]:U?`zaal ${Number(U[2])}`:l}function j(l){return l.charAt(0).toUpperCase()+l.slice(1)}function X(l){return l!=null&&l.toLowerCase().includes("rooftop")?"08":String(l==null?void 0:l.match(/\d+/)).padStart(2,"0")}return(l,e)=>{const U=ce,r=ge,m=Y,k=Ie,I=ve,C=ke,F=oe,G=se,Z=fe,ee=ue,ne=le;return i(),_($,null,[o("main",Ee,[g(U),o("section",null,[o("div",Me,[o("div",Oe,[e[22]||(e[22]=o("h2",null,"Geplande omroepen",-1)),T.value.length>0?(i(),_("div",Pe,[(i(!0),_($,null,M(T.value,n=>N((i(),_("div",{class:D(["film",{announcing:n.status==="announcing"}])},[o("div",Le,b(n.AUDITORIUM==="PULR 8"||n.AUDITORIUM==="Rooftop"?"RT":n.AUDITORIUM.replace(/^\w+\s/,"").split(" ")[0]),1),o("div",Be,b(n.title),1),o("div",Ne,b(n.scheduledTime.toLocaleTimeString("nl-NL"))+" – "+b(n.endTime.toLocaleTimeString("nl-NL")),1),o("div",Re,[(i(!0),_($,null,M(n.extras,p=>(i(),w(r,{class:D({"translucent-white":!(n.announcementType==="start4dx"&&p==="4DX")})},{default:u(()=>[s(b(p),1)]),_:2},1032,["class"]))),256))]),o("div",{class:D(["announcement",n.announcement]),onDblclick:p=>n.announcement.forEach(B=>{t(f).push({id:B})}),style:{display:"grid","grid-template-columns":"64px 130px 1fr"}},[n.status==="announcing"?(i(),w(m,{key:0,fill:""},{default:u(()=>e[14]||(e[14]=[s("graphic_eq")])),_:1})):n.announcementType==="start"||n.announcementType==="start4dx"?(i(),w(m,{key:1,fill:"",class:D({pulsate:n.status==="scheduled"})},{default:u(()=>e[15]||(e[15]=[s("play_arrow")])),_:2},1032,["class"])):n.announcementType==="mainshow"?(i(),w(m,{key:2,fill:"",class:D({pulsate:n.status==="scheduled"})},{default:u(()=>e[16]||(e[16]=[s("play_circle")])),_:2},1032,["class"])):n.announcementType==="credits"?(i(),w(m,{key:3,fill:"",class:D({pulsate:n.status==="scheduled"})},{default:u(()=>e[17]||(e[17]=[s("stop_circle")])),_:2},1032,["class"])):n.announcementType==="end"?(i(),w(m,{key:4,fill:"",class:D({pulsate:n.status==="scheduled"})},{default:u(()=>e[18]||(e[18]=[s("stop")])),_:2},1032,["class"])):(i(),w(m,{key:5,fill:""},{default:u(()=>e[19]||(e[19]=[s("schedule")])),_:1})),o("div",null,b(n.announceTime.toLocaleTimeString("nl-NL"))+" ("+b(P(n.announceTime-V.value))+") ",1),o("div",{style:me({opacity:n.status==="announcing"?1:.35})},[e[20]||(e[20]=s(" '")),(i(!0),_($,null,M(n.announcement,(p,B)=>{var H;return N((i(),_("span",{class:D(["word",{announcing:n.announceTime<=V.value&&((H=t(f)[0])==null?void 0:H.id)===p}])},b(L(p))+b(B<n.announcement.length-1?" ":""),3)),[[R,p!=="chime"]])}),256)),e[21]||(e[21]=s("' "))],4)],42,ze)],2)),[[R,V.value-n.announceTime<1e4]])),256))])):t(v).table.length>0?(i(),_("p",je,"Er zijn geen omroepen gepland.")):(i(),_("p",Xe,"Upload eerst een bestand."))]),g(ne,{style:{"flex-basis":"229px"}},{default:u(()=>[g(ee,null,{default:u(()=>[t(v).table.length>0?(i(),w(G,{key:0,value:"Opties"},{default:u(()=>[g(k,{modelValue:t(a).voice,"onUpdate:modelValue":e[0]||(e[0]=n=>t(a).voice=n),identifier:"voice"},{default:u(()=>e[23]||(e[23]=[s("Naam stem")])),_:1},8,["modelValue"]),y.value?(i(),_("div",{key:0,onClick:e[1]||(e[1]=n=>y.value=!1),class:"parameters-warning"},[g(m,{fill:"",style:{"--size":"48px"}},{default:u(()=>e[24]||(e[24]=[s("warning")])),_:1}),e[25]||(e[25]=o("p",null,[s(" Het is afgeraden de rest van de opties aan te passen."),o("br"),o("br"),s(" De standaardinstellingen zijn samengesteld op basis van wat het beste lijkt te werken volgens de medewerkers."),o("br"),o("br"),s(" Als je deze instellingen aanpast, dan hebben medewerkers mogelijk geen zekerheid meer over wanneer een omroep afgespeeld wordt. ")],-1))])):q("",!0),o("fieldset",{disabled:!t(v).table.some(n=>{var p;return(p=n.AUDITORIUM)==null?void 0:p.includes("4DX")})},[e[29]||(e[29]=o("legend",null,"4DX-inloop",-1)),g(I,{modelValue:t(a).plfStart.enabled,"onUpdate:modelValue":e[2]||(e[2]=n=>t(a).plfStart.enabled=n),identifier:"announcePlfStart",disabled:!t(v).table.some(n=>{var p;return(p=n.AUDITORIUM)==null?void 0:p.includes("4DX")})},{default:u(()=>e[26]||(e[26]=[o("span",null,"Omroepen",-1)])),_:1},8,["modelValue","disabled"]),g(C,{modelValue:t(a).plfStart.announcement,"onUpdate:modelValue":e[3]||(e[3]=n=>t(a).plfStart.announcement=n),identifier:"announcePlfStartAnnouncement",disabled:!t(a).plfStart.enabled||!t(v).table.some(n=>{var p;return(p=n.AUDITORIUM)==null?void 0:p.includes("4DX")})},{default:u(()=>e[27]||(e[27]=[s(" Inhoud ")])),_:1},8,["modelValue","disabled"]),g(F,{modelValue:t(a).plfStart.minutesBeforeStartTime,"onUpdate:modelValue":e[4]||(e[4]=n=>t(a).plfStart.minutesBeforeStartTime=n),modelModifiers:{number:!0},identifier:"announcePlfStartGracePeriod",min:"0",max:"30",unit:"min",disabled:!t(a).plfStart.enabled||!t(v).table.some(n=>{var p;return(p=n.AUDITORIUM)==null?void 0:p.includes("4DX")})},{default:u(()=>[e[28]||(e[28]=s(" Voorlooptijd ")),o("small",null," De omroep wordt "+b(t(a).plfStart.minutesBeforeStartTime)+" min voor de aanvangstijd afgespeeld. ",1)]),_:1},8,["modelValue","disabled"])],8,Fe),o("fieldset",null,[e[32]||(e[32]=o("legend",null,"Start",-1)),g(I,{modelValue:t(a).start.enabled,"onUpdate:modelValue":e[5]||(e[5]=n=>t(a).start.enabled=n),identifier:"announceStart"},{default:u(()=>e[30]||(e[30]=[s(" Omroepen ")])),_:1},8,["modelValue"]),g(C,{modelValue:t(a).start.announcement,"onUpdate:modelValue":e[6]||(e[6]=n=>t(a).start.announcement=n),identifier:"announceStartAnnouncement",disabled:!t(a).start.enabled},{default:u(()=>e[31]||(e[31]=[s(" Inhoud ")])),_:1},8,["modelValue","disabled"])]),o("fieldset",null,[e[35]||(e[35]=o("legend",null,"Start hoofdfilm",-1)),g(I,{modelValue:t(a).mainShow.enabled,"onUpdate:modelValue":e[7]||(e[7]=n=>t(a).mainShow.enabled=n),identifier:"announceMainShow"},{default:u(()=>e[33]||(e[33]=[s(" Omroepen ")])),_:1},8,["modelValue"]),g(C,{modelValue:t(a).mainShow.announcement,"onUpdate:modelValue":e[8]||(e[8]=n=>t(a).mainShow.announcement=n),identifier:"announceMainShowAnnouncement",disabled:!t(a).mainShow.enabled},{default:u(()=>e[34]||(e[34]=[s(" Inhoud ")])),_:1},8,["modelValue","disabled"])]),o("fieldset",null,[e[39]||(e[39]=o("legend",null,"Aftiteling",-1)),g(I,{modelValue:t(a).credits.enabled,"onUpdate:modelValue":e[9]||(e[9]=n=>t(a).credits.enabled=n),identifier:"announceCredits"},{default:u(()=>e[36]||(e[36]=[s(" Omroepen ")])),_:1},8,["modelValue"]),g(C,{modelValue:t(a).credits.announcement,"onUpdate:modelValue":e[10]||(e[10]=n=>t(a).credits.announcement=n),identifier:"announceCreditsAnnouncement",disabled:!t(a).credits.enabled},{default:u(()=>e[37]||(e[37]=[s(" Inhoud ")])),_:1},8,["modelValue","disabled"]),g(F,{modelValue:t(a).credits.secondsBeforeCreditsTime,"onUpdate:modelValue":e[11]||(e[11]=n=>t(a).credits.secondsBeforeCreditsTime=n),modelModifiers:{number:!0},identifier:"announceCreditsGracePeriod",step:"15",min:"0",max:"240",unit:"s",disabled:!t(a).credits.enabled},{default:u(()=>[e[38]||(e[38]=s(" Voorlooptijd ")),o("small",null," De omroep wordt "+b(t(a).credits.secondsBeforeCreditsTime)+" s voor de aftiteling afgespeeld. ",1)]),_:1},8,["modelValue","disabled"])]),o("fieldset",null,[e[42]||(e[42]=o("legend",null,"Einde voorstelling",-1)),g(I,{modelValue:t(a).end.enabled,"onUpdate:modelValue":e[12]||(e[12]=n=>t(a).end.enabled=n),identifier:"announceEnd"},{default:u(()=>e[40]||(e[40]=[s(" Omroepen ")])),_:1},8,["modelValue"]),g(C,{modelValue:t(a).end.announcement,"onUpdate:modelValue":e[13]||(e[13]=n=>t(a).end.announcement=n),identifier:"announceEndAnnouncement",disabled:!t(a).end.enabled},{default:u(()=>e[41]||(e[41]=[s(" Inhoud ")])),_:1},8,["modelValue","disabled"])])]),_:1})):q("",!0),g(G,{value:"Handmatig"},{default:u(()=>[o("div",Ge,[(i(!0),_($,null,M(Object.keys(c.rosetta.sprite),n=>(i(),w(Z,{onClick:p=>t(f).push({id:n})},{default:u(()=>[s(b(L(n)),1)]),_:2},1032,["onClick"]))),256))]),o("div",He,[(i(!0),_($,null,M(t(f),(n,p)=>(i(),_("div",{onClick:B=>t(f).splice(p,1)},[g(m,{fill:!0},{default:u(()=>e[43]||(e[43]=[s("graphic_eq")])),_:1}),s(" "+b(j(L(n.id,!0))),1)],8,Qe))),256))])]),_:1})]),_:1})]),_:1})])])]),o("div",qe,b(V.value.toLocaleTimeString("nl-NL")),1)],64)}}},en=z(Ke,[["__scopeId","data-v-5b700bd1"]]);export{en as default};
