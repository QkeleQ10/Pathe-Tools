import{_ as ee,o as A,c as I,r as te,a as U,b as ge,d as be,u as K,w as G,m as ye,e as _e,f as l,t as S,n as we,g as Y,v as Ee,h as Te,i as V,j as $,k as Z,F as ne,l as oe,p as F,q as se,s as J,x as Se,y as De}from"./index-BsPzoGPW.js";var xe=Object.defineProperty,re=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable,ie=(e,t,n)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,le=(e,t)=>{for(var n in t||(t={}))Ae.call(t,n)&&ie(e,n,t[n]);if(re)for(var n of re(t))Ie.call(t,n)&&ie(e,n,t[n]);return e},B=(e,t,n)=>new Promise((r,c)=>{var v=f=>{try{h(n.next(f))}catch(u){c(u)}},b=f=>{try{h(n.throw(f))}catch(u){c(u)}},h=f=>f.done?r(f.value):Promise.resolve(f.value).then(v,b);h((n=n.apply(e,t)).next())});function Q(e){return!!e.shadowRoot}let ae=!1;function Ce(){if(ae)return;class e extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}}customElements.define("vue-to-print-shadow-dom",e),ae=!0}const Ne=`
  class VueToPrintShadowDom extends HTMLElement {
    constructor() {
      super();
      this.attachShadow({ mode: 'open' });
    }
  }
  customElements.define('vue-to-print-shadow-dom', VueToPrintShadowDom);
`;function ke(e){const t=e.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("vue-to-print-custom-script","registry-shadow-dom"),t.innerHTML=Ne,e.body.appendChild(t)}const Me=`
  function retrieveStyleSheets(styleSheetMap) {
    styleSheetMap.forEach((styleSheetStrings, tagName) => {
      const styleSheets = [];
      for (let i = styleSheetStrings.length; i--;) {
        const styleSheet = new CSSStyleSheet();
        styleSheet.replaceSync(styleSheetStrings[i]);
        styleSheets.push(styleSheet);
      }

      const elements = document.querySelectorAll('vue-to-print-shadow-dom[original-tag-name=' + tagName + ']');
      for (let i = elements.length; i--;) {
        const element = elements[i];
        element.shadowRoot.adoptedStyleSheets = styleSheets;
      }
    });
  }
`;function je(e){const t=e.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("vue-to-print-custom-script","registry-retrieve-style-sheets-func"),t.innerHTML=Me,e.body.appendChild(t)}const H=new Map;function ce(e){Ce();const t=e.nodeName.toLowerCase(),n=e.shadowRoot.adoptedStyleSheets,r=document.createElement("vue-to-print-shadow-dom");r.setAttribute("original-tag-name",t),H.has(t)||H.set(t,new Set);const c=H.get(t);for(let h=n.length;h--;)c.add(n[h]);const v=r.attributes,b=e.attributes;for(let h=b.length;h--;)v.setNamedItem(b[h].cloneNode());return r}function Pe(){const e=new Map,t=new Map,n=Array.from(H.keys());for(let r=n.length;r--;){const c=[],v=n[r],b=Array.from(H.get(v));for(let h=b.length;h--;){const f=b[h];if(!t.has(f)){let u="";const s=Array.from(f.cssRules);for(let p=s.length;p--;)u+=s[p].cssText;t.set(f,u)}c.push(t.get(f))}e.set(v,c)}return e}function Re(e){const t=e.contentWindow||null;if(!t)throw new Error("Cannot access print window");const n=t.document;if(!n)throw new Error("Cannot access print document");ke(n),je(n);const r=Pe();t.retrieveStyleSheets(r)}function de(e){return!!customElements.get(e.nodeName.toLowerCase())}let ue=!1;function Ue(){if(ue)return;class e extends HTMLElement{constructor(){super()}}customElements.define("vue-to-print-custom-element",e),ue=!0}function pe(e){Ue();const t=e.nodeName.toLowerCase(),n=document.createElement("vue-to-print-custom-element");n.setAttribute("original-tag-name",t);const r=n.attributes,c=e.attributes;for(let v=c.length;v--;)r.setNamedItem(c[v].cloneNode());return n}function fe(e){return B(this,null,function*(){e.getAttribute("src")&&(e.complete||(yield new Promise((t,n)=>{e.addEventListener("load",t,{once:!0}),e.addEventListener("error",r=>n(r.error),{once:!0})})))})}function Le(e){return B(this,null,function*(){e.readyState>=2||(yield new Promise((t,n)=>{e.addEventListener("loadeddata",t,{once:!0}),e.addEventListener("error",r=>n(r.error),{once:!0}),e.addEventListener("stalled",()=>n(new Error("Loading video stalled, skipping")),{once:!0})}))})}function Ve(e){const t=e.cloneNode(),n=t.getContext("2d");return n&&n.drawImage(e,0,0),t}function $e(e,t){const n=e.cloneNode();return t.push(fe(n)),n}function Fe(e,t){const n=e.cloneNode();n.preload="auto";const r=n.getAttribute("poster");if(r){const c=new Image;c.src=r,t.push(fe(c))}else t.push(Le(n));return n}function Oe(e){const t=e.cloneNode();switch(e.type){case"checkbox":case"radio":t.checked=e.checked;break;default:t.value=e.value;break}return t}function We(e){const t=e.cloneNode();return t.value=e.value,t}function He(e){const t=e.cloneNode();return t.selected=e.selected,t}const he=new Map([["canvas",Ve],["img",$e],["video",Fe],["input",Oe],["select",We],["option",He]]);function Be(e){return e.cloneNode()}function Ge(e,t=[]){const n=e.nodeName.toLowerCase();return(he.has(n)?he.get(n):Be)(e,t)}function Xe(e){var t;if(e.nodeName.toLowerCase()==="slot"){const n=e.assignedNodes();return n.length>0?n:Array.from(e.childNodes)}else return Array.from(((t=e.shadowRoot)!=null?t:e).childNodes)}function Ye(e){return B(this,null,function*(){const t=new Map,n=[];let r;Q(e)?r=ce(e):de(e)?r=pe(e):r=e.cloneNode(),t.set(e,r);const c=[e];for(;c.length;){const v=c.shift(),b=Xe(v);if(b.length<=0)continue;const h=t.get(v),f=Q(h)?h.shadowRoot:h;for(let u=0;u<b.length;u++){const s=b[u];let p;Q(s)?p=ce(s):de(s)?p=pe(s):p=Ge(s,n),t.set(s,p),c.push(s),f.appendChild(p)}}return yield Promise.all(n),r})}const qe={copyStyles:!0,pageStyle:`
        @page {
            /* Remove browser default header (title) and footer (url) */
            margin: 0;
        }
        @media print {
            body {
                /* Tell browsers to print background colors */
                -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
                color-adjust: exact; /* Firefox */
            }
        }
    `,removeAfterPrint:!1,suppressErrors:!1};function ze(e){e=le(le({},qe),e);let t=0,n=[],r=[];const c=s=>{const{onAfterPrint:p,onPrintError:a,print:i,documentTitle:o}=e;setTimeout(()=>{var m,g;if(s.contentWindow)if(s.contentWindow.focus(),i)i(s).then(()=>p==null?void 0:p()).then(()=>f()).catch(d=>{a?a("print",d):u(["An error was thrown by the specified `print` function"])});else{if(s.contentWindow.print){const d=(g=(m=s.contentDocument)==null?void 0:m.title)!=null?g:"",D=s.ownerDocument.title;o&&(s.ownerDocument.title=o,s.contentDocument&&(s.contentDocument.title=o)),s.contentWindow.print(),o&&(s.ownerDocument.title=D,s.contentDocument&&(s.contentDocument.title=d))}else u(["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."]);p==null||p(),f()}else u(["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `vue-to-print`. Please file an issue: https://github.com/gregnb/react-to-print/issues/"])},500)},v=s=>{const{onBeforePrint:p,onPrintError:a}=e;if(p){const i=p();i&&typeof i.then=="function"?i.then(()=>{c(s)}).catch(o=>{a&&a("onBeforePrint",o)}):c(s)}else c(s)},b=()=>{const{onBeforeGetContent:s,onPrintError:p}=e;if(s){const a=s();a&&typeof a.then=="function"?a.then(h).catch(i=>{p&&p("onBeforeGetContent",i)}):h()}else h()},h=()=>B(this,null,function*(){const{bodyClass:s,content:p,copyStyles:a,fonts:i,pageStyle:o,nonce:m}=e,g=p();if(g===void 0){u(["To print a functional component ensure it is wrapped with `React.forwardRef`, and ensure the forwarded ref is used. See the README for an example: https://github.com/gregnb/react-to-print#examples"]);return}if(g===null){u(['There is nothing to print because the "content" prop returned "null". Please ensure "content" is renderable before allowing "vue-to-print" to be called.']);return}const d=document.createElement("iframe");d.width=`${document.documentElement.clientWidth}px`,d.height=`${document.documentElement.clientHeight}px`,d.style.position="absolute",d.style.top=`-${document.documentElement.clientHeight+100}px`,d.style.left=`-${document.documentElement.clientWidth+100}px`,d.id="printWindow",d.srcdoc="<!DOCTYPE html>";const D=g;if(!D){u(['"vue-to-print" could not locate the DOM node corresponding with the `content` prop']);return}const M=yield Ye(D),j=document.querySelectorAll("link[rel~='stylesheet']"),C=i?i.length:0;t=j.length+C,n=[],r=[];const x=(_,N)=>{if(n.includes(_)){u(["Tried to mark a resource that has already been handled",_],"debug");return}N?(u(['"vue-to-print" was unable to load a resource but will continue attempting to print the page',...N]),r.push(_)):n.push(_),n.length+r.length===t&&v(d)};d.onload=()=>B(this,null,function*(){var _,N;d.onload=null;const y=d.contentDocument||((_=d.contentWindow)==null?void 0:_.document);if(y){y.body.appendChild(M),i&&((N=d.contentDocument)!=null&&N.fonts&&typeof FontFace<"u"?i.forEach(w=>{const k=new FontFace(w.family,w.source,{weight:w.weight,style:w.style});d.contentDocument.fonts.add(k),k.loaded.then(()=>{x(k)}).catch(z=>{x(k,["Failed loading the font:",k,"Load error:",z])})}):(i.forEach(w=>x(w)),u(['"vue-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'])));const q=typeof o=="function"?o():o;if(typeof q!="string")u([`"vue-to-print" expected a "string" from \`pageStyle\` but received "${typeof q}". Styles from \`pageStyle\` will not be applied.`]);else{const w=y.createElement("style");m&&(w.setAttribute("nonce",m),y.head.setAttribute("nonce",m)),w.appendChild(y.createTextNode(q)),y.head.appendChild(w)}if(s&&y.body.classList.add(...s.split(" ")),a){const w=document.querySelectorAll("style, link[rel~='stylesheet']");for(let k=0,z=w.length;k<z;++k){const E=w[k];if(E.tagName.toLowerCase()==="style"){const T=y.createElement(E.tagName),P=E.sheet;if(P){let O="";try{const L=P.cssRules.length;for(let W=0;W<L;++W)typeof P.cssRules[W].cssText=="string"&&(O+=`${P.cssRules[W].cssText}\r
`)}catch{u(["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/gregnb/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",E],"warning")}T.setAttribute("id",`vue-to-print-${k}`),m&&T.setAttribute("nonce",m),T.appendChild(y.createTextNode(O)),y.head.appendChild(T)}}else if(E.getAttribute("href"))if(E.hasAttribute("disabled"))u(["`vue-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",E],"warning"),x(E);else{const T=y.createElement(E.tagName);for(let P=0,O=E.attributes.length;P<O;++P){const L=E.attributes[P];L&&T.setAttribute(L.nodeName,L.nodeValue||"")}T.onload=()=>x(T),T.onerror=(P,O,L,W,ve)=>x(T,["Failed to load",T,"Error:",ve]),m&&T.setAttribute("nonce",m),y.head.appendChild(T)}else u(["`vue-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",E],"warning"),x(E)}}}Re(d),(t===0||!a)&&v(d)}),f(!0),document.body.appendChild(d)}),f=s=>{const{removeAfterPrint:p}=e;if(s||p){const a=document.getElementById("printWindow");a&&document.body.removeChild(a)}},u=(s,p="error")=>{const{suppressErrors:a}=e;a||(p==="error"?console.error(s):p==="warning"?console.warn(s):p==="debug"&&console.debug(s))};return{handlePrint:b}}const Ze={},Je={class:"primary"};function Qe(e,t){return A(),I("button",Je,[te(e.$slots,"default",{},void 0,!0)])}const me=ee(Ze,[["render",Qe],["__scopeId","data-v-2cbe80aa"]]),Ke=["data-active"],et={__name:"DropZone",emits:["files-dropped"],setup(e,{emit:t}){const n=t;let r=U(!1),c=null;function v(){r.value=!0,clearTimeout(c)}function b(){c=setTimeout(()=>{r.value=!1},50)}function h(s){b(),n("files-dropped",[...s.dataTransfer.files])}function f(s){s.preventDefault()}const u=["dragenter","dragover","dragleave","drop"];return ge(()=>{u.forEach(s=>{document.body.addEventListener(s,f)})}),be(()=>{u.forEach(s=>{document.body.removeEventListener(s,f)})}),(s,p)=>(A(),I("div",{"data-active":K(r),onDragenter:G(v,["prevent"]),onDragover:G(v,["prevent"]),onDragleave:G(b,["prevent"]),onDrop:G(h,["prevent"])},[te(s.$slots,"default",{dropZoneActive:K(r)})],40,Ke))}},tt={class:"input-slider",for:"input"},nt={class:"title"},ot=["min","max","step"],st={__name:"InputSlider",props:ye(["min","max","step","unit"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=_e(e,"modelValue");return(n,r)=>(A(),I("label",tt,[l("div",nt,[te(n.$slots,"default",{},void 0,!0)]),l("div",{class:"indicator",style:we({"--normalised-position":(t.value-Number(e.min))/(Number(e.max)-Number(e.min))})},S(t.value+(e.unit?` ${e.unit}`:"")),5),Y(l("input",{type:"range",name:"",id:"input","onUpdate:modelValue":r[0]||(r[0]=c=>t.value=c),min:e.min,max:e.max,step:e.step},null,8,ot),[[Ee,t.value]])]))}},X=ee(st,[["__scopeId","data-v-c64d0570"]]),R=e=>(Se("data-v-59e2f68b"),e=e(),De(),e),rt={class:"container dark"},it={id:"upload"},lt=R(()=>l("h2",null,"Bestand uploaden",-1)),at={key:0},ct=R(()=>l("div",null,"Laat los om te uploaden",-1)),dt=R(()=>l("div",{class:"small"},"CSV-bestand",-1)),ut=[ct,dt],pt={key:1},ht=R(()=>l("div",null,"Sleep een bestand hierheen",-1)),mt=R(()=>l("div",{class:"small"},"CSV-bestand",-1)),ft=[ht,mt],vt={id:"edit"},gt=R(()=>l("h2",null,"Tijdenlijstje bewerken",-1)),bt={style:{display:"grid","grid-template-columns":"auto 1fr",gap:"32px"}},yt={spellcheck:"false"},_t=R(()=>l("colgroup",null,null,-1)),wt={nowrap:"",contenteditable:""},Et={nowrap:"",contenteditable:"",width:"1px"},Tt={nowrap:"",contenteditable:"",width:"20%"},St={nowrap:"",contenteditable:"",width:"15%"},Dt={key:0,class:"double-usherout"},xt={key:1,class:"long-gap"},At={key:2,class:"plf-overlap"},It={class:"near-plf"},Ct={nowrap:"",contenteditable:""},Nt={style:{float:"right"}},kt=R(()=>l("div",{class:"custom-content",contenteditable:""},null,-1)),Mt={id:"parameters"},jt={class:"small"},Pt={class:"small"},Rt={class:"small"},Ut={class:"small"},Lt={id:"print"},Vt=R(()=>l("h2",null,"Tijdenlijstje afdrukken",-1)),$t={__name:"TimetableTransformerView",setup(e){const t=U(16),n=U(16),r=U(10),c=U(35),v=U(null),b=U(null),h=U([]),f=Te(()=>{let a=h.value.map((i,o)=>{var M,j,C,x,_;let m=(C=(j=(M=i.PLAYLIST)==null?void 0:M.match(/(\s((4DX)|(ATMOS)|(3D)|(\([A-Z]+\))))+/))==null?void 0:j[0])==null?void 0:C.slice(1),g=(x=i.PLAYLIST)==null?void 0:x.replace(m,""),d=h.value.filter(N=>{var y;return(y=N.AUDITORIUM)==null?void 0:y.includes("4DX")}).some(N=>s(N.SCHEDULED_TIME,i.CREDITS_TIME)>=t.value*-6e4&&s(N.SCHEDULED_TIME,i.CREDITS_TIME)<=n.value*6e4),D=s(i.CREDITS_TIME,(_=h.value.at(o+1))==null?void 0:_.CREDITS_TIME);return{...i,title:g,extra:m,overlapWithPlf:d,timeToNextUsherout:D}});return a.filter(i=>{var o;return(o=i.AUDITORIUM)==null?void 0:o.includes("4DX")}).slice(1).forEach(i=>{let o;for(let m=0;m<a.length;m++){const g=a[m];if(s(i.SCHEDULED_TIME,g.CREDITS_TIME)>0){o=m-1;break}}a.at(o).isNearPlf=!0}),a||[]});async function u(a){var D;if(((D=a==null?void 0:a[0])==null?void 0:D.type)!=="text/csv")return;const o=(await a[0].text()).split(`
`);let m=[];const g=o[0].split(",");for(var d=0;d<o.length;d++){const M=o[d].split(",");let j={};for(let C=0;C<M.length;C++)j[g[C].trim()]=M[C].trim();m.push(j)}console.log(m),h.value=m}function s(a,i){function o(M){const[j,C,x]=M.split(":").map(Number),_=new Date;return new Date(_.getFullYear(),_.getMonth(),_.getDate(),j,C,x)}if(!a||!i)return;const m=o(a),g=o(i),d=g-m;g.setDate(g.getDate()+1);const D=g-m;return Math.abs(d)<Math.abs(D)?d:D}const{handlePrint:p}=ze({content:()=>b.value,documentTitle:"Tijdenlijstje"});return(a,i)=>(A(),I("div",rt,[l("section",it,[lt,V(et,{id:"drop-zone",onFilesDropped:u,onClick:i[0]||(i[0]=o=>v.value.click()),style:{cursor:"pointer"}},{default:$(({dropZoneActive:o})=>[o?(A(),I("div",at,ut)):(A(),I("div",pt,ft)),V(me,{"data-active":o},{default:$(()=>[F("Bladeren...")]),_:2},1032,["data-active"])]),_:1}),l("input",{type:"file",ref_key:"fileInput",ref:v,accept:"text/csv",style:{display:"none"},onChange:i[1]||(i[1]=o=>u(o.target.files))},null,544)]),Y(l("section",vt,[gt,l("div",bt,[l("div",{id:"printComponent",ref_key:"printComponent",ref:b},[l("table",yt,[_t,l("thead",null,[(A(),I(ne,null,oe(["Zaal","Inloop","Aftiteling","Titel","Lftd."],o=>l("td",wt,S(o),1)),64))]),(A(!0),I(ne,null,oe(f.value,(o,m)=>{var g;return Y((A(),I("tr",{class:se({italic:(g=o.AUDITORIUM)==null?void 0:g.includes("4DX"),bold:o.FEATURE_RATING==="16"||o.FEATURE_RATING==="18"})},[l("td",Et,S(o.AUDITORIUM.replace(/^\w+\s/,"")),1),l("td",Tt,S(o.SCHEDULED_TIME.replace(/(:00)$/,"")),1),l("td",St,[o.timeToNextUsherout<=r.value*6e4?(A(),I("div",Dt)):J("",!0),o.timeToNextUsherout>=c.value*6e4?(A(),I("div",xt)):J("",!0),o.overlapWithPlf?(A(),I("div",At)):J("",!0),l("div",It,S(o.isNearPlf?"4DX":" "),1),F(" "+S(o.CREDITS_TIME),1)]),l("td",Ct,[l("span",null,S(o.title),1),l("span",Nt,S(o.extra),1)]),l("td",{nowrap:"",contenteditable:"",width:"1px",style:{"text-align":"end"},class:se({translucent:o.FEATURE_RATING!=="16"&&o.FEATURE_RATING!=="18"})},S(o.FEATURE_RATING),3)],2)),[[Z,m!=0]])}),256))]),kt],512),l("div",Mt,[V(X,{modelValue:t.value,"onUpdate:modelValue":i[2]||(i[2]=o=>t.value=o),min:"0",max:"30",unit:"min"},{default:$(()=>[F("Tijd vóór inloop 4DX "),l("div",jt,"Uitlopen vanaf "+S(t.value)+" minuten voor een 4DX-inloop krijgen een stippellijntje",1)]),_:1},8,["modelValue"]),V(X,{modelValue:n.value,"onUpdate:modelValue":i[3]||(i[3]=o=>n.value=o),min:"0",max:"30",unit:"min"},{default:$(()=>[F("Tijd na inloop 4DX "),l("div",Pt,"Uitlopen tot "+S(n.value)+" minuten na een 4DX-inloop krijgen een stippellijntje",1)]),_:1},8,["modelValue"]),V(X,{modelValue:r.value,"onUpdate:modelValue":i[4]||(i[4]=o=>r.value=o),min:"0",max:"30",unit:"min"},{default:$(()=>[F("Interval voor dubbele uitloop "),l("div",Rt,"Uitlopen met minder dan "+S(r.value)+" minuten ertussen krijgen een boogje",1)]),_:1},8,["modelValue"]),V(X,{modelValue:c.value,"onUpdate:modelValue":i[5]||(i[5]=o=>c.value=o),min:"20",max:"80",unit:"min"},{default:$(()=>[F("Interval voor gat tussen uitlopen "),l("div",Ut,"Gaten van meer dan "+S(c.value)+" minuten worden aangegeven met een stippellijntje",1)]),_:1},8,["modelValue"])])])],512),[[Z,h.value.length>0]]),Y(l("section",Lt,[Vt,V(me,{onClick:K(p)},{default:$(()=>[F("Afdrukken")]),_:1},8,["onClick"])],512),[[Z,h.value.length>0]])]))}},Ot=ee($t,[["__scopeId","data-v-59e2f68b"]]);export{Ot as default};
