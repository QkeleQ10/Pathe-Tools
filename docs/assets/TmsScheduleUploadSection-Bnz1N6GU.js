import{u as D,B as oe,v as R,r as O,H as se,D as U,I as re,J as ae,K as ie,L as ue,_ as P,y as q,z as G,o as w,c as E,d as g,a as K,i as X,A as le,t as Y,f as ce,j as de,M as pe,N as fe,e as z,w as B,l as me,h as _e,q as he,s as ve}from"./index-DE6IS-2d.js";import{_ as ye}from"./super-vue3-tabs-Bz_lzlWN.js";function ge(e){return re()?(ae(e),!0):!1}function $(e){return typeof e=="function"?e():D(e)}const Z=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Se=Object.prototype.toString,be=e=>Se.call(e)==="[object Object]",V=()=>{},we=Ee();function Ee(){var e,t;return Z&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Te(e,t){function o(...n){return new Promise((i,u)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(i).catch(u)})}return o}const Q=e=>e();function Ae(e=Q){const t=O(!0);function o(){t.value=!1}function n(){t.value=!0}const i=(...u)=>{t.value&&e(...u)};return{isActive:se(t),pause:o,resume:n,eventFilter:i}}function De(e){return ie()}function Ie(e,t,o={}){const{eventFilter:n=Q,...i}=o;return U(e,Te(n,t),i)}function Me(e,t,o={}){const{eventFilter:n,...i}=o,{eventFilter:u,pause:p,resume:c,isActive:h}=Ae(n);return{stop:Ie(e,t,{...i,eventFilter:u}),pause:p,resume:c,isActive:h}}function Oe(e,t=!0,o){De()?oe(e,o):t?e():R(e)}function I(e){var t;const o=$(e);return(t=o==null?void 0:o.$el)!=null?t:o}const k=Z?window:void 0;function M(...e){let t,o,n,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,n,i]=e,t=k):[t,o,n,i]=e,!t)return V;Array.isArray(o)||(o=[o]),Array.isArray(n)||(n=[n]);const u=[],p=()=>{u.forEach(_=>_()),u.length=0},c=(_,d,r,s)=>(_.addEventListener(d,r,s),()=>_.removeEventListener(d,r,s)),h=U(()=>[I(t),$(i)],([_,d])=>{if(p(),!_)return;const r=be(d)?{...d}:d;u.push(...o.flatMap(s=>n.map(l=>c(_,s,l,r))))},{immediate:!0,flush:"post"}),v=()=>{h(),p()};return ge(v),v}let H=!1;function et(e,t,o={}){const{window:n=k,ignore:i=[],capture:u=!0,detectIframe:p=!1}=o;if(!n)return V;we&&!H&&(H=!0,Array.from(n.document.body.children).forEach(r=>r.addEventListener("click",V)),n.document.documentElement.addEventListener("click",V));let c=!0;const h=r=>i.some(s=>{if(typeof s=="string")return Array.from(n.document.querySelectorAll(s)).some(l=>l===r.target||r.composedPath().includes(l));{const l=I(s);return l&&(r.target===l||r.composedPath().includes(l))}}),_=[M(n,"click",r=>{const s=I(e);if(!(!s||s===r.target||r.composedPath().includes(s))){if(r.detail===0&&(c=!h(r)),!c){c=!0;return}t(r)}},{passive:!0,capture:u}),M(n,"pointerdown",r=>{const s=I(e);c=!h(r)&&!!(s&&!r.composedPath().includes(s))},{passive:!0}),p&&M(n,"blur",r=>{setTimeout(()=>{var s;const l=I(e);((s=n.document.activeElement)==null?void 0:s.tagName)==="IFRAME"&&!(l!=null&&l.contains(n.document.activeElement))&&t(r)},0)})].filter(Boolean);return()=>_.forEach(r=>r())}const C=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},F="__vueuse_ssr_handlers__",xe=Ne();function Ne(){return F in C||(C[F]=C[F]||{}),C[F]}function Ce(e,t){return xe[e]||t}function Fe(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Ve={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},J="vueuse-storage";function tt(e,t,o,n={}){var i;const{flush:u="pre",deep:p=!0,listenToStorageChanges:c=!0,writeDefaults:h=!0,mergeDefaults:v=!1,shallow:_,window:d=k,eventFilter:r,onError:s=a=>{console.error(a)},initOnMounted:l}=n,f=(_?ue:O)(typeof t=="function"?t():t);if(!o)try{o=Ce("getDefaultStorage",()=>{var a;return(a=k)==null?void 0:a.localStorage})()}catch(a){s(a)}if(!o)return f;const y=$(t),T=Fe(y),S=(i=n.serializer)!=null?i:Ve[T],{pause:x,resume:j}=Me(f,()=>ee(f.value),{flush:u,deep:p,eventFilter:r});d&&c&&Oe(()=>{M(d,"storage",N),M(d,J,ne),l&&N()}),l||N();function W(a,m){d&&d.dispatchEvent(new CustomEvent(J,{detail:{key:e,oldValue:a,newValue:m,storageArea:o}}))}function ee(a){try{const m=o.getItem(e);if(a==null)W(m,null),o.removeItem(e);else{const b=S.write(a);m!==b&&(o.setItem(e,b),W(m,b))}}catch(m){s(m)}}function te(a){const m=a?a.newValue:o.getItem(e);if(m==null)return h&&y!=null&&o.setItem(e,S.write(y)),y;if(!a&&v){const b=S.read(m);return typeof v=="function"?v(b,y):T==="object"&&!Array.isArray(b)?{...y,...b}:b}else return typeof m!="string"?m:S.read(m)}function N(a){if(!(a&&a.storageArea!==o)){if(a&&a.key==null){f.value=y;return}if(!(a&&a.key!==e)){x();try{(a==null?void 0:a.newValue)!==S.write(f.value)&&(f.value=te(a))}catch(m){s(m)}finally{a?R(j):j()}}}}function ne(a){N(a.detail)}return f}const ke=["for"],Pe={class:"title"},$e=["id"],je={key:0,class:"unit"},We={__name:"InputNumber",props:q(["unit","identifier"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=G(e,"modelValue");return(o,n)=>(w(),E("label",{class:"input",for:e.identifier},[g("div",Pe,[K(o.$slots,"default",{},void 0,!0)]),g("div",{class:de(["input",{"has-unit":!!e.unit}])},[X(g("input",{type:"number",inputmode:"numeric",pattern:"[0-9]+",name:"",id:e.identifier,"onUpdate:modelValue":n[0]||(n[0]=i=>t.value=i)},null,8,$e),[[le,t.value,void 0,{number:!0}]]),e.unit?(w(),E("span",je,Y(e.unit),1)):ce("",!0)],2)],8,ke))}},nt=P(We,[["__scopeId","data-v-71ed32be"]]),ze=["for"],Be={class:"title"},He=["id"],Je={__name:"InputCheckbox",props:q(["identifier"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=G(e,"modelValue");return(o,n)=>(w(),E("label",{class:"input",for:e.identifier},[g("div",Be,[K(o.$slots,"default",{},void 0,!0)]),X(g("input",{type:"checkbox",name:"",id:e.identifier,"onUpdate:modelValue":n[0]||(n[0]=i=>t.value=i)},null,8,He),[[pe,t.value]])],8,ze))}},ot=P(Je,[["__scopeId","data-v-53312ab6"]]),Re=fe("tmsSchedule",()=>{const e=O([]),t=O({});async function o(n){var v,_,d,r;if(!(((v=n==null?void 0:n[0])==null?void 0:v.type)==="text/csv"||((_=n==null?void 0:n[0])==null?void 0:_.type)==="application/vnd.ms-excel"||(r=(d=n==null?void 0:n[0])==null?void 0:d.name)!=null&&r.endsWith(".csv")))return;const u=(await n[0].text()).split(`
`);let p=[];const c=u[0].split(",");for(var h=0;h<u.length;h++){const s=u[h].split(",");let l={};for(let f=0;f<s.length;f++)l[c[f].trim()]=s[f].trim();p.push(l)}p=p.map((s,l)=>{var f,y,T,S,x;return l===0||(s.extra=(T=(y=(f=s.PLAYLIST)==null?void 0:f.match(/(\s((4DX)|(ATMOS)|(IMX)|(3D)|(Music)|(ROOFTOP)|(PrideNight)|(Ladies)|(Premiere)|(\([A-Z]+\))))+/))==null?void 0:y[0])==null?void 0:T.slice(1),s.extras=(S=s.extra)==null?void 0:S.split(" "),s.title=(x=s.PLAYLIST)==null?void 0:x.replace(s.extra,""),s.scheduledTime=A(s.SCHEDULED_TIME),s.showTime=A(s.SHOW_TIME),s.featureTime=A(s.FEATURE_TIME),s.creditsTime=A(s.CREDITS_TIME),s.endTime=A(s.END_TIME)),s}),e.value=p,t.value={name:n[0].name,type:n[0].type,lastModified:n[0].lastModified,size:n[0].size}}return{table:e,metadata:t,addFiles:o}});function A(e){let t=new Date;t.getHours()<6&&t.setDate(t.getDate()-1);let o=new Date(t.toDateString()+" "+e);return o.getHours()<6&&o.setDate(o.getDate()+1),o}const L=e=>(he("data-v-2e892687"),e=e(),ve(),e),Ue={id:"upload"},qe=L(()=>g("h2",null,"Bestand uploaden",-1)),Ge={key:0},Ke={key:1},Xe={key:2},Ye=L(()=>g("div",{class:"small"},"CSV-bestand uit RosettaBridge (met optie 'times only')",-1)),Ze={__name:"TmsScheduleUploadSection",setup(e){const t=Re(),o=O(null);return(n,i)=>{const u=_e,p=ye;return w(),E("section",Ue,[qe,z(p,{id:"drop-zone",onFilesDropped:D(t).addFiles,onClick:i[0]||(i[0]=c=>o.value.click()),style:{cursor:"pointer"}},{default:B(({dropZoneActive:c})=>[g("div",null,[c?(w(),E("div",Ge,"Laat los om te uploaden")):D(t).metadata.name?(w(),E("div",Ke,Y(D(t).metadata.name),1)):(w(),E("div",Xe,"Sleep een bestand hierheen")),Ye]),z(u,{"data-active":c},{default:B(()=>[me("Bladeren...")]),_:2},1032,["data-active"])]),_:1},8,["onFilesDropped"]),g("input",{type:"file",ref_key:"fileInput",ref:o,accept:"text/csv,.csv",style:{display:"none"},onChange:i[1]||(i[1]=c=>D(t).addFiles(c.target.files))},null,544)])}}},st=P(Ze,[["__scopeId","data-v-2e892687"]]);export{st as _,Re as a,ot as b,nt as c,et as o,tt as u};
