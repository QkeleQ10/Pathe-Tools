import{d as zt,u as Qt,S as Jt,_ as Zt,a as te,b as ee}from"./DropZone-C6y5QN_Y.js";import{_ as ne}from"./Chip-DXAiJ13r.js";import{H as ae,r as vt,_ as Rt,o as R,c as U,d as A,e as J,w as q,u as H,g as S,l as B,s as ie,b as nt,j as It,p as Ft,f as ft,F as St,h as Ot,z as re,n as se,m as ue}from"./index-Bhte5luT.js";import{g as oe}from"./_commonjsHelpers-C4iS2aBk.js";var Pt={};const le={},ce=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"})),wt=oe(ce);(function(a){(function(e){e.parser=function(n,t){return new l(n,t)},e.SAXParser=l,e.SAXStream=Y,e.createStream=z,e.MAX_BUFFER_LENGTH=64*1024;var s=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function l(n,t){if(!(this instanceof l))return new l(n,t);var o=this;m(o),o.q=o.c="",o.bufferCheckPosition=e.MAX_BUFFER_LENGTH,o.opt=t||{},o.opt.lowercase=o.opt.lowercase||o.opt.lowercasetags,o.looseCase=o.opt.lowercase?"toLowerCase":"toUpperCase",o.tags=[],o.closed=o.closedRoot=o.sawRoot=!1,o.tag=o.error=null,o.strict=!!n,o.noscript=!!(n||o.opt.noscript),o.state=r.BEGIN,o.strictEntities=o.opt.strictEntities,o.ENTITIES=o.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),o.attribList=[],o.opt.xmlns&&(o.ns=Object.create(d)),o.opt.unquotedAttributeValues===void 0&&(o.opt.unquotedAttributeValues=!n),o.trackPosition=o.opt.position!==!1,o.trackPosition&&(o.position=o.line=o.column=0),at(o,"onready")}Object.create||(Object.create=function(n){function t(){}t.prototype=n;var o=new t;return o}),Object.keys||(Object.keys=function(n){var t=[];for(var o in n)n.hasOwnProperty(o)&&t.push(o);return t});function f(n){for(var t=Math.max(e.MAX_BUFFER_LENGTH,10),o=0,i=0,p=s.length;i<p;i++){var w=n[s[i]].length;if(w>t)switch(s[i]){case"textNode":M(n);break;case"cdata":y(n,"oncdata",n.cdata),n.cdata="";break;case"script":y(n,"onscript",n.script),n.script="";break;default:b(n,"Max buffer length exceeded: "+s[i])}o=Math.max(o,w)}var K=e.MAX_BUFFER_LENGTH-o;n.bufferCheckPosition=K+n.position}function m(n){for(var t=0,o=s.length;t<o;t++)n[s[t]]=""}function T(n){M(n),n.cdata!==""&&(y(n,"oncdata",n.cdata),n.cdata=""),n.script!==""&&(y(n,"onscript",n.script),n.script="")}l.prototype={end:function(){F(this)},write:Nt,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){T(this)}};var g;try{g=wt.Stream}catch{g=function(){}}g||(g=function(){});var O=e.EVENTS.filter(function(n){return n!=="error"&&n!=="end"});function z(n,t){return new Y(n,t)}function Y(n,t){if(!(this instanceof Y))return new Y(n,t);g.apply(this),this._parser=new l(n,t),this.writable=!0,this.readable=!0;var o=this;this._parser.onend=function(){o.emit("end")},this._parser.onerror=function(i){o.emit("error",i),o._parser.error=null},this._decoder=null,O.forEach(function(i){Object.defineProperty(o,"on"+i,{get:function(){return o._parser["on"+i]},set:function(p){if(!p)return o.removeAllListeners(i),o._parser["on"+i]=p,p;o.on(i,p)},enumerable:!0,configurable:!1})})}Y.prototype=Object.create(g.prototype,{constructor:{value:Y}}),Y.prototype.write=function(n){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(n)){if(!this._decoder){var t=wt.StringDecoder;this._decoder=new t("utf8")}n=this._decoder.write(n)}return this._parser.write(n.toString()),this.emit("data",n),!0},Y.prototype.end=function(n){return n&&n.length&&this.write(n),this._parser.end(),!0},Y.prototype.on=function(n,t){var o=this;return!o._parser["on"+n]&&O.indexOf(n)!==-1&&(o._parser["on"+n]=function(){var i=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);i.splice(0,0,n),o.emit.apply(o,i)}),g.prototype.on.call(o,n,t)};var it="[CDATA[",Q="DOCTYPE",W="http://www.w3.org/XML/1998/namespace",rt="http://www.w3.org/2000/xmlns/",d={xml:W,xmlns:rt},c=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,h=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,D=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,L=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function x(n){return n===" "||n===`
`||n==="\r"||n==="	"}function V(n){return n==='"'||n==="'"}function st(n){return n===">"||x(n)}function G(n,t){return n.test(t)}function C(n,t){return!G(n,t)}var r=0;e.STATE={BEGIN:r++,BEGIN_WHITESPACE:r++,TEXT:r++,TEXT_ENTITY:r++,OPEN_WAKA:r++,SGML_DECL:r++,SGML_DECL_QUOTED:r++,DOCTYPE:r++,DOCTYPE_QUOTED:r++,DOCTYPE_DTD:r++,DOCTYPE_DTD_QUOTED:r++,COMMENT_STARTING:r++,COMMENT:r++,COMMENT_ENDING:r++,COMMENT_ENDED:r++,CDATA:r++,CDATA_ENDING:r++,CDATA_ENDING_2:r++,PROC_INST:r++,PROC_INST_BODY:r++,PROC_INST_ENDING:r++,OPEN_TAG:r++,OPEN_TAG_SLASH:r++,ATTRIB:r++,ATTRIB_NAME:r++,ATTRIB_NAME_SAW_WHITE:r++,ATTRIB_VALUE:r++,ATTRIB_VALUE_QUOTED:r++,ATTRIB_VALUE_CLOSED:r++,ATTRIB_VALUE_UNQUOTED:r++,ATTRIB_VALUE_ENTITY_Q:r++,ATTRIB_VALUE_ENTITY_U:r++,CLOSE_TAG:r++,CLOSE_TAG_SAW_WHITE:r++,SCRIPT:r++,SCRIPT_ENDING:r++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(n){var t=e.ENTITIES[n],o=typeof t=="number"?String.fromCharCode(t):t;e.ENTITIES[n]=o});for(var dt in e.STATE)e.STATE[e.STATE[dt]]=dt;r=e.STATE;function at(n,t,o){n[t]&&n[t](o)}function y(n,t,o){n.textNode&&M(n),at(n,t,o)}function M(n){n.textNode=I(n.opt,n.textNode),n.textNode&&at(n,"ontext",n.textNode),n.textNode=""}function I(n,t){return n.trim&&(t=t.trim()),n.normalize&&(t=t.replace(/\s+/g," ")),t}function b(n,t){return M(n),n.trackPosition&&(t+=`
Line: `+n.line+`
Column: `+n.column+`
Char: `+n.c),t=new Error(t),n.error=t,at(n,"onerror",t),n}function F(n){return n.sawRoot&&!n.closedRoot&&v(n,"Unclosed root tag"),n.state!==r.BEGIN&&n.state!==r.BEGIN_WHITESPACE&&n.state!==r.TEXT&&b(n,"Unexpected end"),M(n),n.c="",n.closed=!0,at(n,"onend"),l.call(n,n.strict,n.opt),n}function v(n,t){if(typeof n!="object"||!(n instanceof l))throw new Error("bad call to strictFail");n.strict&&b(n,t)}function yt(n){n.strict||(n.tagName=n.tagName[n.looseCase]());var t=n.tags[n.tags.length-1]||n,o=n.tag={name:n.tagName,attributes:{}};n.opt.xmlns&&(o.ns=t.ns),n.attribList.length=0,y(n,"onopentagstart",o)}function ut(n,t){var o=n.indexOf(":"),i=o<0?["",n]:n.split(":"),p=i[0],w=i[1];return t&&n==="xmlns"&&(p="xmlns",w=""),{prefix:p,local:w}}function ot(n){if(n.strict||(n.attribName=n.attribName[n.looseCase]()),n.attribList.indexOf(n.attribName)!==-1||n.tag.attributes.hasOwnProperty(n.attribName)){n.attribName=n.attribValue="";return}if(n.opt.xmlns){var t=ut(n.attribName,!0),o=t.prefix,i=t.local;if(o==="xmlns")if(i==="xml"&&n.attribValue!==W)v(n,"xml: prefix must be bound to "+W+`
Actual: `+n.attribValue);else if(i==="xmlns"&&n.attribValue!==rt)v(n,"xmlns: prefix must be bound to "+rt+`
Actual: `+n.attribValue);else{var p=n.tag,w=n.tags[n.tags.length-1]||n;p.ns===w.ns&&(p.ns=Object.create(w.ns)),p.ns[i]=n.attribValue}n.attribList.push([n.attribName,n.attribValue])}else n.tag.attributes[n.attribName]=n.attribValue,y(n,"onattribute",{name:n.attribName,value:n.attribValue});n.attribName=n.attribValue=""}function Z(n,t){if(n.opt.xmlns){var o=n.tag,i=ut(n.tagName);o.prefix=i.prefix,o.local=i.local,o.uri=o.ns[i.prefix]||"",o.prefix&&!o.uri&&(v(n,"Unbound namespace prefix: "+JSON.stringify(n.tagName)),o.uri=i.prefix);var p=n.tags[n.tags.length-1]||n;o.ns&&p.ns!==o.ns&&Object.keys(o.ns).forEach(function(Ct){y(n,"onopennamespace",{prefix:Ct,uri:o.ns[Ct]})});for(var w=0,K=n.attribList.length;w<K;w++){var X=n.attribList[w],$=X[0],ct=X[1],P=ut($,!0),et=P.prefix,Wt=P.local,Dt=et===""?"":o.ns[et]||"",At={name:$,value:ct,prefix:et,local:Wt,uri:Dt};et&&et!=="xmlns"&&!Dt&&(v(n,"Unbound namespace prefix: "+JSON.stringify(et)),At.uri=et),n.tag.attributes[$]=At,y(n,"onattribute",At)}n.attribList.length=0}n.tag.isSelfClosing=!!t,n.sawRoot=!0,n.tags.push(n.tag),y(n,"onopentag",n.tag),t||(!n.noscript&&n.tagName.toLowerCase()==="script"?n.state=r.SCRIPT:n.state=r.TEXT,n.tag=null,n.tagName=""),n.attribName=n.attribValue="",n.attribList.length=0}function lt(n){if(!n.tagName){v(n,"Weird empty close tag."),n.textNode+="</>",n.state=r.TEXT;return}if(n.script){if(n.tagName!=="script"){n.script+="</"+n.tagName+">",n.tagName="",n.state=r.SCRIPT;return}y(n,"onscript",n.script),n.script=""}var t=n.tags.length,o=n.tagName;n.strict||(o=o[n.looseCase]());for(var i=o;t--;){var p=n.tags[t];if(p.name!==i)v(n,"Unexpected close tag");else break}if(t<0){v(n,"Unmatched closing tag: "+n.tagName),n.textNode+="</"+n.tagName+">",n.state=r.TEXT;return}n.tagName=o;for(var w=n.tags.length;w-- >t;){var K=n.tag=n.tags.pop();n.tagName=n.tag.name,y(n,"onclosetag",n.tagName);var X={};for(var $ in K.ns)X[$]=K.ns[$];var ct=n.tags[n.tags.length-1]||n;n.opt.xmlns&&K.ns!==ct.ns&&Object.keys(K.ns).forEach(function(P){var et=K.ns[P];y(n,"onclosenamespace",{prefix:P,uri:et})})}t===0&&(n.closedRoot=!0),n.tagName=n.attribValue=n.attribName="",n.attribList.length=0,n.state=r.TEXT}function _t(n){var t=n.entity,o=t.toLowerCase(),i,p="";return n.ENTITIES[t]?n.ENTITIES[t]:n.ENTITIES[o]?n.ENTITIES[o]:(t=o,t.charAt(0)==="#"&&(t.charAt(1)==="x"?(t=t.slice(2),i=parseInt(t,16),p=i.toString(16)):(t=t.slice(1),i=parseInt(t,10),p=i.toString(10))),t=t.replace(/^0+/,""),isNaN(i)||p.toLowerCase()!==t?(v(n,"Invalid character entity"),"&"+n.entity+";"):String.fromCodePoint(i))}function Et(n,t){t==="<"?(n.state=r.OPEN_WAKA,n.startTagPosition=n.position):x(t)||(v(n,"Non-whitespace before first tag."),n.textNode=t,n.state=r.TEXT)}function Tt(n,t){var o="";return t<n.length&&(o=n.charAt(t)),o}function Nt(n){var t=this;if(this.error)throw this.error;if(t.closed)return b(t,"Cannot write after close. Assign an onready handler.");if(n===null)return F(t);typeof n=="object"&&(n=n.toString());for(var o=0,i="";i=Tt(n,o++),t.c=i,!!i;)switch(t.trackPosition&&(t.position++,i===`
`?(t.line++,t.column=0):t.column++),t.state){case r.BEGIN:if(t.state=r.BEGIN_WHITESPACE,i==="\uFEFF")continue;Et(t,i);continue;case r.BEGIN_WHITESPACE:Et(t,i);continue;case r.TEXT:if(t.sawRoot&&!t.closedRoot){for(var p=o-1;i&&i!=="<"&&i!=="&";)i=Tt(n,o++),i&&t.trackPosition&&(t.position++,i===`
`?(t.line++,t.column=0):t.column++);t.textNode+=n.substring(p,o-1)}i==="<"&&!(t.sawRoot&&t.closedRoot&&!t.strict)?(t.state=r.OPEN_WAKA,t.startTagPosition=t.position):(!x(i)&&(!t.sawRoot||t.closedRoot)&&v(t,"Text data outside of root node."),i==="&"?t.state=r.TEXT_ENTITY:t.textNode+=i);continue;case r.SCRIPT:i==="<"?t.state=r.SCRIPT_ENDING:t.script+=i;continue;case r.SCRIPT_ENDING:i==="/"?t.state=r.CLOSE_TAG:(t.script+="<"+i,t.state=r.SCRIPT);continue;case r.OPEN_WAKA:if(i==="!")t.state=r.SGML_DECL,t.sgmlDecl="";else if(!x(i))if(G(c,i))t.state=r.OPEN_TAG,t.tagName=i;else if(i==="/")t.state=r.CLOSE_TAG,t.tagName="";else if(i==="?")t.state=r.PROC_INST,t.procInstName=t.procInstBody="";else{if(v(t,"Unencoded <"),t.startTagPosition+1<t.position){var w=t.position-t.startTagPosition;i=new Array(w).join(" ")+i}t.textNode+="<"+i,t.state=r.TEXT}continue;case r.SGML_DECL:if(t.sgmlDecl+i==="--"){t.state=r.COMMENT,t.comment="",t.sgmlDecl="";continue}t.doctype&&t.doctype!==!0&&t.sgmlDecl?(t.state=r.DOCTYPE_DTD,t.doctype+="<!"+t.sgmlDecl+i,t.sgmlDecl=""):(t.sgmlDecl+i).toUpperCase()===it?(y(t,"onopencdata"),t.state=r.CDATA,t.sgmlDecl="",t.cdata=""):(t.sgmlDecl+i).toUpperCase()===Q?(t.state=r.DOCTYPE,(t.doctype||t.sawRoot)&&v(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):i===">"?(y(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=r.TEXT):(V(i)&&(t.state=r.SGML_DECL_QUOTED),t.sgmlDecl+=i);continue;case r.SGML_DECL_QUOTED:i===t.q&&(t.state=r.SGML_DECL,t.q=""),t.sgmlDecl+=i;continue;case r.DOCTYPE:i===">"?(t.state=r.TEXT,y(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=i,i==="["?t.state=r.DOCTYPE_DTD:V(i)&&(t.state=r.DOCTYPE_QUOTED,t.q=i));continue;case r.DOCTYPE_QUOTED:t.doctype+=i,i===t.q&&(t.q="",t.state=r.DOCTYPE);continue;case r.DOCTYPE_DTD:i==="]"?(t.doctype+=i,t.state=r.DOCTYPE):i==="<"?(t.state=r.OPEN_WAKA,t.startTagPosition=t.position):V(i)?(t.doctype+=i,t.state=r.DOCTYPE_DTD_QUOTED,t.q=i):t.doctype+=i;continue;case r.DOCTYPE_DTD_QUOTED:t.doctype+=i,i===t.q&&(t.state=r.DOCTYPE_DTD,t.q="");continue;case r.COMMENT:i==="-"?t.state=r.COMMENT_ENDING:t.comment+=i;continue;case r.COMMENT_ENDING:i==="-"?(t.state=r.COMMENT_ENDED,t.comment=I(t.opt,t.comment),t.comment&&y(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+i,t.state=r.COMMENT);continue;case r.COMMENT_ENDED:i!==">"?(v(t,"Malformed comment"),t.comment+="--"+i,t.state=r.COMMENT):t.doctype&&t.doctype!==!0?t.state=r.DOCTYPE_DTD:t.state=r.TEXT;continue;case r.CDATA:i==="]"?t.state=r.CDATA_ENDING:t.cdata+=i;continue;case r.CDATA_ENDING:i==="]"?t.state=r.CDATA_ENDING_2:(t.cdata+="]"+i,t.state=r.CDATA);continue;case r.CDATA_ENDING_2:i===">"?(t.cdata&&y(t,"oncdata",t.cdata),y(t,"onclosecdata"),t.cdata="",t.state=r.TEXT):i==="]"?t.cdata+="]":(t.cdata+="]]"+i,t.state=r.CDATA);continue;case r.PROC_INST:i==="?"?t.state=r.PROC_INST_ENDING:x(i)?t.state=r.PROC_INST_BODY:t.procInstName+=i;continue;case r.PROC_INST_BODY:if(!t.procInstBody&&x(i))continue;i==="?"?t.state=r.PROC_INST_ENDING:t.procInstBody+=i;continue;case r.PROC_INST_ENDING:i===">"?(y(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=r.TEXT):(t.procInstBody+="?"+i,t.state=r.PROC_INST_BODY);continue;case r.OPEN_TAG:G(h,i)?t.tagName+=i:(yt(t),i===">"?Z(t):i==="/"?t.state=r.OPEN_TAG_SLASH:(x(i)||v(t,"Invalid character in tag name"),t.state=r.ATTRIB));continue;case r.OPEN_TAG_SLASH:i===">"?(Z(t,!0),lt(t)):(v(t,"Forward-slash in opening tag not followed by >"),t.state=r.ATTRIB);continue;case r.ATTRIB:if(x(i))continue;i===">"?Z(t):i==="/"?t.state=r.OPEN_TAG_SLASH:G(c,i)?(t.attribName=i,t.attribValue="",t.state=r.ATTRIB_NAME):v(t,"Invalid attribute name");continue;case r.ATTRIB_NAME:i==="="?t.state=r.ATTRIB_VALUE:i===">"?(v(t,"Attribute without value"),t.attribValue=t.attribName,ot(t),Z(t)):x(i)?t.state=r.ATTRIB_NAME_SAW_WHITE:G(h,i)?t.attribName+=i:v(t,"Invalid attribute name");continue;case r.ATTRIB_NAME_SAW_WHITE:if(i==="=")t.state=r.ATTRIB_VALUE;else{if(x(i))continue;v(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",y(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",i===">"?Z(t):G(c,i)?(t.attribName=i,t.state=r.ATTRIB_NAME):(v(t,"Invalid attribute name"),t.state=r.ATTRIB)}continue;case r.ATTRIB_VALUE:if(x(i))continue;V(i)?(t.q=i,t.state=r.ATTRIB_VALUE_QUOTED):(t.opt.unquotedAttributeValues||b(t,"Unquoted attribute value"),t.state=r.ATTRIB_VALUE_UNQUOTED,t.attribValue=i);continue;case r.ATTRIB_VALUE_QUOTED:if(i!==t.q){i==="&"?t.state=r.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=i;continue}ot(t),t.q="",t.state=r.ATTRIB_VALUE_CLOSED;continue;case r.ATTRIB_VALUE_CLOSED:x(i)?t.state=r.ATTRIB:i===">"?Z(t):i==="/"?t.state=r.OPEN_TAG_SLASH:G(c,i)?(v(t,"No whitespace between attributes"),t.attribName=i,t.attribValue="",t.state=r.ATTRIB_NAME):v(t,"Invalid attribute name");continue;case r.ATTRIB_VALUE_UNQUOTED:if(!st(i)){i==="&"?t.state=r.ATTRIB_VALUE_ENTITY_U:t.attribValue+=i;continue}ot(t),i===">"?Z(t):t.state=r.ATTRIB;continue;case r.CLOSE_TAG:if(t.tagName)i===">"?lt(t):G(h,i)?t.tagName+=i:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=r.SCRIPT):(x(i)||v(t,"Invalid tagname in closing tag"),t.state=r.CLOSE_TAG_SAW_WHITE);else{if(x(i))continue;C(c,i)?t.script?(t.script+="</"+i,t.state=r.SCRIPT):v(t,"Invalid tagname in closing tag."):t.tagName=i}continue;case r.CLOSE_TAG_SAW_WHITE:if(x(i))continue;i===">"?lt(t):v(t,"Invalid characters in closing tag");continue;case r.TEXT_ENTITY:case r.ATTRIB_VALUE_ENTITY_Q:case r.ATTRIB_VALUE_ENTITY_U:var K,X;switch(t.state){case r.TEXT_ENTITY:K=r.TEXT,X="textNode";break;case r.ATTRIB_VALUE_ENTITY_Q:K=r.ATTRIB_VALUE_QUOTED,X="attribValue";break;case r.ATTRIB_VALUE_ENTITY_U:K=r.ATTRIB_VALUE_UNQUOTED,X="attribValue";break}if(i===";"){var $=_t(t);t.opt.unparsedEntities&&!Object.values(e.XML_ENTITIES).includes($)?(t.entity="",t.state=K,t.write($)):(t[X]+=$,t.entity="",t.state=K)}else G(t.entity.length?L:D,i)?t.entity+=i:(v(t,"Invalid character in entity name"),t[X]+="&"+t.entity+i,t.entity="",t.state=K);continue;default:throw new Error(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&f(t),t}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var n=String.fromCharCode,t=Math.floor,o=function(){var i=16384,p=[],w,K,X=-1,$=arguments.length;if(!$)return"";for(var ct="";++X<$;){var P=Number(arguments[X]);if(!isFinite(P)||P<0||P>1114111||t(P)!==P)throw RangeError("Invalid code point: "+P);P<=65535?p.push(P):(P-=65536,w=(P>>10)+55296,K=P%1024+56320,p.push(w,K)),(X+1===$||p.length>i)&&(ct+=n.apply(null,p),p.length=0)}return ct};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:o,configurable:!0,writable:!0}):String.fromCodePoint=o}()})(a)})(Pt);var pt={isArray:function(a){return Array.isArray?Array.isArray(a):Object.prototype.toString.call(a)==="[object Array]"}},fe=pt.isArray,xt={copyOptions:function(a){var e,s={};for(e in a)a.hasOwnProperty(e)&&(s[e]=a[e]);return s},ensureFlagExists:function(a,e){(!(a in e)||typeof e[a]!="boolean")&&(e[a]=!1)},ensureSpacesExists:function(a){(!("spaces"in a)||typeof a.spaces!="number"&&typeof a.spaces!="string")&&(a.spaces=0)},ensureAlwaysArrayExists:function(a){(!("alwaysArray"in a)||typeof a.alwaysArray!="boolean"&&!fe(a.alwaysArray))&&(a.alwaysArray=!1)},ensureKeyExists:function(a,e){(!(a+"Key"in e)||typeof e[a+"Key"]!="string")&&(e[a+"Key"]=e.compact?"_"+a:a)},checkFnExists:function(a,e){return a+"Fn"in e}},me=Pt,_=xt,mt=pt.isArray,u,E;function de(a){return u=_.copyOptions(a),_.ensureFlagExists("ignoreDeclaration",u),_.ensureFlagExists("ignoreInstruction",u),_.ensureFlagExists("ignoreAttributes",u),_.ensureFlagExists("ignoreText",u),_.ensureFlagExists("ignoreComment",u),_.ensureFlagExists("ignoreCdata",u),_.ensureFlagExists("ignoreDoctype",u),_.ensureFlagExists("compact",u),_.ensureFlagExists("alwaysChildren",u),_.ensureFlagExists("addParent",u),_.ensureFlagExists("trim",u),_.ensureFlagExists("nativeType",u),_.ensureFlagExists("nativeTypeAttributes",u),_.ensureFlagExists("sanitize",u),_.ensureFlagExists("instructionHasAttributes",u),_.ensureFlagExists("captureSpacesBetweenElements",u),_.ensureAlwaysArrayExists(u),_.ensureKeyExists("declaration",u),_.ensureKeyExists("instruction",u),_.ensureKeyExists("attributes",u),_.ensureKeyExists("text",u),_.ensureKeyExists("comment",u),_.ensureKeyExists("cdata",u),_.ensureKeyExists("doctype",u),_.ensureKeyExists("type",u),_.ensureKeyExists("name",u),_.ensureKeyExists("elements",u),_.ensureKeyExists("parent",u),_.checkFnExists("doctype",u),_.checkFnExists("instruction",u),_.checkFnExists("cdata",u),_.checkFnExists("comment",u),_.checkFnExists("text",u),_.checkFnExists("instructionName",u),_.checkFnExists("elementName",u),_.checkFnExists("attributeName",u),_.checkFnExists("attributeValue",u),_.checkFnExists("attributes",u),u}function Bt(a){var e=Number(a);if(!isNaN(e))return e;var s=a.toLowerCase();return s==="true"?!0:s==="false"?!1:a}function gt(a,e){var s;if(u.compact){if(!E[u[a+"Key"]]&&(mt(u.alwaysArray)?u.alwaysArray.indexOf(u[a+"Key"])!==-1:u.alwaysArray)&&(E[u[a+"Key"]]=[]),E[u[a+"Key"]]&&!mt(E[u[a+"Key"]])&&(E[u[a+"Key"]]=[E[u[a+"Key"]]]),a+"Fn"in u&&typeof e=="string"&&(e=u[a+"Fn"](e,E)),a==="instruction"&&("instructionFn"in u||"instructionNameFn"in u)){for(s in e)if(e.hasOwnProperty(s))if("instructionFn"in u)e[s]=u.instructionFn(e[s],s,E);else{var l=e[s];delete e[s],e[u.instructionNameFn(s,l,E)]=l}}mt(E[u[a+"Key"]])?E[u[a+"Key"]].push(e):E[u[a+"Key"]]=e}else{E[u.elementsKey]||(E[u.elementsKey]=[]);var f={};if(f[u.typeKey]=a,a==="instruction"){for(s in e)if(e.hasOwnProperty(s))break;f[u.nameKey]="instructionNameFn"in u?u.instructionNameFn(s,e,E):s,u.instructionHasAttributes?(f[u.attributesKey]=e[s][u.attributesKey],"instructionFn"in u&&(f[u.attributesKey]=u.instructionFn(f[u.attributesKey],s,E))):("instructionFn"in u&&(e[s]=u.instructionFn(e[s],s,E)),f[u.instructionKey]=e[s])}else a+"Fn"in u&&(e=u[a+"Fn"](e,E)),f[u[a+"Key"]]=e;u.addParent&&(f[u.parentKey]=E),E[u.elementsKey].push(f)}}function Lt(a){if("attributesFn"in u&&a&&(a=u.attributesFn(a,E)),(u.trim||"attributeValueFn"in u||"attributeNameFn"in u||u.nativeTypeAttributes)&&a){var e;for(e in a)if(a.hasOwnProperty(e)&&(u.trim&&(a[e]=a[e].trim()),u.nativeTypeAttributes&&(a[e]=Bt(a[e])),"attributeValueFn"in u&&(a[e]=u.attributeValueFn(a[e],e,E)),"attributeNameFn"in u)){var s=a[e];delete a[e],a[u.attributeNameFn(e,a[e],E)]=s}}return a}function Ee(a){var e={};if(a.body&&(a.name.toLowerCase()==="xml"||u.instructionHasAttributes)){for(var s=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,l;(l=s.exec(a.body))!==null;)e[l[1]]=l[2]||l[3]||l[4];e=Lt(e)}if(a.name.toLowerCase()==="xml"){if(u.ignoreDeclaration)return;E[u.declarationKey]={},Object.keys(e).length&&(E[u.declarationKey][u.attributesKey]=e),u.addParent&&(E[u.declarationKey][u.parentKey]=E)}else{if(u.ignoreInstruction)return;u.trim&&(a.body=a.body.trim());var f={};u.instructionHasAttributes&&Object.keys(e).length?(f[a.name]={},f[a.name][u.attributesKey]=e):f[a.name]=a.body,gt("instruction",f)}}function Te(a,e){var s;if(typeof a=="object"&&(e=a.attributes,a=a.name),e=Lt(e),"elementNameFn"in u&&(a=u.elementNameFn(a,E)),u.compact){if(s={},!u.ignoreAttributes&&e&&Object.keys(e).length){s[u.attributesKey]={};var l;for(l in e)e.hasOwnProperty(l)&&(s[u.attributesKey][l]=e[l])}!(a in E)&&(mt(u.alwaysArray)?u.alwaysArray.indexOf(a)!==-1:u.alwaysArray)&&(E[a]=[]),E[a]&&!mt(E[a])&&(E[a]=[E[a]]),mt(E[a])?E[a].push(s):E[a]=s}else E[u.elementsKey]||(E[u.elementsKey]=[]),s={},s[u.typeKey]="element",s[u.nameKey]=a,!u.ignoreAttributes&&e&&Object.keys(e).length&&(s[u.attributesKey]=e),u.alwaysChildren&&(s[u.elementsKey]=[]),E[u.elementsKey].push(s);s[u.parentKey]=E,E=s}function ge(a){u.ignoreText||!a.trim()&&!u.captureSpacesBetweenElements||(u.trim&&(a=a.trim()),u.nativeType&&(a=Bt(a)),u.sanitize&&(a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),gt("text",a))}function ye(a){u.ignoreComment||(u.trim&&(a=a.trim()),gt("comment",a))}function _e(a){var e=E[u.parentKey];u.addParent||delete E[u.parentKey],E=e}function Ne(a){u.ignoreCdata||(u.trim&&(a=a.trim()),gt("cdata",a))}function be(a){u.ignoreDoctype||(a=a.replace(/^ /,""),u.trim&&(a=a.trim()),gt("doctype",a))}function Ae(a){a.note=a}var Mt=function(a,e){var s=me.parser(!0,{}),l={};if(E=l,u=de(e),s.opt={strictEntities:!0},s.onopentag=Te,s.ontext=ge,s.oncomment=ye,s.onclosetag=_e,s.onerror=Ae,s.oncdata=Ne,s.ondoctype=be,s.onprocessinginstruction=Ee,s.write(a).close(),l[u.elementsKey]){var f=l[u.elementsKey];delete l[u.elementsKey],l[u.elementsKey]=f,delete l.text}return l},Kt=xt,Fe=Mt;function ve(a){var e=Kt.copyOptions(a);return Kt.ensureSpacesExists(e),e}var pe=function(a,e){var s,l,f,m;return s=ve(e),l=Fe(a,s),m="compact"in s&&s.compact?"_parent":"parent","addParent"in s&&s.addParent?f=JSON.stringify(l,function(T,g){return T===m?"_":g},s.spaces):f=JSON.stringify(l,null,s.spaces),f.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},N=xt,xe=pt.isArray,k,j;function he(a){var e=N.copyOptions(a);return N.ensureFlagExists("ignoreDeclaration",e),N.ensureFlagExists("ignoreInstruction",e),N.ensureFlagExists("ignoreAttributes",e),N.ensureFlagExists("ignoreText",e),N.ensureFlagExists("ignoreComment",e),N.ensureFlagExists("ignoreCdata",e),N.ensureFlagExists("ignoreDoctype",e),N.ensureFlagExists("compact",e),N.ensureFlagExists("indentText",e),N.ensureFlagExists("indentCdata",e),N.ensureFlagExists("indentAttributes",e),N.ensureFlagExists("indentInstruction",e),N.ensureFlagExists("fullTagEmptyElement",e),N.ensureFlagExists("noQuotesForNativeAttributes",e),N.ensureSpacesExists(e),typeof e.spaces=="number"&&(e.spaces=Array(e.spaces+1).join(" ")),N.ensureKeyExists("declaration",e),N.ensureKeyExists("instruction",e),N.ensureKeyExists("attributes",e),N.ensureKeyExists("text",e),N.ensureKeyExists("comment",e),N.ensureKeyExists("cdata",e),N.ensureKeyExists("doctype",e),N.ensureKeyExists("type",e),N.ensureKeyExists("name",e),N.ensureKeyExists("elements",e),N.checkFnExists("doctype",e),N.checkFnExists("instruction",e),N.checkFnExists("cdata",e),N.checkFnExists("comment",e),N.checkFnExists("text",e),N.checkFnExists("instructionName",e),N.checkFnExists("elementName",e),N.checkFnExists("attributeName",e),N.checkFnExists("attributeValue",e),N.checkFnExists("attributes",e),N.checkFnExists("fullTagEmptyElement",e),e}function tt(a,e,s){return(!s&&a.spaces?`
`:"")+Array(e+1).join(a.spaces)}function bt(a,e,s){if(e.ignoreAttributes)return"";"attributesFn"in e&&(a=e.attributesFn(a,j,k));var l,f,m,T,g=[];for(l in a)a.hasOwnProperty(l)&&a[l]!==null&&a[l]!==void 0&&(T=e.noQuotesForNativeAttributes&&typeof a[l]!="string"?"":'"',f=""+a[l],f=f.replace(/"/g,"&quot;"),m="attributeNameFn"in e?e.attributeNameFn(l,f,j,k):l,g.push(e.spaces&&e.indentAttributes?tt(e,s+1,!1):" "),g.push(m+"="+T+("attributeValueFn"in e?e.attributeValueFn(f,l,j,k):f)+T));return a&&Object.keys(a).length&&e.spaces&&e.indentAttributes&&g.push(tt(e,s,!1)),g.join("")}function Ut(a,e,s){return k=a,j="xml",e.ignoreDeclaration?"":"<?xml"+bt(a[e.attributesKey],e,s)+"?>"}function kt(a,e,s){if(e.ignoreInstruction)return"";var l;for(l in a)if(a.hasOwnProperty(l))break;var f="instructionNameFn"in e?e.instructionNameFn(l,a[l],j,k):l;if(typeof a[l]=="object")return k=a,j=f,"<?"+f+bt(a[l][e.attributesKey],e,s)+"?>";var m=a[l]?a[l]:"";return"instructionFn"in e&&(m=e.instructionFn(m,l,j,k)),"<?"+f+(m?" "+m:"")+"?>"}function jt(a,e){return e.ignoreComment?"":"<!--"+("commentFn"in e?e.commentFn(a,j,k):a)+"-->"}function Vt(a,e){return e.ignoreCdata?"":"<![CDATA["+("cdataFn"in e?e.cdataFn(a,j,k):a.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function Gt(a,e){return e.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in e?e.doctypeFn(a,j,k):a)+">"}function ht(a,e){return e.ignoreText?"":(a=""+a,a=a.replace(/&amp;/g,"&"),a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in e?e.textFn(a,j,k):a)}function De(a,e){var s;if(a.elements&&a.elements.length)for(s=0;s<a.elements.length;++s)switch(a.elements[s][e.typeKey]){case"text":if(e.indentText)return!0;break;case"cdata":if(e.indentCdata)return!0;break;case"instruction":if(e.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function Ce(a,e,s){k=a,j=a.name;var l=[],f="elementNameFn"in e?e.elementNameFn(a.name,a):a.name;l.push("<"+f),a[e.attributesKey]&&l.push(bt(a[e.attributesKey],e,s));var m=a[e.elementsKey]&&a[e.elementsKey].length||a[e.attributesKey]&&a[e.attributesKey]["xml:space"]==="preserve";return m||("fullTagEmptyElementFn"in e?m=e.fullTagEmptyElementFn(a.name,a):m=e.fullTagEmptyElement),m?(l.push(">"),a[e.elementsKey]&&a[e.elementsKey].length&&(l.push(Xt(a[e.elementsKey],e,s+1)),k=a,j=a.name),l.push(e.spaces&&De(a,e)?`
`+Array(s+1).join(e.spaces):""),l.push("</"+f+">")):l.push("/>"),l.join("")}function Xt(a,e,s,l){return a.reduce(function(f,m){var T=tt(e,s,l&&!f);switch(m.type){case"element":return f+T+Ce(m,e,s);case"comment":return f+T+jt(m[e.commentKey],e);case"doctype":return f+T+Gt(m[e.doctypeKey],e);case"cdata":return f+(e.indentCdata?T:"")+Vt(m[e.cdataKey],e);case"text":return f+(e.indentText?T:"")+ht(m[e.textKey],e);case"instruction":var g={};return g[m[e.nameKey]]=m[e.attributesKey]?m:m[e.instructionKey],f+(e.indentInstruction?T:"")+kt(g,e,s)}},"")}function $t(a,e,s){var l;for(l in a)if(a.hasOwnProperty(l))switch(l){case e.parentKey:case e.attributesKey:break;case e.textKey:if(e.indentText||s)return!0;break;case e.cdataKey:if(e.indentCdata||s)return!0;break;case e.instructionKey:if(e.indentInstruction||s)return!0;break;case e.doctypeKey:case e.commentKey:return!0;default:return!0}return!1}function Ie(a,e,s,l,f){k=a,j=e;var m="elementNameFn"in s?s.elementNameFn(e,a):e;if(typeof a>"u"||a===null||a==="")return"fullTagEmptyElementFn"in s&&s.fullTagEmptyElementFn(e,a)||s.fullTagEmptyElement?"<"+m+"></"+m+">":"<"+m+"/>";var T=[];if(e){if(T.push("<"+m),typeof a!="object")return T.push(">"+ht(a,s)+"</"+m+">"),T.join("");a[s.attributesKey]&&T.push(bt(a[s.attributesKey],s,l));var g=$t(a,s,!0)||a[s.attributesKey]&&a[s.attributesKey]["xml:space"]==="preserve";if(g||("fullTagEmptyElementFn"in s?g=s.fullTagEmptyElementFn(e,a):g=s.fullTagEmptyElement),g)T.push(">");else return T.push("/>"),T.join("")}return T.push(Yt(a,s,l+1,!1)),k=a,j=e,e&&T.push((f?tt(s,l,!1):"")+"</"+m+">"),T.join("")}function Yt(a,e,s,l){var f,m,T,g=[];for(m in a)if(a.hasOwnProperty(m))for(T=xe(a[m])?a[m]:[a[m]],f=0;f<T.length;++f){switch(m){case e.declarationKey:g.push(Ut(T[f],e,s));break;case e.instructionKey:g.push((e.indentInstruction?tt(e,s,l):"")+kt(T[f],e,s));break;case e.attributesKey:case e.parentKey:break;case e.textKey:g.push((e.indentText?tt(e,s,l):"")+ht(T[f],e));break;case e.cdataKey:g.push((e.indentCdata?tt(e,s,l):"")+Vt(T[f],e));break;case e.doctypeKey:g.push(tt(e,s,l)+Gt(T[f],e));break;case e.commentKey:g.push(tt(e,s,l)+jt(T[f],e));break;default:g.push(tt(e,s,l)+Ie(T[f],m,e,s,$t(T[f],e)))}l=l&&!g.length}return g.join("")}var qt=function(a,e){e=he(e);var s=[];return k=a,j="_root_",e.compact?s.push(Yt(a,e,0,!0)):(a[e.declarationKey]&&s.push(Ut(a[e.declarationKey],e,0)),a[e.elementsKey]&&a[e.elementsKey].length&&s.push(Xt(a[e.elementsKey],e,0,!s.length))),s.join("")},Se=qt,Oe=function(a,e){a instanceof Buffer&&(a=a.toString());var s=null;if(typeof a=="string")try{s=JSON.parse(a)}catch{throw new Error("The JSON structure is invalid")}else s=a;return Se(s,e)},we=Mt,Ke=pe,Re=qt,Pe=Oe,Be={xml2js:we,xml2json:Ke,js2xml:Re,json2xml:Pe};const Ht=ae("tmsXml",()=>{const a=vt([]),e=vt({});async function s(l){var m,T,g,O;if(!(((m=l==null?void 0:l[0])==null?void 0:m.type)==="text/xml"||(g=(T=l==null?void 0:l[0])==null?void 0:T.name)!=null&&g.endsWith(".xml")))return;const f=await l[0].text();a.value=(O=Be.xml2js(f,{compact:!0}))==null?void 0:O.CompositionPlaylist,console.log(a.value),e.value={name:l[0].name,type:l[0].type,lastModified:l[0].lastModified,size:l[0].size}}return{obj:a,metadata:e,addFiles:s}}),Le={id:"upload"},Me={key:0},Ue={key:1},ke={key:2},je={__name:"TmsXmlUploadSection",setup(a){const e=Ht(),s=vt(null);return(l,f)=>{const m=ie,T=zt;return R(),U("section",Le,[f[4]||(f[4]=A("h2",null,"Bestand uploaden",-1)),J(T,{id:"drop-zone",onFilesDropped:H(e).addFiles,onClick:f[0]||(f[0]=g=>s.value.click()),style:{cursor:"pointer"}},{default:q(({dropZoneActive:g})=>[A("div",null,[g?(R(),U("div",Me,"Laat los om te uploaden")):H(e).metadata.name?(R(),U("div",Ue,S(H(e).metadata.name),1)):(R(),U("div",ke,"Sleep een bestand hierheen")),f[2]||(f[2]=A("div",{class:"small"},"XML-bestand uit RosettaBridge",-1))]),J(m,{"data-active":g},{default:q(()=>f[3]||(f[3]=[B("Bladeren...")])),_:2},1032,["data-active"])]),_:1},8,["onFilesDropped"]),A("input",{type:"file",ref_key:"fileInput",ref:s,accept:"text/xml,.xml",style:{display:"none"},onChange:f[1]||(f[1]=g=>H(e).addFiles(g.target.files))},null,544)])}}},Ve=Rt(je,[["__scopeId","data-v-02f009a6"]]),Ge={class:"container dark"},Xe={class:"flex",style:{"flex-wrap":"wrap"}},$e={key:0,style:{flex:"50% 1 1"}},Ye={class:"film"},qe={class:"room"},He={class:"title"},We={key:0,class:"time"},ze={key:1,class:"time"},Qe={class:"flex chips"},Je={class:"extra"},Ze={class:"flex proportional-reels"},tn=["title"],en={class:"reels"},nn=["title"],an={key:0,class:"bold colour"},rn={class:"extra-extra"},sn={key:0},un={key:1},on={__name:"IntermissionFinderView",setup(a){const e=Ht(),s=Qt("intermission-percentage-dev",5),l=nt(()=>{var d,c,h,D,L,x;return Q((x=((h=(c=(d=e.obj)==null?void 0:d.ReelList)==null?void 0:c.Reel)==null?void 0:h[0])||((L=(D=e.obj)==null?void 0:D.ReelList)==null?void 0:L.Reel))==null?void 0:x.AssetList,([V])=>V.includes("CompositionMetadataAsset"))}),f=nt(()=>{var d,c,h;return((d=Q(l.value,([D])=>D.includes("TitleText")))==null?void 0:d._text)||((h=(c=e.obj)==null?void 0:c.AnnotationText)==null?void 0:h._text.split("_")[0])}),m=nt(()=>{var d,c,h,D,L,x;return!!Q((x=((h=(c=(d=e.obj)==null?void 0:d.ReelList)==null?void 0:c.Reel)==null?void 0:h[0])||((L=(D=e.obj)==null?void 0:D.ReelList)==null?void 0:L.Reel))==null?void 0:x.AssetList,([V])=>V.includes("StereoscopicPicture"))}),T=nt(()=>{var d;return(d=Q(Q(Q(l.value,([c])=>c.includes("SubDescriptors")),([c])=>c.includes("SubDescriptor")),([c])=>c.includes("SpokenLanguage")))==null?void 0:d._text}),g=nt(()=>{var d;return(d=Q(l.value,([c])=>c.includes("MainSubtitleLanguageList")))==null?void 0:d._text}),O=nt(()=>{var h,D,L,x,V,st,G,C,r,dt,at;const d=(D=(h=e.obj)==null?void 0:h.ReelList)==null?void 0:D.Reel;let c=[];if((d==null?void 0:d.length)>0)c.push(...d==null?void 0:d.map((y,M)=>{var v,yt,ut,ot,Z,lt,_t,Et,Tt;const I={},b=y==null?void 0:y.AssetList,F=Q(b,([Nt])=>Nt.includes("Main")&&Nt.endsWith("Picture"));return I.title=((v=F==null?void 0:F.AnnotationText)==null?void 0:v._text)||`Reel ${M}`,I.frameRate=Number((ut=(yt=F==null?void 0:F.EditRate)==null?void 0:yt._text)==null?void 0:ut.split(" ")[0])||Number((Z=(ot=F==null?void 0:F.FrameRate)==null?void 0:ot._text)==null?void 0:Z.split(" ")[0]),I.frames=Number((lt=(F==null?void 0:F.Duration)||(F==null?void 0:F.IntrinsicDuration))==null?void 0:lt._text),I.intrinsicFrames=Number((_t=F==null?void 0:F.IntrinsicDuration)==null?void 0:_t._text),I.duration=I.frames/I.frameRate*1e3,I.intrinsicDuration=I.intrinsicFrames/I.frameRate*1e3,I.entryPoint=Number((Et=F==null?void 0:F.EntryPoint)==null?void 0:Et._text),I.id=(Tt=F==null?void 0:F.Id)==null?void 0:Tt._text,I}));else{const y={},M=d,I=M==null?void 0:M.AssetList,b=Q(I,([F])=>F.includes("Main")&&F.endsWith("Picture"));y.title=((L=M==null?void 0:M.AnnotationText)==null?void 0:L._text)||"Reel 0",y.frameRate=Number((V=(x=b==null?void 0:b.EditRate)==null?void 0:x._text)==null?void 0:V.split(" ")[0])||Number((G=(st=b==null?void 0:b.FrameRate)==null?void 0:st._text)==null?void 0:G.split(" ")[0]),y.frames=Number((C=(b==null?void 0:b.Duration)||(b==null?void 0:b.IntrinsicDuration))==null?void 0:C._text),y.intrinsicFrames=Number((r=b==null?void 0:b.IntrinsicDuration)==null?void 0:r._text),y.duration=y.frames/y.frameRate*1e3,y.intrinsicDuration=y.intrinsicFrames/y.frameRate*1e3,y.entryPoint=Number((dt=b==null?void 0:b.EntryPoint)==null?void 0:dt._text),y.id=(at=b==null?void 0:b.Id)==null?void 0:at._text,c.push(y)}return c.forEach((y,M)=>{y.properDuration=y.duration/c.reduce((I,b)=>I+b.duration,0),y.properStart=c.slice(0,M).reduce((I,b)=>I+b.properDuration,0)}),c}),z=nt(()=>[...O.value].sort((d,c)=>Math.abs(d.properStart-.5)-Math.abs(c.properStart-.5))[0].properStart),Y=nt(()=>O.value.findIndex(d=>d.properStart===z.value)),it=nt(()=>O.value.reduce((d,c)=>d+c.duration,0));function Q(d,c){var h,D;if(typeof d=="object")return(D=(h=Object.entries(d))==null?void 0:h.find(c))==null?void 0:D[1]}function W(d=0,c=24){c=Number(c);let h=d*c/1e3;const D=Math.floor(h/c/60/60),L=Math.floor(h/c/60)%60,x=Math.floor(h/c)%60,V=Math.floor(h%c);return`${String(D).padStart(2,"0")}:${String(L).padStart(2,"0")}:${String(x).padStart(2,"0")}:${String(V).padStart(2,"0")}`}function rt(d,c){return`
${c+1}e reel

Titel: ${d.title||"Geen"}
ID: ${d.id}

Framerate: ${d.frameRate} fps
Duur: ${W(d.duration,d.frameRate)} (${d.frames} frames)

Intrinsieke duur: ${W(d.intrinsicDuration,d.frameRate)} (${d.intrinsicFrames} frames)
Startpunt: ${W(d.entryPoint,d.frameRate)} (${d.entryPoint} frames)`}return(d,c)=>{var G;const h=Ve,D=re,L=ne,x=Zt,V=te,st=ee;return R(),U("main",Ge,[J(h),A("section",null,[A("div",Xe,[(G=H(e).metadata)!=null&&G.name?(R(),U("div",$e,[c[15]||(c[15]=A("h2",null,"Filminformatie",-1)),A("div",Ye,[A("div",qe,[J(D,{fill:"",style:{"--size":"24px",opacity:"0.5"}},{default:q(()=>c[2]||(c[2]=[B("theaters")])),_:1})]),A("div",He,S(f.value),1),O.value.some(C=>C.frameRate!==O.value[0].frameRate)?(R(),U("div",ze,"Framerate verschilt per reel")):(R(),U("div",We,[B(S(W(it.value,O.value[0].frameRate))+" ",1),A("span",{class:It({bold:O.value[0].frameRate!==24,colour:O.value[0].frameRate!==24})}," ("+S(O.value[0].frameRate)+" fps) ",3)])),A("div",Qe,[m.value?(R(),Ft(L,{key:0},{default:q(()=>[J(D,{fill:""},{default:q(()=>c[3]||(c[3]=[B("eyeglasses")])),_:1}),c[4]||(c[4]=B("3D "))]),_:1})):ft("",!0),T.value?(R(),Ft(L,{key:1,class:"translucent-white"},{default:q(()=>[J(D,{fill:""},{default:q(()=>c[5]||(c[5]=[B("volume_up")])),_:1}),B(" "+S(T.value),1)]),_:1})):ft("",!0),g.value?(R(),Ft(L,{key:2,class:"translucent-white"},{default:q(()=>[J(D,{fill:""},{default:q(()=>c[6]||(c[6]=[B("subtitles")])),_:1}),B(" "+S(g.value),1)]),_:1})):ft("",!0)]),A("div",Je,[c[14]||(c[14]=A("h4",null,"Reels",-1)),A("div",Ze,[(R(!0),U(St,null,Ot(O.value,(C,r)=>(R(),U("div",{class:It(["reel",{"after-intermission":z.value===C.properStart&&Math.abs(z.value-.5)<H(s)/100}]),style:se({"--propFrac":C.properDuration}),title:rt(C,r)},null,14,tn))),256))]),A("table",en,[c[7]||(c[7]=A("thead",null,[A("td",null,"Reel"),A("td",null,"Duur (hh:mm:ss:ff)"),A("td",null,"Starttijd (hh:mm:ss:ff)")],-1)),(R(!0),U(St,null,Ot(O.value,(C,r)=>(R(),U("tr",{title:rt(C,r)},[A("td",null,S(r+1),1),A("td",null,[B(S(W(C.duration,C.frameRate))+" ",1),C.frameRate!==O.value[0].frameRate?(R(),U("span",an," ("+S(C.frameRate)+" fps) ",1)):ft("",!0)]),A("td",null,S(W(C.properStart*it.value,C.frameRate))+" ("+S((C.properStart*100).toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}))+"%) ",1)],8,nn))),256))]),A("div",rn,[c[13]||(c[13]=A("h4",null,"Pauzesuggestie",-1)),Math.abs(z.value-.5)<H(s)/100?(R(),U("span",sn,[B(" Een pauze zou kunnen worden ingepland tussen de "+S(Y.value),1),c[8]||(c[8]=A("sup",null,"e",-1)),B(" en de "+S(Y.value+1),1),c[9]||(c[9]=A("sup",null,"e",-1)),B(" reel (na "+S(W(z.value*it.value,O.value[0].frameRate))+" of "+S((z.value*100).toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}))+"%). ",1)])):(R(),U("span",un,[B(" Er is geen reel die tussen "+S(50-H(s))+"% en "+S(50+H(s))+"% van de film eindigt. ",1),Math.abs(z.value-.5)-H(s)/100<.05?(R(),U("a",{key:0,class:"link",onClick:c[0]||(c[0]=C=>s.value=Math.ceil(Math.abs(z.value-.5)*100))}," Maximale afwijking bijstellen tot "+S(Math.ceil(Math.abs(z.value-.5)*100))+"%?",1)):ft("",!0),c[10]||(c[10]=A("br",null,null,-1)),B(" Een pauze zou kunnen worden ingepland tijdens de "+S(Y.value+1),1),c[11]||(c[11]=A("sup",null,"e",-1)),B(" reel (bijvoorbeeld na "+S(W(.5*it.value,O.value[0].frameRate))+" of 50%). ",1),c[12]||(c[12]=A("br",null,null,-1))]))])])])])):ft("",!0),J(Jt,{style:{flex:"229px 1 1"}},{default:q(()=>[J(st,null,{default:q(()=>[J(V,{value:"Opties pauzesuggestie"},{default:q(()=>[J(x,{modelValue:H(s),"onUpdate:modelValue":c[1]||(c[1]=C=>ue(s)?s.value=C:null),modelModifiers:{number:!0},identifier:"intermissionPercentageDev",unit:"%"},{default:q(()=>[c[16]||(c[16]=B(" Maximale afwijking van middenpunt ")),A("small",null,"De filmpauze kan worden geplaatst tussen "+S(50-H(s))+"% en "+S(50+H(s))+"% van de film. ",1)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})])])])}}},dn=Rt(on,[["__scopeId","data-v-102e29e5"]]);export{dn as default};
