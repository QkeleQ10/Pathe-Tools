import{_ as V,x as $,y as B,o as p,c as m,d as r,a as F,i as O,H as P,I as H,r as h,e as C,w as b,u as v,g as N,l as j,s as A}from"./index-BjcDeCQu.js";import{d as R}from"./DropZone-Z4PCQ3YW.js";const U=["for"],z={class:"title"},W=["id"],X={__name:"InputCheckbox",props:$(["identifier"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const n=B(a,"modelValue");return(s,e)=>(p(),m("label",{class:"input",for:a.identifier},[r("div",z,[F(s.$slots,"default",{},void 0,!0)]),O(r("input",{type:"checkbox",name:"",id:a.identifier,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o)},null,8,W),[[P,n.value]])],8,U))}},L=V(X,[["__scopeId","data-v-e6cec1b4"]]),Y=H("tmsSchedule",()=>{const a=h([]),n=h({});async function s(e){var S,T,g,x,y,D;if(!(((S=e==null?void 0:e[0])==null?void 0:S.type)==="text/csv"||((T=e==null?void 0:e[0])==null?void 0:T.type)==="application/vnd.ms-excel"||(x=(g=e==null?void 0:e[0])==null?void 0:g.name)!=null&&x.endsWith(".csv")))return;const u=(await e[0].text()).split(`
`);let i=[];const d=u[0].splitCsv();for(var f=0;f<u.length;f++){const t=u[f].splitCsv();let _={};for(let l=0;l<t.length;l++)_[(y=d[l])==null?void 0:y.trim()]=(D=t[l])==null?void 0:D.trim();i.push(_)}i=i.map((t,_)=>{var l,I,M,k,E;return _===0||(t.extra=(M=(I=(l=t.PLAYLIST)==null?void 0:l.match(/(\s((4DX)|(ATMOS)|(IMX)|(3D)|(Music)|(ROOFTOP)|(PrideNight)|(Ladies)|(Premiere)|(\([A-Z]+\))))+/))==null?void 0:I[0])==null?void 0:M.slice(1),t.extras=(k=t.extra)==null?void 0:k.split(" "),t.title=(E=t.PLAYLIST)==null?void 0:E.replace(t.extra,""),t.scheduledTime=c(t.SCHEDULED_TIME),t.showTime=c(t.SHOW_TIME),t.featureTime=c(t.FEATURE_TIME),t.creditsTime=c(t.CREDITS_TIME),t.endTime=c(t.END_TIME)),t}),a.value=i,n.value={name:e[0].name,type:e[0].type,lastModified:e[0].lastModified,size:e[0].size}}return{table:a,metadata:n,addFiles:s}});String.prototype.splitCsv=function(){let a=[],n="",s=!1;for(let e of this)e==='"'?s=!s:e===","&&!s?(a.push(n.trim()),n=""):n+=e;return a.push(n.trim()),a};function c(a){let n=new Date;n.getHours()<6&&n.setDate(n.getDate()-1);let s=new Date(n.toDateString()+" "+a);return s.getHours()<6&&s.setDate(s.getDate()+1),s}const Q={id:"upload"},Z={key:0},q={key:1},G={key:2},J={__name:"TmsScheduleUploadSection",setup(a){const n=Y(),s=h(null);return(e,o)=>{const u=A,i=R;return p(),m("section",Q,[o[4]||(o[4]=r("h2",null,"Bestand uploaden",-1)),C(i,{id:"drop-zone",onFilesDropped:v(n).addFiles,onClick:o[0]||(o[0]=d=>s.value.click()),style:{cursor:"pointer"}},{default:b(({dropZoneActive:d})=>[r("div",null,[d?(p(),m("div",Z,"Laat los om te uploaden")):v(n).metadata.name?(p(),m("div",q,N(v(n).metadata.name),1)):(p(),m("div",G,"Sleep een bestand hierheen")),o[2]||(o[2]=r("div",{class:"small"},"CSV-bestand uit RosettaBridge (met optie 'times only')",-1))]),C(u,{"data-active":d},{default:b(()=>o[3]||(o[3]=[j("Bladeren...")])),_:2},1032,["data-active"])]),_:1},8,["onFilesDropped"]),r("input",{type:"file",ref_key:"fileInput",ref:s,accept:"text/csv,.csv",style:{display:"none"},onChange:o[1]||(o[1]=d=>v(n).addFiles(d.target.files))},null,544)])}}},ee=V(J,[["__scopeId","data-v-2e892687"]]);export{ee as _,L as a,Y as u};
