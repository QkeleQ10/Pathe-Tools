const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/howler-BXccDGgb.js","assets/_commonjsHelpers-C4iS2aBk.js"])))=>i.map(i=>d[i]);
import{_ as Z,y as te,z as ae,o as l,c as f,d as c,a as ue,i as q,A as oe,r as L,B as le,C as se,u as a,D as B,E as K,e as x,F as G,g as X,f as $,w as i,x as J,j as b,t as _,m as S,l as s,n as ie,p as A,q as de,s as ce,G as re,h as me}from"./index-DNTmhOiJ.js";import{a as fe,u as M,_ as pe,b as ve,c as _e}from"./TmsScheduleUploadSection-khLkrbYa.js";import{_ as he}from"./Chip-V1_ZHGNU.js";import{C as W,x as ye}from"./super-vue3-tabs-z6p8kwEm.js";const Te=["for"],ge={class:"title"},Se=["id"],Ve={__name:"InputText",props:te(["identifier"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(h){const p=ae(h,"modelValue");return(T,k)=>(l(),f("label",{class:"input",for:h.identifier},[c("div",ge,[ue(T.$slots,"default",{},void 0,!0)]),q(c("input",{type:"text",inputmode:"numeric",pattern:"[0-9]+",name:"",id:h.identifier,"onUpdate:modelValue":k[0]||(k[0]=D=>p.value=D)},null,8,Se),[[oe,p.value,void 0,{number:!0}]])],8,Te))}},xe=Z(Ve,[["__scopeId","data-v-a93f9514"]]);function Y(h,{volume:p=1,playbackRate:T=1,soundEnabled:k=!0,interrupt:D=!1,autoplay:P=!1,onload:U,...E}={}){const g=L(null),v=L(!1),y=L(null),o=L(null);function r(){var d;typeof U=="function"&&U.call(this),y.value=(y.value||((d=o.value)==null?void 0:d.duration())||0)*1e3,P===!0&&(v.value=!0)}return le(async()=>{const d=await se(()=>import("./howler-BXccDGgb.js").then(R=>R.h),__vite__mapDeps([0,1]));g.value=d.default.Howl,o.value=new g.value({src:a(h),volume:a(p),rate:a(T),onload:r,...E})}),B(()=>[h],()=>{g.value&&g.value&&o&&o.value&&(o.value=new g.value({src:a(h),volume:a(p),rate:a(T),onload:r,...E}))}),B(()=>[a(p),a(T)],()=>{o.value&&(o.value.volume(a(p)),o.value.rate(a(T)))}),{play:d=>{typeof d>"u"&&(d={}),!(!o.value||!k&&!d.forceSoundEnabled)&&(D&&o.value.stop(),d.playbackRate&&o.value.rate(d.playbackRate),o.value.play(d.id),o.value.once("end",()=>{o.value&&o.value&&!o.value.playing()&&(v.value=!1)}),v.value=!0)},sound:o,isPlaying:v,duration:y,pause:d=>{o.value&&(o.value.pause(typeof d=="number"?d:void 0),v.value=!1)},stop:d=>{o.value&&(o.value.stop(typeof d=="number"?d:void 0),v.value=!1)}}}const De="/Pathe-Tools/assets/rosetta-DA6vQKhk.ogg",Ue="/Pathe-Tools/assets/gerwim-hi7crA_V.ogg",Ee=h=>(de("data-v-6eb32ed7"),h=h(),ce(),h),Ie={class:"container dark"},ke={class:"flex",style:{"flex-wrap":"wrap"}},Pe={key:0,style:{flex:"50% 1 1"}},be=Ee(()=>c("h2",null,"Geplande omroepen",-1)),Ae={id:"upcoming-announcements",class:"flex",style:{"flex-direction":"column",gap:"8px"}},Me={class:"room"},Ce={class:"title"},$e={class:"time"},Oe={class:"flex chips"},Le=["onDblclick"],Re={id:"parameters",style:{flex:"229px 1 1"}},Ne={key:0},we={key:0,class:"small"},Ge={key:0,class:"small"},Xe={class:"flex",style:{"flex-wrap":"wrap",gap:"8px","margin-top":"-4px"}},Be={class:"queue"},ze={__name:"AnnouncerView",setup(h){const p=fe(),T=L(()=>new Date);setInterval(k,1e3),k();function k(){T.value=new Date}const D=M("announcement-voice","rosetta"),P=M("announce-start",!1),U=M("announce-plf-start",!0),E=M("announce-plf-start-grace-period",15),g=M("announce-main-show",!1),v=M("announce-credits",!0),y=M("announce-credits-grace-period",60),o=M("announce-end",!1),r=K({rosetta:{sprite:{auditorium01:[0,1201.6326530612246],auditorium02:[3e3,1332.2448979591836],auditorium03:[6e3,1332.2448979591836],auditorium04:[9e3,1384.489795918368],auditorium05:[12e3,1436.7346938775504],auditorium06:[15e3,1436.7346938775504],auditorium07:[18e3,1515.102040816327],auditorium08:[21e3,1515.102040816327],auditorium09:[24e3,1488.9795918367347],auditorium10:[27e3,1306.1224489795932],auditorium11:[3e4,1462.8571428571427],auditorium12:[33e3,1515.1020408163233],auditorium13:[36e3,1488.9795918367383],auditorium14:[39e3,1488.9795918367383],auditorium15:[42e3,1567.3469387755076],auditorium16:[45e3,1488.9795918367383],auditorium17:[48e3,1515.1020408163233],auditorium18:[51e3,1462.8571428571463],auditorium19:[54e3,1724.0816326530605],auditorium20:[57e3,1593.4693877551],chime:[6e4,3084.51247165533],credits:[65e3,1501.6099773242645],end:[68e3,1563.7868480725672],mainshow:[71e3,1793.3333333333367],start:[74e3,989.9092970521508]}},gerwim:{sprite:{auditorium01:[0,824.9659863945578],auditorium02:[2e3,870.9070294784577],auditorium03:[4e3,790.2040816326528],auditorium04:[6e3,886.8253968253965],auditorium05:[8e3,838.5260770975051],auditorium06:[1e4,866.757369614513],auditorium07:[12e3,987.7777777777776],auditorium08:[14e3,665.6689342403635],credits:[16e3,936.5532879818588],start:[18e3,638.9342403628114]}}});({play:r.rosetta.play,isPlaying:r.rosetta.isPlaying}=Y(De,{sprite:r.rosetta.sprite,preload:!0,onplay:async()=>{document.dispatchEvent(new Event("announcerSoundPlay"))},onend:async()=>{document.dispatchEvent(new Event("announcerSoundEnd"))}})),{play:r.gerwim.play,isPlaying:r.gerwim.isPlaying}=Y(Ue,{sprite:r.gerwim.sprite,preload:!0,onplay:async()=>{document.dispatchEvent(new Event("announcerSoundPlay"))},onend:async()=>{document.dispatchEvent(new Event("announcerSoundEnd"))}});let V=K([]);B(V,async t=>{var u;if(t[0]&&!r.rosetta.sprite[t[0].id]&&V.shift(),t[0]&&!Object.values(r).some(n=>n.isPlaying)){const n=V[0];(u=r[D.value])!=null&&u.sprite[n.id]?r[D.value].play(n):r.rosetta.play(n),document.addEventListener("announcerSoundEnd",()=>{V.shift()},{once:!0})}},{deep:!0});const O=L([]);B([p,P,U,E,g,v,y,o],([t])=>j(t)),j(p);function j(t){let u=[];P.value&&t.table.forEach(n=>{n.scheduledTime&&u.push({announceTime:n.scheduledTime,announcement:["chime","start",`auditorium${N(n.AUDITORIUM)}`],announcementType:"start",status:"unscheduled",...n})}),U.value&&t.table.filter(n=>{var I;return(I=n.AUDITORIUM)==null?void 0:I.includes("4DX")}).forEach(n=>{n.scheduledTime&&u.push({announceTime:new Date(n.scheduledTime.getTime()-E.value*6e4),announcement:["chime","start",`auditorium${N(n.AUDITORIUM)}`],status:"unscheduled",announcementType:"start4dx",...n})}),g.value&&t.table.forEach(n=>{n.scheduledTime&&u.push({announceTime:n.featureTime,announcement:["chime","mainshow",`auditorium${N(n.AUDITORIUM)}`],status:"unscheduled",announcementType:"mainshow",...n})}),v.value&&t.table.forEach(n=>{n.creditsTime&&u.push({announceTime:new Date(n.creditsTime.getTime()-y.value*1e3),announcement:["chime","credits",`auditorium${N(n.AUDITORIUM)}`],status:"unscheduled",announcementType:"credits",...n})}),o.value&&t.table.forEach(n=>{n.scheduledTime&&u.push({announceTime:n.endTime,announcement:["chime","end",`auditorium${N(n.AUDITORIUM)}`],status:"unscheduled",announcementType:"end",...n})}),O.value.filter(n=>n.status==="scheduled").forEach(n=>{u.find(I=>n.announceTime===I.announceTime&&n.announcement.join()===I.announcement.join())||u.push(n)}),O.value=[...u.filter(n=>Date.now()-n.announceTime<1e4).sort((n,I)=>n.announceTime-I.announceTime)],k()}setInterval(z,3e4),B(O,z),z();function z(){O.value.filter(t=>t.announceTime-Date.now()<6e4&&t.status==="unscheduled").forEach(t=>{t.status!=="scheduled"&&(t.status="scheduled",setTimeout(()=>{t.status==="scheduled"&&(t.status="announcing",t.announcement.forEach(u=>{V.push({id:u})}))},t.announceTime-Date.now()))})}function d(t){return t<6e4?Math.floor(t/1e3)+" s":t<6e5?Math.floor(t/6e4)+":"+String(Math.floor(t%6e4/1e3)).padStart(2,"0")+" min":t<36e5?Math.floor(t/6e4)+" min":Math.floor(t/36e5)+":"+String(Math.floor(t%36e5/6e4)).padStart(2,"0")+" h"}function R(t){const u={start:"start",mainshow:"start hoofdfilm",credits:"aftiteling",end:"einde voorstelling"};let n=t.match(/^(auditorium)([0-9]+)$/);return u[t]?u[t]:n?`zaal ${Number(n[2])}`:t}function N(t){return t!=null&&t.toLowerCase().includes("rooftop")?"08":String(t==null?void 0:t.match(/\d+/)).padStart(2,"0")}return(t,u)=>{const n=pe,I=he,C=re,w=ve,F=_e,ee=xe,ne=me;return l(),f("div",Ie,[x(n),c("section",null,[c("div",ke,[a(p).table.length>0?(l(),f("div",Pe,[be,c("div",Ae,[(l(!0),f(G,null,X(O.value,e=>q((l(),f("div",{class:b(["film",{announcing:e.status==="announcing"}])},[c("div",Me,_(e.AUDITORIUM==="PULR 8"?"RT":e.AUDITORIUM.replace(/^\w+\s/,"")),1),c("div",Ce,_(e.title),1),c("div",$e,_(e.scheduledTime.toLocaleTimeString("nl-NL"))+" – "+_(e.endTime.toLocaleTimeString("nl-NL")),1),c("div",Oe,[(l(!0),f(G,null,X(e.extras,m=>(l(),S(I,{class:b({"translucent-white":!(e.announcementType==="start4dx"&&m==="4DX")})},{default:i(()=>[s(_(m),1)]),_:2},1032,["class"]))),256))]),c("div",{class:b(["announcement",e.announcement]),onDblclick:m=>e.announcement.forEach(H=>{a(V).push({id:H})}),style:{display:"grid","grid-template-columns":"64px 130px 1fr"}},[e.status==="announcing"?(l(),S(C,{key:0,fill:""},{default:i(()=>[s("graphic_eq")]),_:1})):e.announcementType==="start"?(l(),S(C,{key:1,fill:"",class:b({pulsate:e.status==="scheduled"})},{default:i(()=>[s("play_arrow")]),_:2},1032,["class"])):e.announcementType==="mainshow"?(l(),S(C,{key:2,fill:"",class:b({pulsate:e.status==="scheduled"})},{default:i(()=>[s("play_circle")]),_:2},1032,["class"])):e.announcementType==="credits"?(l(),S(C,{key:3,fill:"",class:b({pulsate:e.status==="scheduled"})},{default:i(()=>[s("stop_circle")]),_:2},1032,["class"])):e.announcementType==="end"?(l(),S(C,{key:4,fill:"",class:b({pulsate:e.status==="scheduled"})},{default:i(()=>[s("stop")]),_:2},1032,["class"])):(l(),S(C,{key:5,fill:""},{default:i(()=>[s("schedule")]),_:1})),c("div",null,_(e.announceTime.toLocaleTimeString("nl-NL"))+" ("+_(d(e.announceTime-T.value))+") ",1),c("div",{style:ie({opacity:e.status==="announcing"?1:.35})},[s(" '"),(l(!0),f(G,null,X(e.announcement,(m,H)=>{var Q;return q((l(),f("span",{class:b(["word",{announcing:e.announceTime<=T.value&&((Q=a(V)[0])==null?void 0:Q.id)===m}])},_(R(m))+_(H<e.announcement.length-1?" ":""),3)),[[J,m!=="chime"]])}),256)),s("' ")],4)],42,Le)],2)),[[J,T.value-e.announceTime<1e4]])),256))])])):$("",!0),c("div",Re,[x(a(ye),{themeColor:"#ffc426"},{default:i(()=>[x(a(W),{value:"Opties"},{default:i(()=>[x(w,{modelValue:a(P),"onUpdate:modelValue":u[0]||(u[0]=e=>A(P)?P.value=e:null),identifier:"announceStart"},{default:i(()=>[s(" 'Start' omroepen ")]),_:1},8,["modelValue"]),a(p).table.some(e=>{var m;return(m=e.AUDITORIUM)==null?void 0:m.includes("4DX")})?(l(),S(w,{key:0,modelValue:a(U),"onUpdate:modelValue":u[1]||(u[1]=e=>A(U)?U.value=e:null),identifier:"announcePlfStart"},{default:i(()=>[c("span",null,[s("'Start' "),a(P)?(l(),f("b",Ne,"extra")):$("",!0),s(" omroepen bij 4DX")])]),_:1},8,["modelValue"])):$("",!0),a(U)&&a(p).table.some(e=>{var m;return(m=e.AUDITORIUM)==null?void 0:m.includes("4DX")})?(l(),S(F,{key:1,modelValue:a(E),"onUpdate:modelValue":u[2]||(u[2]=e=>A(E)?E.value=e:null),modelModifiers:{number:!0},identifier:"announcePlfStartGracePeriod",min:"0",max:"30",unit:"min"},{default:i(()=>[s(" Voorlooptijd 'start' bij 4DX "),a(y)>0?(l(),f("div",we," De 4DX-inloop wordt "+_(a(E))+" min van tevoren omgeroepen. ",1)):$("",!0)]),_:1},8,["modelValue"])):$("",!0),x(w,{modelValue:a(g),"onUpdate:modelValue":u[3]||(u[3]=e=>A(g)?g.value=e:null),identifier:"announceMainShow"},{default:i(()=>[s(" 'Start hoofdfilm' omroepen ")]),_:1},8,["modelValue"]),x(w,{modelValue:a(v),"onUpdate:modelValue":u[4]||(u[4]=e=>A(v)?v.value=e:null),identifier:"announceCredits"},{default:i(()=>[s(" 'Aftiteling' omroepen ")]),_:1},8,["modelValue"]),a(v)?(l(),S(F,{key:2,modelValue:a(y),"onUpdate:modelValue":u[5]||(u[5]=e=>A(y)?y.value=e:null),modelModifiers:{number:!0},identifier:"announceCreditsGracePeriod",step:"15",min:"0",max:"240",unit:"s"},{default:i(()=>[s(" Voorlooptijd 'aftiteling' "),a(y)>0?(l(),f("div",Ge," De aftiteling wordt "+_(a(y))+" s van tevoren omgeroepen. ",1)):$("",!0)]),_:1},8,["modelValue"])):$("",!0),x(w,{modelValue:a(o),"onUpdate:modelValue":u[6]||(u[6]=e=>A(o)?o.value=e:null),identifier:"announceEnd"},{default:i(()=>[s(" 'Einde voorstelling' omroepen ")]),_:1},8,["modelValue"]),x(ee,{modelValue:a(D),"onUpdate:modelValue":u[7]||(u[7]=e=>A(D)?D.value=e:null),identifier:"voice"},{default:i(()=>[s("Naam stem")]),_:1},8,["modelValue"])]),_:1}),x(a(W),{value:"Handmatig"},{default:i(()=>[c("div",Xe,[(l(!0),f(G,null,X(Object.keys(r.rosetta.sprite),e=>(l(),S(ne,{onClick:m=>a(V).push({id:e})},{default:i(()=>[s(_(R(e)),1)]),_:2},1032,["onClick"]))),256))]),c("div",Be,[(l(!0),f(G,null,X(a(V),e=>(l(),f("div",null,[x(C,{fill:!0},{default:i(()=>[s("graphic_eq")]),_:1}),s(" "+_(R(e.id)),1)]))),256))])]),_:1})]),_:1})])])])])}}},Qe=Z(ze,[["__scopeId","data-v-6eb32ed7"]]);export{Qe as default};
