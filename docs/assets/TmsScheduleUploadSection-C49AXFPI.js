import{u as D,B as oe,v as J,r as O,H as se,D as R,I as ie,J as re,K as ae,L as ue,_ as k,y as U,z as q,o as w,c as b,d as g,a as G,i as K,A as le,t as X,f as ce,j as de,M as fe,N as pe,e as W,w as z,l as me,h as _e,q as he,s as ve}from"./index-2kY0IcGH.js";import{_ as ye}from"./super-vue3-tabs-D1fnRX46.js";function ge(e){return ie()?(re(e),!0):!1}function P(e){return typeof e=="function"?e():D(e)}const Y=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Se=Object.prototype.toString,we=e=>Se.call(e)==="[object Object]",F=()=>{},be=Ee();function Ee(){var e,t;return Y&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Te(e,t){function o(...n){return new Promise((u,l)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(u).catch(l)})}return o}const L=e=>e();function Ae(e=L){const t=O(!0);function o(){t.value=!1}function n(){t.value=!0}const u=(...l)=>{t.value&&e(...l)};return{isActive:se(t),pause:o,resume:n,eventFilter:u}}function De(e){return ae()}function Ie(e,t,o={}){const{eventFilter:n=L,...u}=o;return R(e,Te(n,t),u)}function Me(e,t,o={}){const{eventFilter:n,...u}=o,{eventFilter:l,pause:f,resume:c,isActive:_}=Ae(n);return{stop:Ie(e,t,{...u,eventFilter:l}),pause:f,resume:c,isActive:_}}function Oe(e,t=!0,o){De()?oe(e,o):t?e():J(e)}function I(e){var t;const o=P(e);return(t=o==null?void 0:o.$el)!=null?t:o}const V=Y?window:void 0;function M(...e){let t,o,n,u;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,n,u]=e,t=V):[t,o,n,u]=e,!t)return F;Array.isArray(o)||(o=[o]),Array.isArray(n)||(n=[n]);const l=[],f=()=>{l.forEach(m=>m()),l.length=0},c=(m,s,i,r)=>(m.addEventListener(s,i,r),()=>m.removeEventListener(s,i,r)),_=R(()=>[I(t),P(u)],([m,s])=>{if(f(),!m)return;const i=we(s)?{...s}:s;l.push(...o.flatMap(r=>n.map(d=>c(m,r,d,i))))},{immediate:!0,flush:"post"}),h=()=>{_(),f()};return ge(h),h}let B=!1;function et(e,t,o={}){const{window:n=V,ignore:u=[],capture:l=!0,detectIframe:f=!1}=o;if(!n)return F;be&&!B&&(B=!0,Array.from(n.document.body.children).forEach(i=>i.addEventListener("click",F)),n.document.documentElement.addEventListener("click",F));let c=!0;const _=i=>u.some(r=>{if(typeof r=="string")return Array.from(n.document.querySelectorAll(r)).some(d=>d===i.target||i.composedPath().includes(d));{const d=I(r);return d&&(i.target===d||i.composedPath().includes(d))}}),m=[M(n,"click",i=>{const r=I(e);if(!(!r||r===i.target||i.composedPath().includes(r))){if(i.detail===0&&(c=!_(i)),!c){c=!0;return}t(i)}},{passive:!0,capture:l}),M(n,"pointerdown",i=>{const r=I(e);c=!_(i)&&!!(r&&!i.composedPath().includes(r))},{passive:!0}),f&&M(n,"blur",i=>{setTimeout(()=>{var r;const d=I(e);((r=n.document.activeElement)==null?void 0:r.tagName)==="IFRAME"&&!(d!=null&&d.contains(n.document.activeElement))&&t(i)},0)})].filter(Boolean);return()=>m.forEach(i=>i())}const N=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},C="__vueuse_ssr_handlers__",xe=Ne();function Ne(){return C in N||(N[C]=N[C]||{}),N[C]}function Ce(e,t){return xe[e]||t}function Fe(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Ve={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},H="vueuse-storage";function tt(e,t,o,n={}){var u;const{flush:l="pre",deep:f=!0,listenToStorageChanges:c=!0,writeDefaults:_=!0,mergeDefaults:h=!1,shallow:m,window:s=V,eventFilter:i,onError:r=a=>{console.error(a)},initOnMounted:d}=n,v=(m?ue:O)(typeof t=="function"?t():t);if(!o)try{o=Ce("getDefaultStorage",()=>{var a;return(a=V)==null?void 0:a.localStorage})()}catch(a){r(a)}if(!o)return v;const y=P(t),E=Fe(y),T=(u=n.serializer)!=null?u:Ve[E],{pause:Q,resume:$}=Me(v,()=>ee(v.value),{flush:l,deep:f,eventFilter:i});s&&c&&Oe(()=>{M(s,"storage",x),M(s,H,ne),d&&x()}),d||x();function j(a,p){s&&s.dispatchEvent(new CustomEvent(H,{detail:{key:e,oldValue:a,newValue:p,storageArea:o}}))}function ee(a){try{const p=o.getItem(e);if(a==null)j(p,null),o.removeItem(e);else{const S=T.write(a);p!==S&&(o.setItem(e,S),j(p,S))}}catch(p){r(p)}}function te(a){const p=a?a.newValue:o.getItem(e);if(p==null)return _&&y!=null&&o.setItem(e,T.write(y)),y;if(!a&&h){const S=T.read(p);return typeof h=="function"?h(S,y):E==="object"&&!Array.isArray(S)?{...y,...S}:S}else return typeof p!="string"?p:T.read(p)}function x(a){if(!(a&&a.storageArea!==o)){if(a&&a.key==null){v.value=y;return}if(!(a&&a.key!==e)){Q();try{(a==null?void 0:a.newValue)!==T.write(v.value)&&(v.value=te(a))}catch(p){r(p)}finally{a?J($):$()}}}}function ne(a){x(a.detail)}return v}const ke=["for"],Pe={class:"title"},$e=["id"],je={key:0,class:"unit"},We={__name:"InputNumber",props:U(["unit","identifier"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=q(e,"modelValue");return(o,n)=>(w(),b("label",{class:"input",for:e.identifier},[g("div",Pe,[G(o.$slots,"default",{},void 0,!0)]),g("div",{class:de(["input",{"has-unit":!!e.unit}])},[K(g("input",{type:"number",inputmode:"numeric",pattern:"[0-9]+",name:"",id:e.identifier,"onUpdate:modelValue":n[0]||(n[0]=u=>t.value=u)},null,8,$e),[[le,t.value,void 0,{number:!0}]]),e.unit?(w(),b("span",je,X(e.unit),1)):ce("",!0)],2)],8,ke))}},nt=k(We,[["__scopeId","data-v-968ea2d9"]]),ze=["for"],Be={class:"title"},He=["id"],Je={__name:"InputCheckbox",props:U(["identifier"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=q(e,"modelValue");return(o,n)=>(w(),b("label",{class:"input",for:e.identifier},[g("div",Be,[G(o.$slots,"default",{},void 0,!0)]),K(g("input",{type:"checkbox",name:"",id:e.identifier,"onUpdate:modelValue":n[0]||(n[0]=u=>t.value=u)},null,8,He),[[fe,t.value]])],8,ze))}},ot=k(Je,[["__scopeId","data-v-5ba32597"]]),Re=pe("tmsSchedule",()=>{const e=O([]),t=O({});async function o(n){var h,m;if(!(((h=n==null?void 0:n[0])==null?void 0:h.type)==="text/csv"||((m=n==null?void 0:n[0])==null?void 0:m.type)==="application/vnd.ms-excel"))return;const l=(await n[0].text()).split(`
`);let f=[];const c=l[0].split(",");for(var _=0;_<l.length;_++){const s=l[_].split(",");let i={};for(let r=0;r<s.length;r++)i[c[r].trim()]=s[r].trim();f.push(i)}f=f.map((s,i)=>{var r,d,v,y,E;return i===0||(s.extra=(v=(d=(r=s.PLAYLIST)==null?void 0:r.match(/(\s((4DX)|(ATMOS)|(IMX)|(3D)|(Music)|(ROOFTOP)|(PrideNight)|(Ladies)|(Premiere)|(\([A-Z]+\))))+/))==null?void 0:d[0])==null?void 0:v.slice(1),s.extras=(y=s.extra)==null?void 0:y.split(" "),s.title=(E=s.PLAYLIST)==null?void 0:E.replace(s.extra,""),s.scheduledTime=A(s.SCHEDULED_TIME),s.showTime=A(s.SHOW_TIME),s.featureTime=A(s.FEATURE_TIME),s.creditsTime=A(s.CREDITS_TIME),s.endTime=A(s.END_TIME)),s}),e.value=f,t.value={name:n[0].name,type:n[0].type,lastModified:n[0].lastModified,size:n[0].size}}return{table:e,metadata:t,addFiles:o}});function A(e){let t=new Date;t.getHours()<6&&t.setDate(t.getDate()-1);let o=new Date(t.toDateString()+" "+e);return o.getHours()<6&&o.setDate(o.getDate()+1),o}const Z=e=>(he("data-v-2e892687"),e=e(),ve(),e),Ue={id:"upload"},qe=Z(()=>g("h2",null,"Bestand uploaden",-1)),Ge={key:0},Ke={key:1},Xe={key:2},Ye=Z(()=>g("div",{class:"small"},"CSV-bestand uit RosettaBridge (met optie 'times only')",-1)),Le={__name:"TmsScheduleUploadSection",setup(e){const t=Re(),o=O(null);return(n,u)=>{const l=_e,f=ye;return w(),b("section",Ue,[qe,W(f,{id:"drop-zone",onFilesDropped:D(t).addFiles,onClick:u[0]||(u[0]=c=>o.value.click()),style:{cursor:"pointer"}},{default:z(({dropZoneActive:c})=>[g("div",null,[c?(w(),b("div",Ge,"Laat los om te uploaden")):D(t).metadata.name?(w(),b("div",Ke,X(D(t).metadata.name),1)):(w(),b("div",Xe,"Sleep een bestand hierheen")),Ye]),W(l,{"data-active":c},{default:z(()=>[me("Bladeren...")]),_:2},1032,["data-active"])]),_:1},8,["onFilesDropped"]),g("input",{type:"file",ref_key:"fileInput",ref:o,accept:"text/csv,.csv",style:{display:"none"},onChange:u[1]||(u[1]=c=>D(t).addFiles(c.target.files))},null,544)])}}},st=k(Le,[["__scopeId","data-v-2e892687"]]);export{st as _,Re as a,ot as b,nt as c,et as o,tt as u};
