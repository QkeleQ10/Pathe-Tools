import{_ as b,z as V,A as $,o as p,c as _,d as i,a as B,j as F,I as O,J as P,r as S,e as E,w as k,u as h,g as j,m as A,i as N,s as z,v as H}from"./index-1Z8fdBEh.js";import{a as R}from"./super-vue3-tabs-DyzpeKrH.js";const U=["for"],W={class:"title"},X=["id"],Y={__name:"InputCheckbox",props:V(["identifier"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const a=$(n,"modelValue");return(s,t)=>(p(),_("label",{class:"input",for:n.identifier},[i("div",W,[B(s.$slots,"default",{},void 0,!0)]),F(i("input",{type:"checkbox",name:"",id:n.identifier,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value=o)},null,8,X),[[O,a.value]])],8,U))}},ae=b(Y,[["__scopeId","data-v-53312ab6"]]),J=P("tmsSchedule",()=>{const n=S([]),a=S({});async function s(t){var T,D,g,x;if(!(((T=t==null?void 0:t[0])==null?void 0:T.type)==="text/csv"||((D=t==null?void 0:t[0])==null?void 0:D.type)==="application/vnd.ms-excel"||(x=(g=t==null?void 0:t[0])==null?void 0:g.name)!=null&&x.endsWith(".csv")))return;const u=(await t[0].text()).split(`
`);let l=[];const d=u[0].split(",");for(var v=0;v<u.length;v++){const e=u[v].split(",");let m={};for(let c=0;c<e.length;c++)m[d[c].trim()]=e[c].trim();l.push(m)}l=l.map((e,m)=>{var c,I,f,y,M;return m===0||(e.extra=(f=(I=(c=e.PLAYLIST)==null?void 0:c.match(/(\s((4DX)|(ATMOS)|(IMX)|(3D)|(Music)|(ROOFTOP)|(PrideNight)|(Ladies)|(Premiere)|(\([A-Z]+\))))+/))==null?void 0:I[0])==null?void 0:f.slice(1),e.extras=(y=e.extra)==null?void 0:y.split(" "),e.title=(M=e.PLAYLIST)==null?void 0:M.replace(e.extra,""),e.scheduledTime=r(e.SCHEDULED_TIME),e.showTime=r(e.SHOW_TIME),e.featureTime=r(e.FEATURE_TIME),e.creditsTime=r(e.CREDITS_TIME),e.endTime=r(e.END_TIME)),e}),n.value=l,a.value={name:t[0].name,type:t[0].type,lastModified:t[0].lastModified,size:t[0].size}}return{table:n,metadata:a,addFiles:s}});function r(n){let a=new Date;a.getHours()<6&&a.setDate(a.getDate()-1);let s=new Date(a.toDateString()+" "+n);return s.getHours()<6&&s.setDate(s.getDate()+1),s}const C=n=>(z("data-v-2e892687"),n=n(),H(),n),Z={id:"upload"},q=C(()=>i("h2",null,"Bestand uploaden",-1)),G={key:0},K={key:1},Q={key:2},w=C(()=>i("div",{class:"small"},"CSV-bestand uit RosettaBridge (met optie 'times only')",-1)),L={__name:"TmsScheduleUploadSection",setup(n){const a=J(),s=S(null);return(t,o)=>{const u=N,l=R;return p(),_("section",Z,[q,E(l,{id:"drop-zone",onFilesDropped:h(a).addFiles,onClick:o[0]||(o[0]=d=>s.value.click()),style:{cursor:"pointer"}},{default:k(({dropZoneActive:d})=>[i("div",null,[d?(p(),_("div",G,"Laat los om te uploaden")):h(a).metadata.name?(p(),_("div",K,j(h(a).metadata.name),1)):(p(),_("div",Q,"Sleep een bestand hierheen")),w]),E(u,{"data-active":d},{default:k(()=>[A("Bladeren...")]),_:2},1032,["data-active"])]),_:1},8,["onFilesDropped"]),i("input",{type:"file",ref_key:"fileInput",ref:s,accept:"text/csv,.csv",style:{display:"none"},onChange:o[1]||(o[1]=d=>h(a).addFiles(d.target.files))},null,544)])}}},ne=b(L,[["__scopeId","data-v-2e892687"]]);export{ne as _,ae as a,J as u};
