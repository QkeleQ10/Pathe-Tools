const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/howler-BXccDGgb.js","assets/_commonjsHelpers-C4iS2aBk.js"])))=>i.map(i=>d[i]);
import{_ as Y,y as ne,z as te,o as s,c as v,d,a as ae,i as z,A as ue,r as w,B as oe,C as ie,u as a,D as G,E as Q,e as V,F as O,g as R,f as M,w as m,x as K,j as L,t as p,m as N,l as r,p as b,q as le,s as se,G as de,h as re}from"./index-2kY0IcGH.js";import{a as ce,u as A,_ as me,b as fe,c as pe}from"./TmsScheduleUploadSection-C49AXFPI.js";import{_ as ve}from"./Chip-r9SCBbUu.js";import{C as J,x as _e}from"./super-vue3-tabs-D1fnRX46.js";const he=["for"],ge={class:"title"},Te=["id"],ye={__name:"InputText",props:ne(["identifier"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(g){const _=te(g,"modelValue");return(T,I)=>(s(),v("label",{class:"input",for:g.identifier},[d("div",ge,[ae(T.$slots,"default",{},void 0,!0)]),z(d("input",{type:"text",inputmode:"numeric",pattern:"[0-9]+",name:"",id:g.identifier,"onUpdate:modelValue":I[0]||(I[0]=x=>_.value=x)},null,8,Te),[[ue,_.value,void 0,{number:!0}]])],8,he))}},Se=Y(ye,[["__scopeId","data-v-a93f9514"]]);function W(g,{volume:_=1,playbackRate:T=1,soundEnabled:I=!0,interrupt:x=!1,autoplay:P=!1,onload:U,...E}={}){const S=w(null),h=w(!1),y=w(null),o=w(null);function c(){var l;typeof U=="function"&&U.call(this),y.value=(y.value||((l=o.value)==null?void 0:l.duration())||0)*1e3,P===!0&&(h.value=!0)}return oe(async()=>{const l=await ie(()=>import("./howler-BXccDGgb.js").then(C=>C.h),__vite__mapDeps([0,1]));S.value=l.default.Howl,o.value=new S.value({src:a(g),volume:a(_),rate:a(T),onload:c,...E})}),G(()=>[g],()=>{S.value&&S.value&&o&&o.value&&(o.value=new S.value({src:a(g),volume:a(_),rate:a(T),onload:c,...E}))}),G(()=>[a(_),a(T)],()=>{o.value&&(o.value.volume(a(_)),o.value.rate(a(T)))}),{play:l=>{typeof l>"u"&&(l={}),!(!o.value||!I&&!l.forceSoundEnabled)&&(x&&o.value.stop(),l.playbackRate&&o.value.rate(l.playbackRate),o.value.play(l.id),o.value.once("end",()=>{o.value&&o.value&&!o.value.playing()&&(h.value=!1)}),h.value=!0)},sound:o,isPlaying:h,duration:y,pause:l=>{o.value&&(o.value.pause(typeof l=="number"?l:void 0),h.value=!1)},stop:l=>{o.value&&(o.value.stop(typeof l=="number"?l:void 0),h.value=!1)}}}const Ve="/Pathe-Tools/assets/rosetta-DA6vQKhk.ogg",De="/Pathe-Tools/assets/gerwim-hi7crA_V.ogg",xe=g=>(le("data-v-edb64598"),g=g(),se(),g),Ue={class:"container dark"},Ee={class:"flex",style:{"flex-wrap":"wrap"}},Ie={key:0,style:{flex:"50% 1 1"}},Pe=xe(()=>d("h2",null,"Geplande omroepen",-1)),be={id:"upcoming-announcements",class:"flex",style:{"flex-direction":"column",gap:"8px"}},Ae={class:"room"},Me={class:"title"},ke={class:"time"},we={class:"flex chips"},Ce=["onDblclick"],$e={id:"parameters",style:{flex:"229px 1 1"}},Oe={key:0},Re={key:0,class:"small"},Le={key:0,class:"small"},Ne={class:"flex",style:{"flex-wrap":"wrap",gap:"8px","margin-top":"-4px"}},Ge={class:"queue"},Xe={__name:"AnnouncerView",setup(g){const _=ce(),T=w(()=>new Date);setInterval(I,1e3),I();function I(){T.value=new Date}const x=A("announcement-voice","rosetta"),P=A("announce-start",!1),U=A("announce-plf-start",!0),E=A("announce-plf-start-grace-period",15),S=A("announce-main-show",!1),h=A("announce-credits",!0),y=A("announce-credits-grace-period",60),o=A("announce-end",!1),c=Q({rosetta:{sprite:{auditorium01:[0,1201.6326530612246],auditorium02:[3e3,1332.2448979591836],auditorium03:[6e3,1332.2448979591836],auditorium04:[9e3,1384.489795918368],auditorium05:[12e3,1436.7346938775504],auditorium06:[15e3,1436.7346938775504],auditorium07:[18e3,1515.102040816327],auditorium08:[21e3,1515.102040816327],auditorium09:[24e3,1488.9795918367347],auditorium10:[27e3,1306.1224489795932],auditorium11:[3e4,1462.8571428571427],auditorium12:[33e3,1515.1020408163233],auditorium13:[36e3,1488.9795918367383],auditorium14:[39e3,1488.9795918367383],auditorium15:[42e3,1567.3469387755076],auditorium16:[45e3,1488.9795918367383],auditorium17:[48e3,1515.1020408163233],auditorium18:[51e3,1462.8571428571463],auditorium19:[54e3,1724.0816326530605],auditorium20:[57e3,1593.4693877551],chime:[6e4,3084.51247165533],credits:[65e3,1501.6099773242645],end:[68e3,1563.7868480725672],mainshow:[71e3,1793.3333333333367],start:[74e3,989.9092970521508]}},gerwim:{sprite:{auditorium01:[0,824.9659863945578],auditorium02:[2e3,870.9070294784577],auditorium03:[4e3,790.2040816326528],auditorium04:[6e3,886.8253968253965],auditorium05:[8e3,838.5260770975051],auditorium06:[1e4,866.757369614513],auditorium07:[12e3,987.7777777777776],auditorium08:[14e3,665.6689342403635],credits:[16e3,936.5532879818588],start:[18e3,638.9342403628114]}}});({play:c.rosetta.play,isPlaying:c.rosetta.isPlaying}=W(Ve,{sprite:c.rosetta.sprite,preload:!0,onplay:async()=>{document.dispatchEvent(new Event("announcerSoundPlay"))},onend:async()=>{document.dispatchEvent(new Event("announcerSoundEnd"))}})),{play:c.gerwim.play,isPlaying:c.gerwim.isPlaying}=W(De,{sprite:c.gerwim.sprite,preload:!0,onplay:async()=>{document.dispatchEvent(new Event("announcerSoundPlay"))},onend:async()=>{document.dispatchEvent(new Event("announcerSoundEnd"))}});let D=Q([]);G(D,async t=>{var u;if(t[0]&&!c.rosetta.sprite[t[0].id]&&D.shift(),t[0]&&!Object.values(c).some(e=>e.isPlaying)){const e=D[0];(u=c[x.value])!=null&&u.sprite[e.id]?c[x.value].play(e):c.rosetta.play(e),document.addEventListener("announcerSoundEnd",()=>{D.shift()},{once:!0})}},{deep:!0});const k=w([]);G([_,P,U,E,S,h,y,o],([t])=>B(t)),B(_);function B(t){let u=[];P.value&&t.table.forEach(e=>{var i;e.scheduledTime&&u.push({announceTime:e.scheduledTime,announcement:["chime","start",`auditorium${String((i=e.AUDITORIUM)==null?void 0:i.match(/\d+/)).padStart(2,"0")}`],status:"unscheduled",...e})}),U.value&&t.table.filter(e=>{var i;return(i=e.AUDITORIUM)==null?void 0:i.includes("4DX")}).forEach(e=>{var i;e.scheduledTime&&u.push({announceTime:new Date(e.scheduledTime.getTime()-E.value*6e4),announcement:["chime","start",`auditorium${String((i=e.AUDITORIUM)==null?void 0:i.match(/\d+/)).padStart(2,"0")}`],status:"unscheduled",...e})}),S.value&&t.table.forEach(e=>{var i;e.scheduledTime&&u.push({announceTime:e.featureTime,announcement:["chime","mainshow",`auditorium${String((i=e.AUDITORIUM)==null?void 0:i.match(/\d+/)).padStart(2,"0")}`],status:"unscheduled",...e})}),h.value&&t.table.forEach(e=>{var i;e.creditsTime&&u.push({announceTime:new Date(e.creditsTime.getTime()-y.value*1e3),announcement:["chime","credits",`auditorium${String((i=e.AUDITORIUM)==null?void 0:i.match(/\d+/)).padStart(2,"0")}`],status:"unscheduled",...e})}),o.value&&t.table.forEach(e=>{var i;e.scheduledTime&&u.push({announceTime:e.endTime,announcement:["chime","end",`auditorium${String((i=e.AUDITORIUM)==null?void 0:i.match(/\d+/)).padStart(2,"0")}`],status:"unscheduled",...e})}),k.value=[...k.value.filter(e=>e.status==="scheduled"),...u.filter(e=>e.announceTime>=Date.now()).sort((e,i)=>e.announceTime-i.announceTime)],I()}setInterval(X,3e4),G(k,X),X();function X(){k.value.filter(t=>t.announceTime-Date.now()<6e4&&t.status==="unscheduled").forEach(t=>{t.status="scheduled",setTimeout(()=>{t.status!=="unscheduled"&&(t.status="announcing",t.announcement.forEach(u=>{D.push({id:u})}))},t.announceTime-Date.now())})}function l(t){return t<6e4?Math.floor(t/1e3)+" s":t<6e5?Math.floor(t/6e4)+":"+String(Math.floor(t%6e4/1e3)).padStart(2,"0")+" min":t<36e5?Math.floor(t/6e4)+" min":Math.floor(t/36e5)+":"+String(Math.floor(t%36e5/6e4)).padStart(2,"0")+" h"}function C(t){const u={start:"start",mainshow:"start hoofdfilm",credits:"aftiteling",end:"einde voorstelling"};let e=t.match(/^(auditorium)([0-9]+)$/);return u[t]?u[t]:e?`zaal ${Number(e[2])}`:t}return(t,u)=>{const e=me,i=ve,H=de,$=fe,q=pe,Z=Se,ee=re;return s(),v("div",Ue,[V(e),d("section",null,[d("div",Ee,[a(_).table.length>0?(s(),v("div",Ie,[Pe,d("div",be,[(s(!0),v(O,null,R(k.value,n=>z((s(),v("div",{class:L(["film",{announcing:n.status==="announcing"}])},[d("div",Ae,p(n.AUDITORIUM==="PULR 8"?"RT":n.AUDITORIUM.replace(/^\w+\s/,"")),1),d("div",Me,p(n.title),1),d("div",ke,p(n.scheduledTime.toLocaleTimeString("nl-NL"))+" – "+p(n.endTime.toLocaleTimeString("nl-NL")),1),d("div",we,[(s(!0),v(O,null,R(n.extras,f=>(s(),N(i,{class:L({"translucent-white":!(f==="4DX"&&n.announcement.includes("start"))})},{default:m(()=>[r(p(f),1)]),_:2},1032,["class"]))),256))]),d("div",{class:L(["announcement",n.announcement]),onDblclick:f=>n.announcement.forEach(j=>{a(D).push({id:j})}),style:{display:"grid","grid-template-columns":"64px 130px 1fr"}},[V(H,{style:{"justify-self":"center",opacity:"0.5"},class:L({pulsate:n.status==="scheduled"})},{default:m(()=>[r(p(n.announceTime<=T.value?"graphic_eq":"schedule"),1)]),_:2},1032,["class"]),d("div",null,p(n.announceTime.toLocaleTimeString("nl-NL"))+" ("+p(l(n.announceTime-T.value))+") ",1),d("div",null,[r(" '"),(s(!0),v(O,null,R(n.announcement,(f,j)=>{var F;return z((s(),v("span",{class:L(["word",{announcing:n.announceTime<=T.value&&((F=a(D)[0])==null?void 0:F.id)===f}])},p(C(f))+p(j<n.announcement.length-1?" ":""),3)),[[K,f!=="chime"]])}),256)),r("' ")])],42,Ce)],2)),[[K,T.value-n.announceTime<1e4]])),256))])])):M("",!0),d("div",$e,[V(a(_e),{themeColor:"#ffc426"},{default:m(()=>[V(a(J),{value:"Opties"},{default:m(()=>[V($,{modelValue:a(P),"onUpdate:modelValue":u[0]||(u[0]=n=>b(P)?P.value=n:null),identifier:"announceStart"},{default:m(()=>[r(" 'Start' omroepen ")]),_:1},8,["modelValue"]),a(_).table.some(n=>{var f;return(f=n.AUDITORIUM)==null?void 0:f.includes("4DX")})?(s(),N($,{key:0,modelValue:a(U),"onUpdate:modelValue":u[1]||(u[1]=n=>b(U)?U.value=n:null),identifier:"announcePlfStart"},{default:m(()=>[d("span",null,[r("'Start' "),a(P)?(s(),v("b",Oe,"extra")):M("",!0),r(" omroepen bij 4DX")])]),_:1},8,["modelValue"])):M("",!0),a(U)&&a(_).table.some(n=>{var f;return(f=n.AUDITORIUM)==null?void 0:f.includes("4DX")})?(s(),N(q,{key:1,modelValue:a(E),"onUpdate:modelValue":u[2]||(u[2]=n=>b(E)?E.value=n:null),modelModifiers:{number:!0},identifier:"announcePlfStartGracePeriod",min:"0",max:"30",unit:"min"},{default:m(()=>[r(" Voorlooptijd 'start' bij 4DX "),a(y)>0?(s(),v("div",Re," De 4DX-inloop wordt "+p(a(E))+" min van tevoren omgeroepen. ",1)):M("",!0)]),_:1},8,["modelValue"])):M("",!0),V($,{modelValue:a(S),"onUpdate:modelValue":u[3]||(u[3]=n=>b(S)?S.value=n:null),identifier:"announceMainShow"},{default:m(()=>[r(" 'Start hoofdfilm' omroepen ")]),_:1},8,["modelValue"]),V($,{modelValue:a(h),"onUpdate:modelValue":u[4]||(u[4]=n=>b(h)?h.value=n:null),identifier:"announceCredits"},{default:m(()=>[r(" 'Aftiteling' omroepen ")]),_:1},8,["modelValue"]),a(h)?(s(),N(q,{key:2,modelValue:a(y),"onUpdate:modelValue":u[5]||(u[5]=n=>b(y)?y.value=n:null),modelModifiers:{number:!0},identifier:"announceCreditsGracePeriod",step:"15",min:"0",max:"240",unit:"s"},{default:m(()=>[r(" Voorlooptijd 'aftiteling' "),a(y)>0?(s(),v("div",Le," De aftiteling wordt "+p(a(y))+" s van tevoren omgeroepen. ",1)):M("",!0)]),_:1},8,["modelValue"])):M("",!0),V($,{modelValue:a(o),"onUpdate:modelValue":u[6]||(u[6]=n=>b(o)?o.value=n:null),identifier:"announceEnd"},{default:m(()=>[r(" 'Einde voorstelling' omroepen ")]),_:1},8,["modelValue"]),V(Z,{modelValue:a(x),"onUpdate:modelValue":u[7]||(u[7]=n=>b(x)?x.value=n:null),identifier:"voice"},{default:m(()=>[r("Naam stem")]),_:1},8,["modelValue"])]),_:1}),V(a(J),{value:"Handmatig"},{default:m(()=>[d("div",Ne,[(s(!0),v(O,null,R(Object.keys(c.rosetta.sprite),n=>(s(),N(ee,{onClick:f=>a(D).push({id:n})},{default:m(()=>[r(p(C(n)),1)]),_:2},1032,["onClick"]))),256))]),d("div",Ge,[(s(!0),v(O,null,R(a(D),n=>(s(),v("div",null,[V(H,{fill:!0},{default:m(()=>[r("graphic_eq")]),_:1}),r(" "+p(C(n.id)),1)]))),256))])]),_:1})]),_:1})])])])])}}},qe=Y(Xe,[["__scopeId","data-v-edb64598"]]);export{qe as default};
