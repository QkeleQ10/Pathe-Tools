var Re=Object.defineProperty;var He=(S,l,i)=>l in S?Re(S,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):S[l]=i;var V=(S,l,i)=>He(S,typeof l!="symbol"?l+"":l,i);import{a as Me,_ as Ie,u as Fe}from"./server-BVGr8SwU.js";import{d as be,A as Le,B as ze,e as O,c as w,o as y,b as n,a as Pe,_ as Te,r as $,x as qe,H as We,I as Oe,q as he,h as H,g as d,w as p,l as g,u as z,p as xe,y as Ee,C as Ze,F as j,k as A,j as N,f as M,J as Ge,K as Ke,s as R,n as ue,i as Je}from"./index-DdomZHAx.js";import{b as Se,c as we,_ as Xe,a as Ye}from"./FileUploadBlock-D86B-yMi.js";import{u as Ce,a as Qe,_ as et}from"./TimetableUploadSection-DJoeHRt4.js";import"./nl-caJ4bii2.js";const tt=["for"],nt={class:"title"},lt={class:"input"},ot=["id","disabled","value"],st=be({__name:"InputTime",props:Le({identifier:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(S){const l=ze(S,"modelValue"),i=O({get(){return l.value?l.value.getHours().toString().padStart(2,"0")+":"+l.value.getMinutes().toString().padStart(2,"0"):""},set(r){const[a,f]=r.split(":").map(Number);if(isNaN(a)||isNaN(f))return;const k=new Date(l.value||Date.now());k.setHours(a,f,0,0),l.value=k}});return(r,a)=>(y(),w("label",{class:"input time-input",for:r.identifier},[n("div",nt,[Pe(r.$slots,"default",{},void 0,!0)]),n("div",lt,[n("input",{type:"time",id:r.identifier,disabled:r.disabled,value:i.value,onBlur:a[0]||(a[0]=f=>i.value=f.target.value)},null,40,ot)])],8,tt))}}),it=Te(st,[["__scopeId","data-v-b16943c1"]]);class de{constructor(l=65535,i=65535,r){V(this,"packet");let a;if(r instanceof Uint8Array)a=r;else if(Array.isArray(r)){a=new Uint8Array(r.reduce((u,x)=>u+x.messageBody.length,0));let _=0;for(const u of r)a.set(u.messageBody,_),_+=u.messageBody.length}else a=r.messageBody;const f=new Uint8Array(9);f.set([170,187,l>>8,l&255,i>>8,i&255,a.length>>8,a.length&255,l>>8^l&255^i>>8^i&255^a.length>>8^a.length&255]);const k=new Uint8Array(1);k.set([a.reduce((_,u)=>_^u,0)]),this.packet=new Uint8Array(f.length+a.length+k.length),this.packet.set(f),this.packet.set(a,f.length),this.packet.set(k,f.length+a.length)}toString(){return Array.from(this.packet).map(l=>l.toString(16).padStart(2,"0")).join(" ").toUpperCase()}}class ve{constructor(){V(this,"messageBody")}}V(ve,"functionCode",0);class ce extends ve{constructor(l){super();let i;if(l instanceof Uint8Array)i=l;else if(Array.isArray(l)){i=new Uint8Array(l.reduce((f,k)=>f+k.messageBody.length,0));let a=0;for(const f of l)i.set(f.messageBody,a),a+=f.messageBody.length}else i=l.messageBody;const r=new Uint8Array(1+i.length);r.set([this.constructor.functionCode]),r.set(i,1),this.messageBody=r}}V(ce,"functionCode",0);class Ve extends ve{constructor(l){super();const i=new Uint8Array(8);i.set([this.constructor.functionCode]),i.set([l.getFullYear()-2e3,l.getMonth()+1,l.getDate(),l.getDay(),l.getHours(),l.getMinutes(),l.getSeconds()],1),this.messageBody=i}}V(Ve,"functionCode",1);class I{constructor(){V(this,"messageBody")}}V(I,"commandCode",0);const J=class J extends I{constructor(){super();const l=new Uint8Array(1);l.set([J.commandCode]),this.messageBody=l}};V(J,"commandCode",1);let Z=J;const X=class X extends I{constructor(l=0,i=3,r=0,a=0,f=0,k){super();const _=$e(k),u=new Uint8Array(6+_.length+1);u.set([X.commandCode]),u.set([l,i,r,a,f],1),u.set(_,6),u.set([0],u.length-1),this.messageBody=u}};V(X,"commandCode",3);let me=X;const Y=class Y extends I{constructor(l=2,i=0,r=3,a=0,f=55,k=0){super();const _=new Uint8Array(7);_.set([Y.commandCode]),_.set([l,i,r,a,f,k],1),this.messageBody=_}};V(Y,"commandCode",4);let pe=Y;const Q=class Q extends I{constructor(l=0,i=0,r=9){super();const a=new Uint8Array(5);a.set([Q.commandCode]),a.set([l>>8,l&255,i,r],1),this.messageBody=a}};V(Q,"commandCode",7);let G=Q;const ee=class ee extends I{constructor(l=0,i=4,r=0,a=3,f=0,k=0,_=0,u){super();const x=$e(u),h=new Uint8Array(8+x.length+1);h.set([ee.commandCode]),h.set([l,i,r,a,f,k,_],1),h.set(x,8),h.set([0],h.length-1),this.messageBody=h}};V(ee,"commandCode",8);let fe=ee;const te=class te extends I{constructor(){super();const l=new Uint8Array(1);l.set([te.commandCode]),this.messageBody=l}};V(te,"commandCode",31);let K=te;const ge={"":0,"":1,"":2,"":3,"":4,"":5,"":6,"\x07":7,"\b":8,"	":9,"\n":10,"\v":11,"\f":12,"\r":13,"":14,"":15,"":16,"":17,"":18,"":19,"":20,"":21,"":22,"":23,"":24,"":25,"":26,"\x1B":27,"":28,"":29,"":30,"":31," ":32,"!":33,'"':34,"#":35,$:36,"%":37,"&":38,"'":39,"(":40,")":41,"*":42,"+":43,",":44,"-":45,".":46,"/":47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,";":59,"<":60,"=":61,">":62,"?":63,"@":64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,"[":91,"\\":92,"]":93,"^":94,_:95,"`":96,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,"{":123,"|":124,"}":125,"~":126,"":127,"Â€":128,"Â":129,"Â‚":130,"Âƒ":131,"Â„":132,"Â…":133,"Â†":134,"Â‡":135,"Âˆ":136,"Â‰":137,"ÂŠ":138,"Â‹":139,"ÂŒ":140,"Â":141,"ÂŽ":142,"Â":143,"Â":144,"Â‘":145,"Â’":146,"Â“":147,"Â”":148,"Â•":149,"Â–":150,"Â—":151,"Â˜":152,"Â™":153,"Âš":154,"Â›":155,"Âœ":156,"Â":157,"Âž":158,"ÂŸ":159,"Â ":160,"Â¡":161,"Â¢":162,"Â£":163,"Â¤":164,"Â¥":165,"Â¦":166,"Â§":167,"Â¨":168,"Â©":169,Âª:170,"Â«":171,"Â¬":172,"Â­":173,"Â®":174,"Â¯":175,"Â°":176,"Â±":177,"Â²":178,"Â³":179,"Â´":180,Âµ:181,"Â¶":182,"Â·":183,"Â¸":184,"Â¹":185,Âº:186,"Â»":187,"Â¼":188,"Â½":189,"Â¾":190,"Â¿":191,Ã€:192,Ã:193,Ã‚:194,Ãƒ:195,Ã„:196,Ã…:197,Ã†:198,Ã‡:199,Ãˆ:200,Ã‰:201,ÃŠ:202,Ã‹:203,ÃŒ:204,Ã:205,ÃŽ:206,Ã:207,Ã:208,Ã‘:209,Ã’:210,Ã“:211,Ã”:212,Ã•:213,Ã–:214,"Ã—":215,Ã˜:216,Ã™:217,Ãš:218,Ã›:219,Ãœ:220,Ã:221,Ãž:222,ÃŸ:223,Ã :224,Ã¡:225,Ã¢:226,Ã£:227,Ã¤:228,Ã¥:229,Ã¦:230,Ã§:231,Ã¨:232,Ã©:233,Ãª:234,Ã«:235,Ã¬:236,Ã­:237,Ã®:238,Ã¯:239,Ã°:240,Ã±:241,Ã²:242,Ã³:243,Ã´:244,Ãµ:245,Ã¶:246,"Ã·":247,Ã¸:248,Ã¹:249,Ãº:250,Ã»:251,Ã¼:252,Ã½:253,Ã¾:254,Ã¿:255};function $e(S){const l=S.split("").reduce((i,r)=>(ge.hasOwnProperty(r)&&i.push(ge[r]),i),[]);return new Uint8Array(l)}const at={style:{display:"flex",gap:"32px","flex-wrap":"wrap"}},rt={style:{flex:"40% 1 1"}},ut={class:"flex",style:{"flex-direction":"column"}},dt={key:0},ct={key:1,id:"configurations"},mt={class:"flex buttons"},pt={id:"display-lines"},ft={class:"flex"},gt={key:0,class:"flex",style:{"padding-left":"32px"}},bt={class:"flex select-icons"},vt=["onClick","title"],_t={class:"flex select-icons"},yt=["onClick","title"],kt={class:"flex select-icons"},ht=["onClick","title"],xt={key:0,class:"flex select-icons"},wt=["onClick"],Tt=["onClick"],St={class:"block",id:"matrix-display"},Ct={class:"matrix-clock"},Vt={class:"flex buttons"},$t={class:"flex"},Ut={style:{width:"48ch"}},Bt={style:{width:"16ch"}},jt=be({__name:"CinemecTimetableSection",setup(S){const l=Ge("now"),i=Se("history"),r=Ce(),a=$(!1),f=$(!0),k=$(""),_=we("theatre-name","PathÃ© Utrecht Leidsche Rijn"),u=we("ticker-text","De ~C3;Rooftop~C1; is weer geopend! Check pathÃ©.nl of de PathÃ©-app voor alle voorstellingen."),x=$(!0),h=$(!0),D=$(!0),P=$(!!i.prototype),ne=$("10.10.87.81"),le=$("10.10.87.82"),B=$([]),U={empty:()=>({fcolor:3,bcolor:0,textString:"",enabled:!1,align:"left",speed:7}),black:()=>({fcolor:3,bcolor:0,textString:"",enabled:!0,align:"left",speed:7}),ticker:(o=U.black())=>u.value.length?{fcolor:1,bcolor:0,textString:u.value,enabled:!0,align:"marquee",speed:7}:o},q={walkin:{name:"Voorstellingen",lines:()=>[{textString:`Welkom bij ${_.value}!`.padEnd(56)+"Zaal",fcolor:2,bcolor:0,enabled:!0,align:"left",speed:7},...se(6),U.ticker(U.empty())]},walkout:{name:"Uitloop",lines:()=>[...se(2,U.black()),{textString:"Hartelijk dank voor je filmbezoek!",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"Wij hopen dat je genoten hebt.",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"Graag tot ziens bij",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:`${_.value}`,fcolor:2,bcolor:0,enabled:!0,align:"center",speed:7},U.black(),U.ticker()]},noinfo:{name:"Geen info",lines:()=>[...se(2,U.black()),{textString:`Welkom bij ${_.value}!`,fcolor:2,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"De timetable toont momenteel geen actuele",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"informatie. Raadpleeg je ticket, de schermen bij",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"de kassa of een medewerker voor het zaalnummer.",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},U.black(),U.ticker()]}},_e=O(()=>[...B.value].sort((o,e)=>o.scheduledTime.getTime()-e.scheduledTime.getTime()).filter(o=>o.scheduledTime.getTime()-Date.now()>-9e5)),Ue=O(()=>_e.value.length?q.walkin.lines():B.value.some(o=>o.scheduledTime.getTime()-Date.now()>-216e5)?q.walkout.lines():q.noinfo.lines()),oe=$(q.noinfo.lines()),ye=O(()=>h.value?Ue.value:oe.value);r.$subscribe(()=>{r.table.length&&(x.value&&qe(()=>{W()}),B.value=[...r.table].sort((o,e)=>o.scheduledTime.getTime()-e.scheduledTime.getTime()).map((o,e)=>({scheduledTime:o.scheduledTime,title:o.title.replace(/[â€“-â€”]/g,"-").split("").filter(b=>b in ge).join(""),auditorium:o.auditorium==="Rooftop"?"RT":o.auditorium.replace(/^\w+\s/,"").split(" ")[0],i:e})))});function Be(o){if(!(o!=null&&o.textString))return[];const e=o.textString.split(/(?=~[CB]\d;|~[FNRI];)/g),b=[];let m=o.fcolor,s=o.bcolor,v=!1;for(const C of e)C.startsWith("~C")?m=parseInt(C.substring(2,3),10):C.startsWith("~B")?s=parseInt(C.substring(2,3),10):C.startsWith("~R")?[m,s]=[s,m]:C.startsWith("~F")?v=!0:C.startsWith("~N")?v=!1:C.startsWith("~I")&&(m=o.fcolor,s=o.bcolor),b.push({textString:C.replace(/~[CB]\d;|~[FNRI];/g,""),fcolor:m,bcolor:s,flash:v});return b}function se(o,e=U.empty()){return Array.from({length:o},()=>({...e}))}function ke(o,e){let b=[],m=0;for(let s=0;s<o.length;s++)if(o[s].enabled)b.push(o[s]);else{let v=_e.value[m++];if(!v){b.push({textString:"",enabled:!0,fcolor:3,bcolor:0,align:"left",speed:7});continue}const C=v.scheduledTime.getTime()-Date.now()<-54e4,re=v.scheduledTime.getTime()-Date.now()<3e5&&!C;let F=`${M(v.scheduledTime,"HH:mm")} ${v.title.substring(0,51).padEnd(51)}${v.auditorium.toString().substring(0,3).padStart(3)}`;C&&(F=`${M(v.scheduledTime,"HH:mm")} ${v.title.substring(0,40).padEnd(40)} ~C1;is gestart~C3;${v.auditorium.toString().substring(0,3).padStart(3)}`),re&&(F=`${M(v.scheduledTime,"HH:mm")} ${v.title.substring(0,38).padEnd(38)} ~F;~C1;gaat starten~N;~C3;${v.auditorium.toString().substring(0,3).padStart(3)}`),b.push({textString:F,enabled:!0,fcolor:3,bcolor:0,align:"left",speed:7})}return b}function je(o){if(D.value&&B.value.every(m=>m.scheduledTime.getTime()-Date.now()<-108e5||m.scheduledTime.getTime()-Date.now()>36e5))return new de(null,null,new ce([new Z,new G(null,4,9),new K]));let e=[],b=[];for(let m=0;m<o.length;m++){const s=o[m];s.enabled&&(s.align==="marquee"||s.align==="marquee-reverse"?b.push(new fe(s.align==="marquee"?6:5,s.speed,null,s.fcolor,s.bcolor,null,m+1,s.textString)):e.push(new me(null,s.fcolor,s.bcolor,null,m+1,s.align==="center"?De(s.textString,60):s.align==="right"?s.textString.padStart(60):s.textString)))}return new de(null,null,new ce([new Z,new pe,...e,new G(null,4,9),...b,new K]))}async function W(o=je(ke(ye.value)).toString()){for(const e of[ne.value,le.value])if(e.length){const b=await fetch("http://localhost:5000/send-bytes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:e,port:"9100",hex:o})});console.log(b)}k.value=o.toString()}function Ae(o){return o.trim().split(/\s+/).map(m=>{const s=parseInt(m,16);return String.fromCharCode(s)}).join("")}function De(o,e,b=" "){const m=Math.floor((e-o.length)/2);return b.repeat(m)+o+b.repeat(e-o.length-m)}let ie=null,ae=null;return We(()=>{ae=setTimeout(()=>{x.value&&W(),ie=setInterval(()=>{x.value&&W()},6e4)},6e4-Date.now()%6e4)}),Oe(()=>{ie&&clearInterval(ie),ae&&clearTimeout(ae)}),(o,e)=>{const b=Qe,m=Me,s=Ze,v=Ee,C=Xe,re=it,F=Ie;return y(),w("section",null,[n("div",at,[n("div",rt,[e[27]||(e[27]=n("h2",null,"Opties",-1)),n("div",ut,[d(b,{identifier:"autoWalkOut",modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=t=>h.value=t)},{default:p(()=>e[15]||(e[15]=[g(" Automatisch de beste configuratie kiezen "),n("small",null,"De uitloopconfiguratie wordt automatisch weergegeven als er geen inlopen meer zijn.",-1)])),_:1,__:[15]},8,["modelValue"]),d(b,{identifier:"autoBlack",modelValue:D.value,"onUpdate:modelValue":e[1]||(e[1]=t=>D.value=t)},{default:p(()=>e[16]||(e[16]=[g(" Verlichting 's nachts automatisch uitschakelen "),n("small",null,"Tussen 3 uur na de laatste inloop en 1 uur voor de eerste inloop is het bord zwart.",-1)])),_:1,__:[16]},8,["modelValue"]),d(m,{identifier:"theatreName",modelValue:z(_),"onUpdate:modelValue":e[2]||(e[2]=t=>xe(_)?_.value=t:null)},{default:p(()=>e[17]||(e[17]=[g(" Naam theater ")])),_:1,__:[17]},8,["modelValue"]),d(m,{identifier:"tickerText",modelValue:z(u),"onUpdate:modelValue":e[3]||(e[3]=t=>xe(u)?u.value=t:null)},{datalist:p(()=>e[18]||(e[18]=[n("option",{value:"De ~C3;Rooftop~C1; is weer geopend! Check pathÃ©.nl of de PathÃ©-app voor alle voorstellingen."}," Rooftop open",-1)])),default:p(()=>[e[19]||(e[19]=g(" Lichtkrant "))]),_:1,__:[19]},8,["modelValue"]),d(v,{class:"full",onClick:e[4]||(e[4]=t=>a.value=!0)},{default:p(()=>[d(s,null,{default:p(()=>e[20]||(e[20]=[g("edit")])),_:1,__:[20]}),e[21]||(e[21]=n("span",null,"Voorstellingen bewerken",-1))]),_:1,__:[21]})]),h.value?H("",!0):(y(),w("h2",dt,"Configuratie")),h.value?H("",!0):(y(),w("div",ct,[e[26]||(e[26]=n("div",{class:"flex",style:{"flex-direction":"column"}},null,-1)),n("div",mt,[(y(),w(j,null,A(q,(t,T)=>d(v,{class:"secondary",key:T,onClick:c=>oe.value=t.lines()},{default:p(()=>[g(N(t.name),1)]),_:2},1032,["onClick"])),64))]),n("div",pt,[(y(!0),w(j,null,A(oe.value,(t,T)=>(y(),w("div",{class:"display-line",key:T},[n("div",ft,[d(b,{class:"no-label",identifier:`line-${T}-enabled`,modelValue:t.enabled,"onUpdate:modelValue":c=>t.enabled=c},null,8,["identifier","modelValue","onUpdate:modelValue"]),d(m,{class:R(["no-label",{"too-long":t.textString.length>60}]),identifier:`line-${T}-text`,modelValue:t.textString,"onUpdate:modelValue":c=>t.textString=c},null,8,["identifier","modelValue","onUpdate:modelValue","class"])]),t.textString.length?(y(),w("div",gt,[n("div",bt,[(y(),w(j,null,A({left:["Links uitlijnen","format_align_left"],center:["Centreren","format_align_center"],right:["Rechts uitlijnen","format_align_right"],marquee:["Lichtkrant","keyboard_double_arrow_left"],"marquee-reverse":["Omgekeerde lichtkrant","keyboard_double_arrow_right"]},(c,E)=>n("a",{onClick:L=>t.align=E,class:R({selected:t.align===E}),title:c[0]},[d(s,null,{default:p(()=>[g(N(c[1]),1)]),_:2},1024)],10,vt)),64))]),n("div",_t,[(y(),w(j,null,A({0:["Zwarte tekst","#000"],1:["Rode tekst","rgb(227, 46, 46)"],2:["Groene tekst","rgb(35, 160, 35)"],3:["Oranje tekst","rgb(255, 178, 36)"]},(c,E,L)=>n("a",{onClick:Ne=>t.fcolor=L,class:R({selected:t.fcolor===L}),title:c[0]},[d(s,{style:ue({color:c[1]})},{default:p(()=>e[22]||(e[22]=[g("format_color_text")])),_:2,__:[22]},1032,["style"])],10,yt)),64))]),n("div",kt,[(y(),w(j,null,A({0:["Zwarte tekst","#000"],1:["Rode tekst","rgb(227, 46, 46)"],2:["Groene tekst","rgb(35, 160, 35)"],3:["Oranje tekst","rgb(255, 178, 36)"]},(c,E,L)=>n("a",{onClick:Ne=>t.bcolor=L,class:R({selected:t.bcolor===L}),title:c[0]},[d(s,{style:ue({color:c[1]})},{default:p(()=>e[23]||(e[23]=[g("format_color_fill")])),_:2,__:[23]},1032,["style"])],10,ht)),64))]),t.align==="marquee"||t.align==="marquee-reverse"?(y(),w("div",xt,[n("a",{onClick:c=>t.speed=Math.max(0,t.speed-1),title:"Langzamer"},[d(s,null,{default:p(()=>e[24]||(e[24]=[g("remove")])),_:1,__:[24]})],8,wt),n("span",null,N(t.speed),1),n("a",{onClick:c=>t.speed=Math.min(9,t.speed+1),title:"Sneller"},[d(s,null,{default:p(()=>e[25]||(e[25]=[g("add")])),_:1,__:[25]})],8,Tt)])):H("",!0)])):H("",!0)]))),128))])]))]),d(C,{style:{flex:"585px 0 0",display:"flex"}},{default:p(()=>[n("div",null,[e[29]||(e[29]=n("h2",null,"Voorbeeld",-1)),n("div",St,[e[28]||(e[28]=n("span",{id:"matrix-display-title"},"PathÃ© Timetable",-1)),n("pre",Ct,N(z(M)(z(l),"HH:mm")),1),(y(!0),w(j,null,A(ke(ye.value,z(l)),(t,T)=>(y(),w("div",{class:R(["matrix-row",`align${t.align||"left"}`]),style:ue({"--marquee-duration":(.02*Math.max(60,t.textString.replace(/~[CB]\d;|~[FNRI];/g,"").length)+.08)*(-1*t.speed+13)+"s"})},[n("div",null,[(y(!0),w(j,null,A(Be(t),c=>(y(),w("span",{key:T,class:R(`fcolor${(c==null?void 0:c.fcolor)||0} bcolor${(c==null?void 0:c.bcolor)||0} flash${c!=null&&c.flash?1:0}`)},N((c==null?void 0:c.textString)||""),3))),128))])],6))),256))])]),n("div",Vt,[d(v,{class:"secondary",onClick:e[5]||(e[5]=t=>W())},{default:p(()=>[d(s,null,{default:p(()=>e[30]||(e[30]=[g("send")])),_:1,__:[30]}),e[31]||(e[31]=n("span",null,"Nu verzenden",-1))]),_:1,__:[31]}),d(v,{class:"secondary",onClick:e[6]||(e[6]=t=>W(new de(null,null,new Ve(new Date)).toString()))},{default:p(()=>[d(s,null,{default:p(()=>e[32]||(e[32]=[g("update")])),_:1,__:[32]}),e[33]||(e[33]=n("span",null,"Klok bijwerken",-1))]),_:1,__:[33]}),d(v,{class:"secondary",onClick:e[7]||(e[7]=t=>P.value=!0),style:{opacity:"0.2"}},{default:p(()=>[d(s,null,{default:p(()=>e[34]||(e[34]=[g("code")])),_:1,__:[34]}),e[35]||(e[35]=n("span",null,"Foutopsporing",-1))]),_:1,__:[35]})]),e[36]||(e[36]=n("p",null,[g(" Dit voorbeeld is slechts indicatief. "),n("br"),n("br"),n("b",null,"Tip:"),g(" In invoervelden kunnen de volgende codes worden gebruikt:"),n("br"),n("code",null,"~Cn;"),g("â€ƒ tekstkleur (waarbij n = 0, 1, 2 of 3)"),n("br"),n("code",null,"~Bn;"),g("â€ƒ achtergrondkleur (waarbij n = 0, 1, 2 of 3)"),n("br"),n("code",null,"~R; "),g("â€ƒ kleuren omwisselen"),n("br"),n("code",null,"~I; "),g("â€ƒ kleuren resetten"),n("br"),n("code",null,"~F; "),g("â€ƒ knipperen"),n("br"),n("code",null,"~N; "),g("â€ƒ niet meer knipperen"),n("br")],-1))]),_:1,__:[36]})]),a.value?(y(),he(F,{key:0,onDismiss:e[10]||(e[10]=t=>a.value=!1)},{default:p(()=>[e[40]||(e[40]=n("h3",null,"Voorstellingen",-1)),e[41]||(e[41]=n("p",null,[n("b",null,"Let op:"),g(" roodgekleurde filmtitels zijn te lang en worden mogelijk afgekapt.")],-1)),d(b,{identifier:"syncFilmTitles",modelValue:f.value,"onUpdate:modelValue":e[8]||(e[8]=t=>f.value=t)},{default:p(()=>e[37]||(e[37]=[g(" Alle identieke filmtitels tegelijk bewerken ")])),_:1,__:[37]},8,["modelValue"]),n("div",null,[d(Ke,{name:"list"},{default:p(()=>[(y(!0),w(j,null,A([...B.value].sort((t,T)=>t.scheduledTime.getTime()-T.scheduledTime.getTime()),t=>(y(),w("div",{class:"flex walkin",key:t.i},[d(re,{class:"no-label walkin-time",identifier:`walkin-${t.i}-time`,modelValue:t.scheduledTime,"onUpdate:modelValue":T=>t.scheduledTime=T},null,8,["identifier","modelValue","onUpdate:modelValue"]),d(m,{class:R(["no-label walkin-title",{"too-long":t.title.length>38}]),spellcheck:!1,autocomplete:"off",identifier:`walkin-${t.i}`,"model-value":t.title,"onUpdate:modelValue":T=>{f.value?B.value.filter(c=>c.title===t.title).forEach(c=>c.title=T):t.title=T}},null,8,["identifier","model-value","onUpdate:modelValue","class"]),d(m,{class:"no-label walkin-auditorium",spellcheck:!1,autocomplete:"off",identifier:`walkin-${t.i}-auditorium`,modelValue:t.auditorium,"onUpdate:modelValue":T=>t.auditorium=T},null,8,["identifier","modelValue","onUpdate:modelValue"]),d(s,{style:{float:"right",cursor:"pointer",padding:"2px"},onClick:T=>B.value.splice(t.i,1)},{default:p(()=>e[38]||(e[38]=[g(" delete")])),_:2,__:[38]},1032,["onClick"])]))),128))]),_:1})]),d(v,{class:"secondary",onClick:e[9]||(e[9]=t=>B.value.push({scheduledTime:new Date,title:"",auditorium:"",i:B.value.length}))},{default:p(()=>e[39]||(e[39]=[g(" Nieuwe voorstelling ")])),_:1,__:[39]})]),_:1,__:[40,41]})):H("",!0),P.value?(y(),he(F,{key:1,onDismiss:e[14]||(e[14]=t=>P.value=!1)},{default:p(()=>[n("div",$t,[n("pre",Ut,N(k.value),1),n("pre",Bt,N(Ae(k.value).replace(/[\n\r\t]/g," ").match(/.{1,16}/g).join(`
`)),1)]),d(m,{modelValue:ne.value,"onUpdate:modelValue":e[11]||(e[11]=t=>ne.value=t),identifier:"ip"},{default:p(()=>e[42]||(e[42]=[n("span",null,"ip1",-1)])),_:1,__:[42]},8,["modelValue"]),d(m,{modelValue:le.value,"onUpdate:modelValue":e[12]||(e[12]=t=>le.value=t),identifier:"ip2"},{default:p(()=>e[43]||(e[43]=[n("span",null,"ip2",-1)])),_:1,__:[43]},8,["modelValue"]),d(b,{modelValue:x.value,"onUpdate:modelValue":e[13]||(e[13]=t=>x.value=t),identifier:"autoSend"},{default:p(()=>e[44]||(e[44]=[n("span",null,"autoSend",-1)])),_:1,__:[44]},8,["modelValue"])]),_:1})):H("",!0)])}}}),At=Te(jt,[["__scopeId","data-v-a3c60eae"]]),Dt={key:0,class:"dropzone"},Lt=be({__name:"NarrowcastingView",setup(S){const l=Ce();Fe();const i=Se("history"),r=$(!1);l.$subscribe(()=>{var h;if(!i.download||!((h=l.table)!=null&&h.length)||a.value.length<10||r.value)return;const u=new Blob([a.value],{type:"text/plain"}),x=document.createElement("a");x.href=URL.createObjectURL(u),x.download="timetable.xml",x.click(),URL.revokeObjectURL(x.href),r.value=!0});const a=O(()=>{const u=h=>"  ".repeat(h),x=l.table.map((h,D)=>f(h,D).split("><").join(`>
${u(2)}<`)).join(`
${u(1)}`);return`<voorstellingen>
${u(1)}${x}
</voorstellingen>`});function f(u,x){return`<Shows><ID type="Long Integer">${x}</ID><DatumVan type="Date/Time">${M(u.scheduledTime,"dd-MM-yyyy")}</DatumVan><DatumTot type="Date/Time">${M(u.scheduledTime,"dd-MM-yyyy")}</DatumTot><Tijd type="Date/Time">${M(u.scheduledTime,"HH:mm")}</Tijd><Titel type="Text">${u.playlist}</Titel><Zaal type="Text">${u.auditoriumNumber}</Zaal><Kleur type="Long Integer">3</Kleur><Permanent type="Long Integer">1</Permanent></Shows>`}const k=$(null),{isOverDropZone:_}=Ye(k,{onDrop:l.filesUploaded,multiple:!1});return(u,x)=>{const h=Je,D=et,P=At;return y(),w("main",{ref_key:"main",ref:k},[d(h),d(D),d(P),z(_)?(y(),w("div",Dt," Laat los om bestand te uploaden ")):H("",!0)],512)}}});export{Lt as default};
