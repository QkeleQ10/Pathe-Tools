var Me=Object.defineProperty;var Re=(C,n,i)=>n in C?Me(C,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):C[n]=i;var V=(C,n,i)=>Re(C,typeof n!="symbol"?n+"":n,i);import{a as Fe,_ as Le,u as Ie}from"./server-CPxFDMjK.js";import{d as _e,A as ze,B as Pe,e as W,f as M,c as h,o as _,b as l,a as qe,_ as Ce,r as S,x as Ee,H as We,I as Oe,q as Z,h as D,g as u,w as m,l as p,u as P,p as we,y as Ze,C as Ge,s as A,j as F,J as Ke,F as H,k as N,K as Je,n as G,i as Xe}from"./index-BkC-5ZM-.js";import{b as $e,c as Te,_ as Ye,a as Qe}from"./FileUploadBlock-ChXVSFM-.js";import{u as Ve,a as et,_ as tt}from"./TimetableUploadSection-DlpVTyuv.js";import"./nl-BnC96dya.js";const lt=["for"],nt={class:"title"},ot={class:"input"},st=["id","disabled","value"],it=_e({__name:"InputDate",props:ze({identifier:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(C){const n=Pe(C,"modelValue"),i=W({get(){return n.value?M(n.value,"yyyy-MM-dd'T'HH:mm"):""},set(d){const a=new Date(d);isNaN(a.getTime())||(n.value=a)}});return(d,a)=>(_(),h("label",{class:"input time-input",for:d.identifier},[l("div",nt,[qe(d.$slots,"default",{},void 0,!0)]),l("div",ot,[l("input",{type:"datetime-local",id:d.identifier,disabled:d.disabled,value:i.value,onBlur:a[0]||(a[0]=g=>i.value=g.target.value)},null,40,st)])],8,lt))}}),at=Ce(it,[["__scopeId","data-v-e53689b9"]]);class me{constructor(n=65535,i=65535,d){V(this,"packet");let a;if(d instanceof Uint8Array)a=d;else if(Array.isArray(d)){a=new Uint8Array(d.reduce((c,k)=>c+k.messageBody.length,0));let x=0;for(const c of d)a.set(c.messageBody,x),x+=c.messageBody.length}else a=d.messageBody;const g=new Uint8Array(9);g.set([170,187,n>>8,n&255,i>>8,i&255,a.length>>8,a.length&255,n>>8^n&255^i>>8^i&255^a.length>>8^a.length&255]);const w=new Uint8Array(1);w.set([a.reduce((x,c)=>x^c,0)]),this.packet=new Uint8Array(g.length+a.length+w.length),this.packet.set(g),this.packet.set(a,g.length),this.packet.set(w,g.length+a.length)}toString(){return Array.from(this.packet).map(n=>n.toString(16).padStart(2,"0")).join(" ").toUpperCase()}}class ye{constructor(){V(this,"messageBody")}}V(ye,"functionCode",0);class pe extends ye{constructor(n){super();let i;if(n instanceof Uint8Array)i=n;else if(Array.isArray(n)){i=new Uint8Array(n.reduce((g,w)=>g+w.messageBody.length,0));let a=0;for(const g of n)i.set(g.messageBody,a),a+=g.messageBody.length}else i=n.messageBody;const d=new Uint8Array(1+i.length);d.set([this.constructor.functionCode]),d.set(i,1),this.messageBody=d}}V(pe,"functionCode",0);class Se extends ye{constructor(n){super();const i=new Uint8Array(8);i.set([this.constructor.functionCode]),i.set([n.getFullYear()-2e3,n.getMonth()+1,n.getDate(),n.getDay(),n.getHours(),n.getMinutes(),n.getSeconds()],1),this.messageBody=i}}V(Se,"functionCode",1);class L{constructor(){V(this,"messageBody")}}V(L,"commandCode",0);const Y=class Y extends L{constructor(){super();const n=new Uint8Array(1);n.set([Y.commandCode]),this.messageBody=n}};V(Y,"commandCode",1);let K=Y;const Q=class Q extends L{constructor(n=0,i=3,d=0,a=0,g=0,w){super();const x=Ue(w),c=new Uint8Array(6+x.length+1);c.set([Q.commandCode]),c.set([n,i,d,a,g],1),c.set(x,6),c.set([0],c.length-1),this.messageBody=c}};V(Q,"commandCode",3);let fe=Q;const ee=class ee extends L{constructor(n=2,i=0,d=3,a=0,g=55,w=0){super();const x=new Uint8Array(7);x.set([ee.commandCode]),x.set([n,i,d,a,g,w],1),this.messageBody=x}};V(ee,"commandCode",4);let ge=ee;const te=class te extends L{constructor(n=0,i=0,d=9){super();const a=new Uint8Array(5);a.set([te.commandCode]),a.set([n>>8,n&255,i,d],1),this.messageBody=a}};V(te,"commandCode",7);let J=te;const le=class le extends L{constructor(n=0,i=4,d=0,a=3,g=0,w=0,x=0,c){super();const k=Ue(c),y=new Uint8Array(8+k.length+1);y.set([le.commandCode]),y.set([n,i,d,a,g,w,x],1),y.set(k,8),y.set([0],y.length-1),this.messageBody=y}};V(le,"commandCode",8);let be=le;const ne=class ne extends L{constructor(){super();const n=new Uint8Array(1);n.set([ne.commandCode]),this.messageBody=n}};V(ne,"commandCode",31);let X=ne;const ve={"":0,"":1,"":2,"":3,"":4,"":5,"":6,"\x07":7,"\b":8,"	":9,"\n":10,"\v":11,"\f":12,"\r":13,"":14,"":15,"":16,"":17,"":18,"":19,"":20,"":21,"":22,"":23,"":24,"":25,"":26,"\x1B":27,"":28,"":29,"":30,"":31," ":32,"!":33,'"':34,"#":35,$:36,"%":37,"&":38,"'":39,"(":40,")":41,"*":42,"+":43,",":44,"-":45,".":46,"/":47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,";":59,"<":60,"=":61,">":62,"?":63,"@":64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,"[":91,"\\":92,"]":93,"^":94,_:95,"`":96,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,"{":123,"|":124,"}":125,"~":126,"":127,"Â€":128,"Â":129,"Â‚":130,"Âƒ":131,"Â„":132,"Â…":133,"Â†":134,"Â‡":135,"Âˆ":136,"Â‰":137,"ÂŠ":138,"Â‹":139,"ÂŒ":140,"Â":141,"ÂŽ":142,"Â":143,"Â":144,"Â‘":145,"Â’":146,"Â“":147,"Â”":148,"Â•":149,"Â–":150,"Â—":151,"Â˜":152,"Â™":153,"Âš":154,"Â›":155,"Âœ":156,"Â":157,"Âž":158,"ÂŸ":159,"Â ":160,"Â¡":161,"Â¢":162,"Â£":163,"Â¤":164,"Â¥":165,"Â¦":166,"Â§":167,"Â¨":168,"Â©":169,Âª:170,"Â«":171,"Â¬":172,"Â­":173,"Â®":174,"Â¯":175,"Â°":176,"Â±":177,"Â²":178,"Â³":179,"Â´":180,Âµ:181,"Â¶":182,"Â·":183,"Â¸":184,"Â¹":185,Âº:186,"Â»":187,"Â¼":188,"Â½":189,"Â¾":190,"Â¿":191,Ã€:192,Ã:193,Ã‚:194,Ãƒ:195,Ã„:196,Ã…:197,Ã†:198,Ã‡:199,Ãˆ:200,Ã‰:201,ÃŠ:202,Ã‹:203,ÃŒ:204,Ã:205,ÃŽ:206,Ã:207,Ã:208,Ã‘:209,Ã’:210,Ã“:211,Ã”:212,Ã•:213,Ã–:214,"Ã—":215,Ã˜:216,Ã™:217,Ãš:218,Ã›:219,Ãœ:220,Ã:221,Ãž:222,ÃŸ:223,Ã :224,Ã¡:225,Ã¢:226,Ã£:227,Ã¤:228,Ã¥:229,Ã¦:230,Ã§:231,Ã¨:232,Ã©:233,Ãª:234,Ã«:235,Ã¬:236,Ã­:237,Ã®:238,Ã¯:239,Ã°:240,Ã±:241,Ã²:242,Ã³:243,Ã´:244,Ãµ:245,Ã¶:246,"Ã·":247,Ã¸:248,Ã¹:249,Ãº:250,Ã»:251,Ã¼:252,Ã½:253,Ã¾:254,Ã¿:255};function Ue(C){const n=C.split("").reduce((i,d)=>(ve.hasOwnProperty(d)&&i.push(ve[d]),i),[]);return new Uint8Array(n)}const rt={style:{display:"flex",gap:"32px","flex-wrap":"wrap"}},ut={style:{flex:"40% 1 1"}},dt={class:"flex",style:{"flex-direction":"column"}},ct={class:"flex buttons"},mt={class:"matrix-clock"},pt={class:"flex buttons"},ft={key:0},gt={style:{"overflow-y":"auto","max-height":"70vh"}},bt=["id"],vt={key:0},_t={id:"configurations"},yt={class:"flex buttons"},kt={id:"display-lines"},ht={class:"flex"},xt={key:0,class:"flex",style:{"padding-left":"32px"}},wt={class:"flex select-icons"},Tt=["onClick","title"],Ct={class:"flex select-icons"},$t=["onClick","title"],Vt={class:"flex select-icons"},St=["onClick","title"],Ut={key:0,class:"flex select-icons"},Bt=["onClick"],Dt=["onClick"],jt={class:"flex"},At={style:{width:"48ch"}},Ht={style:{width:"16ch"}},Nt=_e({__name:"CinemecTimetableSection",setup(C){const n=Ke("now"),i=$e("history"),d=Ve(),a=S(!1),g=S(!1),w=S(!0),x=S(""),c=Te("theatre-name","PathÃ© Utrecht Leidsche Rijn"),k=Te("ticker-text","De ~C3;Rooftop~C1; is weer geopend! Check pathÃ©.nl of de PathÃ©-app voor alle voorstellingen."),y=S(!0),j=S(!0),I=S(!0),oe=S(!!i.prototype),se=S("10.10.87.81"),ie=S("10.10.87.82"),U=S([]),B={empty:()=>({fcolor:3,bcolor:0,textString:"",enabled:!1,align:"left",speed:7}),black:()=>({fcolor:3,bcolor:0,textString:"",enabled:!0,align:"left",speed:7}),ticker:(o=B.black())=>k.value.length?{fcolor:1,bcolor:0,textString:k.value,enabled:!0,align:"marquee",speed:7}:o},q={walkin:{name:"Voorstellingen",lines:()=>[{textString:`Welkom bij ${c.value}!`.padEnd(56)+"Zaal",fcolor:2,bcolor:0,enabled:!0,align:"left",speed:7},...re(6),B.ticker(B.empty())]},walkout:{name:"Uitloop",lines:()=>[...re(2,B.black()),{textString:"Hartelijk dank voor je filmbezoek!",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"Wij hopen dat je genoten hebt.",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"Graag tot ziens bij",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:`${c.value}`,fcolor:2,bcolor:0,enabled:!0,align:"center",speed:7},B.black(),B.ticker()]},noinfo:{name:"Geen info",lines:()=>[...re(2,B.black()),{textString:`Welkom bij ${c.value}!`,fcolor:2,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"De timetable toont momenteel geen actuele",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"informatie. Raadpleeg je ticket, de schermen bij",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"de kassa of een medewerker voor het zaalnummer.",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},B.black(),B.ticker()]}},ke=W(()=>[...U.value].sort((o,e)=>o.scheduledTime.getTime()-e.scheduledTime.getTime()).filter(o=>o.scheduledTime.getTime()-Date.now()>-9e5)),Be=W(()=>ke.value.some(o=>o.scheduledTime.getTime()-Date.now()<108e5)?q.walkin.lines():new Date().getHours()>=21||new Date().getHours()<1?q.walkout.lines():q.noinfo.lines()),ae=S(q.walkin.lines()),he=W(()=>j.value?Be.value:ae.value);d.$subscribe(()=>{d.table.length&&(y.value&&Ee(()=>{E()}),U.value=[...d.table].sort((o,e)=>o.scheduledTime.getTime()-e.scheduledTime.getTime()).map((o,e)=>({scheduledTime:o.scheduledTime,title:o.title.replace(/[â€“-â€”]/g,"-").split("").filter(b=>b in ve).join(""),auditorium:o.auditorium==="Rooftop"?"RT":o.auditorium.replace(/^\w+\s/,"").split(" ")[0],i:e})))});function De(o){if(!(o!=null&&o.textString))return[];const e=o.textString.split(/(?=~[CB]\d;|~[FNRI];)/g),b=[];let f=o.fcolor,s=o.bcolor,v=!1;for(const $ of e)$.startsWith("~C")?f=parseInt($.substring(2,3),10):$.startsWith("~B")?s=parseInt($.substring(2,3),10):$.startsWith("~R")?[f,s]=[s,f]:$.startsWith("~F")?v=!0:$.startsWith("~N")?v=!1:$.startsWith("~I")&&(f=o.fcolor,s=o.bcolor),b.push({textString:$.replace(/~[CB]\d;|~[FNRI];/g,""),fcolor:f,bcolor:s,flash:v});return b}function re(o,e=B.empty()){return Array.from({length:o},()=>({...e}))}function xe(o,e){let b=[],f=0;for(let s=0;s<o.length;s++)if(o[s].enabled)b.push(o[s]);else{let v=ke.value[f++];if(!v){b.push({textString:"",enabled:!0,fcolor:3,bcolor:0,align:"left",speed:7});continue}const $=v.scheduledTime.getTime()-Date.now()<-54e4,ce=v.scheduledTime.getTime()-Date.now()<3e5&&!$;let R=`${M(v.scheduledTime,"HH:mm")} ${v.title.substring(0,51).padEnd(51)}${v.auditorium.toString().substring(0,3).padStart(3)}`;$&&(R=`${M(v.scheduledTime,"HH:mm")} ${v.title.substring(0,40).padEnd(40)} ~C1;is gestart~C3;${v.auditorium.toString().substring(0,3).padStart(3)}`),ce&&(R=`${M(v.scheduledTime,"HH:mm")} ${v.title.substring(0,38).padEnd(38)} ~F;~C1;gaat starten~N;~C3;${v.auditorium.toString().substring(0,3).padStart(3)}`),b.push({textString:R,enabled:!0,fcolor:3,bcolor:0,align:"left",speed:7})}return b}function je(o){if(I.value&&(new Date().getHours()>=1&&new Date().getHours()<9||new Date().getHours()===9&&new Date().getMinutes()<30))return new me(null,null,new pe([new K,new J(null,4,9),new X]));let e=[],b=[];for(let f=0;f<o.length;f++){const s=o[f];s.enabled&&(s.align==="marquee"||s.align==="marquee-reverse"?b.push(new be(s.align==="marquee"?6:5,s.speed,null,s.fcolor,s.bcolor,null,f+1,s.textString)):e.push(new fe(null,s.fcolor,s.bcolor,null,f+1,s.align==="center"?He(s.textString,60):s.align==="right"?s.textString.padStart(60):s.textString)))}return new me(null,null,new pe([new K,new ge,...e,new J(null,4,9),...b,new X]))}async function E(o=je(xe(he.value)).toString()){for(const e of[se.value,ie.value])if(e.length){const b=await fetch("http://localhost:5000/send-bytes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:e,port:"9100",hex:o})});console.log(b)}x.value=o.toString()}function Ae(o){return o.trim().split(/\s+/).map(f=>{const s=parseInt(f,16);return String.fromCharCode(s)}).join("")}function He(o,e,b=" "){const f=Math.floor((e-o.length)/2);return b.repeat(f)+o+b.repeat(e-o.length-f)}let ue=null,de=null;return We(()=>{de=setTimeout(()=>{y.value&&E(),ue=setInterval(()=>{y.value&&E()},6e4)},6e4-Date.now()%6e4)}),Oe(()=>{ue&&clearInterval(ue),de&&clearTimeout(de)}),(o,e)=>{const b=et,f=Fe,s=Ge,v=Ze,$=Ye,ce=at,R=Le;return _(),h("section",null,[l("div",rt,[l("div",ut,[e[26]||(e[26]=l("h2",null,"Opties",-1)),l("div",dt,[u(b,{identifier:"autoConfigure",modelValue:j.value,"onUpdate:modelValue":e[0]||(e[0]=t=>j.value=t)},{default:m(()=>e[17]||(e[17]=[p(" Automatisch de beste configuratie kiezen "),l("small",null,"Een gepaste configuratie wordt weergegeven als er geen inlopen zijn.",-1)])),_:1,__:[17]},8,["modelValue"]),u(b,{identifier:"autoBlack",modelValue:I.value,"onUpdate:modelValue":e[1]||(e[1]=t=>I.value=t)},{default:m(()=>e[18]||(e[18]=[p(" Verlichting 's nachts automatisch uitschakelen "),l("small",null,"Tussen 01:00 en 09:30 is het bord zwart.",-1)])),_:1,__:[18]},8,["modelValue"]),u(f,{identifier:"theatreName",modelValue:P(c),"onUpdate:modelValue":e[2]||(e[2]=t=>we(c)?c.value=t:null)},{default:m(()=>e[19]||(e[19]=[p(" Naam theater ")])),_:1,__:[19]},8,["modelValue"]),u(f,{identifier:"tickerText",modelValue:P(k),"onUpdate:modelValue":e[3]||(e[3]=t=>we(k)?k.value=t:null)},{datalist:m(()=>e[20]||(e[20]=[l("option",{value:"De ~C3;Rooftop~C1; is weer geopend! Check pathÃ©.nl of de PathÃ©-app voor alle voorstellingen."}," Rooftop open",-1)])),default:m(()=>[e[21]||(e[21]=p(" Lichtkrant "))]),_:1,__:[21]},8,["modelValue"]),l("div",ct,[u(v,{class:"full",onClick:e[4]||(e[4]=t=>a.value=!0)},{default:m(()=>[u(s,null,{default:m(()=>e[22]||(e[22]=[p("edit")])),_:1,__:[22]}),e[23]||(e[23]=l("span",null,"Voorstellingen bewerken",-1))]),_:1,__:[23]}),j.value?D("",!0):(_(),Z(v,{key:0,class:"secondary full",onClick:e[5]||(e[5]=t=>g.value=!0)},{default:m(()=>[u(s,null,{default:m(()=>e[24]||(e[24]=[p("edit")])),_:1,__:[24]}),e[25]||(e[25]=l("span",null,"Configuratie bewerken",-1))]),_:1,__:[25]}))])])]),u($,{style:{flex:"585px 0 0",display:"flex"}},{default:m(()=>[l("div",null,[e[28]||(e[28]=l("h2",null,"Voorbeeld",-1)),l("div",{class:A(["block",{blackout:I.value&&(new Date().getHours()>=1&&new Date().getHours()<9||new Date().getHours()===9&&new Date().getMinutes()<30)}]),id:"matrix-display"},[e[27]||(e[27]=l("span",{id:"matrix-display-title"},"PathÃ© Timetable",-1)),l("pre",mt,F(P(M)(P(n),"HH:mm")),1),(_(!0),h(H,null,N(xe(he.value,P(n)),(t,T)=>(_(),h("div",{class:A(["matrix-row",`align${t.align||"left"}`]),style:G({"--marquee-duration":(.02*Math.max(60,t.textString.replace(/~[CB]\d;|~[FNRI];/g,"").length)+.08)*(-1*t.speed+13)+"s"})},[l("div",null,[(_(!0),h(H,null,N(De(t),r=>(_(),h("span",{key:T,class:A(`fcolor${(r==null?void 0:r.fcolor)||0} bcolor${(r==null?void 0:r.bcolor)||0} flash${r!=null&&r.flash?1:0}`)},F((r==null?void 0:r.textString)||""),3))),128))])],6))),256))],2)]),l("div",pt,[u(v,{class:"secondary",onClick:e[6]||(e[6]=t=>E())},{default:m(()=>[u(s,null,{default:m(()=>e[29]||(e[29]=[p("send")])),_:1,__:[29]}),e[30]||(e[30]=l("span",null,"Nu verzenden",-1))]),_:1,__:[30]}),u(v,{class:"secondary",onClick:e[7]||(e[7]=t=>E(new me(null,null,new Se(new Date)).toString()))},{default:m(()=>[u(s,null,{default:m(()=>e[31]||(e[31]=[p("update")])),_:1,__:[31]}),e[32]||(e[32]=l("span",null,"Klok bijwerken",-1))]),_:1,__:[32]}),u(v,{class:"secondary",onClick:e[8]||(e[8]=t=>oe.value=!0),style:{opacity:"0.2"}},{default:m(()=>[u(s,null,{default:m(()=>e[33]||(e[33]=[p("code")])),_:1,__:[33]}),e[34]||(e[34]=l("span",null,"Foutopsporing",-1))]),_:1,__:[34]})]),e[35]||(e[35]=l("p",null,[p(" Dit voorbeeld is slechts indicatief. "),l("br"),l("br"),l("b",null,"Tip:"),p(" In invoervelden kunnen de volgende codes worden gebruikt:"),l("br"),l("code",null,"~Cn;"),p("â€ƒ tekstkleur (waarbij n = 0, 1, 2 of 3)"),l("br"),l("code",null,"~Bn;"),p("â€ƒ achtergrondkleur (waarbij n = 0, 1, 2 of 3)"),l("br"),l("code",null,"~R; "),p("â€ƒ kleuren omwisselen"),l("br"),l("code",null,"~I; "),p("â€ƒ kleuren resetten"),l("br"),l("code",null,"~F; "),p("â€ƒ knipperen"),l("br"),l("code",null,"~N; "),p("â€ƒ niet meer knipperen"),l("br")],-1))]),_:1,__:[35]})]),a.value?(_(),Z(R,{key:0,onDismiss:e[11]||(e[11]=t=>a.value=!1),id:"walkin-editor"},{default:m(()=>[e[41]||(e[41]=l("h3",null,"Voorstellingen",-1)),U.value.some(t=>t.title.length>38)?(_(),h("p",ft,e[36]||(e[36]=[l("b",null,"Let op:",-1),p(" roodgekleurde filmtitels zijn te lang en worden mogelijk afgekapt.")]))):D("",!0),u(b,{identifier:"syncFilmTitles",modelValue:w.value,"onUpdate:modelValue":e[9]||(e[9]=t=>w.value=t)},{default:m(()=>e[37]||(e[37]=[p(" Alle identieke filmtitels tegelijk bewerken ")])),_:1,__:[37]},8,["modelValue"]),l("div",gt,[u(Je,{name:"list"},{default:m(()=>[(_(!0),h(H,null,N([...U.value].sort((t,T)=>t.scheduledTime.getTime()-T.scheduledTime.getTime()),t=>(_(),h("div",{class:"flex walkin",key:t.i,id:`walkin-${t.i}`,style:G({opacity:t.scheduledTime.getTime()-Date.now()<-54e4?.5:1})},[u(ce,{class:"no-label walkin-time",identifier:`walkin-${t.i}-time`,modelValue:t.scheduledTime,"onUpdate:modelValue":T=>t.scheduledTime=T},null,8,["identifier","modelValue","onUpdate:modelValue"]),u(f,{class:A(["no-label walkin-title",{"too-long":t.title.length>38}]),spellcheck:!1,autocomplete:"off",identifier:`walkin-${t.i}-title`,"model-value":t.title,"onUpdate:modelValue":T=>{w.value?U.value.filter(r=>r.title===t.title).forEach(r=>r.title=T):t.title=T}},null,8,["identifier","model-value","onUpdate:modelValue","class"]),u(f,{class:"no-label walkin-auditorium",spellcheck:!1,autocomplete:"off",identifier:`walkin-${t.i}-auditorium`,modelValue:t.auditorium,"onUpdate:modelValue":T=>t.auditorium=T},null,8,["identifier","modelValue","onUpdate:modelValue"]),u(s,{style:{float:"right",cursor:"pointer",padding:"2px"},onClick:T=>U.value.splice(U.value.findIndex(r=>r.scheduledTime===t.scheduledTime&&r.title===t.title&&r.auditorium===t.auditorium),1)},{default:m(()=>e[38]||(e[38]=[p(" delete")])),_:2,__:[38]},1032,["onClick"])],12,bt))),128))]),_:1}),U.value.length?D("",!0):(_(),h("p",vt,"Geen voorstellingen gepland."))]),u(v,{class:"secondary",onClick:e[10]||(e[10]=t=>U.value.push({scheduledTime:new Date,title:"",auditorium:"",i:U.value.length}))},{default:m(()=>[u(s,null,{default:m(()=>e[39]||(e[39]=[p("add")])),_:1,__:[39]}),e[40]||(e[40]=l("span",null,"Nieuwe voorstelling",-1))]),_:1,__:[40]})]),_:1,__:[41]})):D("",!0),g.value?(_(),Z(R,{key:1,onDismiss:e[12]||(e[12]=t=>g.value=!1)},{default:m(()=>[e[47]||(e[47]=l("h3",null,"Configuratie",-1)),l("div",_t,[e[46]||(e[46]=l("div",{class:"flex",style:{"flex-direction":"column"}},null,-1)),l("div",yt,[(_(),h(H,null,N(q,(t,T)=>u(v,{class:"secondary",key:T,onClick:r=>ae.value=t.lines()},{default:m(()=>[p(F(t.name),1)]),_:2},1032,["onClick"])),64))]),l("div",kt,[(_(!0),h(H,null,N(ae.value,(t,T)=>(_(),h("div",{class:"display-line",key:T},[l("div",ht,[u(b,{class:"no-label",identifier:`line-${T}-enabled`,modelValue:t.enabled,"onUpdate:modelValue":r=>t.enabled=r},null,8,["identifier","modelValue","onUpdate:modelValue"]),u(f,{class:A(["no-label",{"too-long":t.textString.length>60}]),identifier:`line-${T}-text`,modelValue:t.textString,"onUpdate:modelValue":r=>t.textString=r},null,8,["identifier","modelValue","onUpdate:modelValue","class"])]),t.textString.length?(_(),h("div",xt,[l("div",wt,[(_(),h(H,null,N({left:["Links uitlijnen","format_align_left"],center:["Centreren","format_align_center"],right:["Rechts uitlijnen","format_align_right"],marquee:["Lichtkrant","keyboard_double_arrow_left"],"marquee-reverse":["Omgekeerde lichtkrant","keyboard_double_arrow_right"]},(r,O)=>l("a",{onClick:z=>t.align=O,class:A({selected:t.align===O}),title:r[0]},[u(s,null,{default:m(()=>[p(F(r[1]),1)]),_:2},1024)],10,Tt)),64))]),l("div",Ct,[(_(),h(H,null,N({0:["Zwarte tekst","#000"],1:["Rode tekst","rgb(227, 46, 46)"],2:["Groene tekst","rgb(35, 160, 35)"],3:["Oranje tekst","rgb(255, 178, 36)"]},(r,O,z)=>l("a",{onClick:Ne=>t.fcolor=z,class:A({selected:t.fcolor===z}),title:r[0]},[u(s,{style:G({color:r[1]})},{default:m(()=>e[42]||(e[42]=[p("format_color_text")])),_:2,__:[42]},1032,["style"])],10,$t)),64))]),l("div",Vt,[(_(),h(H,null,N({0:["Zwarte tekst","#000"],1:["Rode tekst","rgb(227, 46, 46)"],2:["Groene tekst","rgb(35, 160, 35)"],3:["Oranje tekst","rgb(255, 178, 36)"]},(r,O,z)=>l("a",{onClick:Ne=>t.bcolor=z,class:A({selected:t.bcolor===z}),title:r[0]},[u(s,{style:G({color:r[1]})},{default:m(()=>e[43]||(e[43]=[p("format_color_fill")])),_:2,__:[43]},1032,["style"])],10,St)),64))]),t.align==="marquee"||t.align==="marquee-reverse"?(_(),h("div",Ut,[l("a",{onClick:r=>t.speed=Math.max(0,t.speed-1),title:"Langzamer"},[u(s,null,{default:m(()=>e[44]||(e[44]=[p("remove")])),_:1,__:[44]})],8,Bt),l("span",null,F(t.speed),1),l("a",{onClick:r=>t.speed=Math.min(9,t.speed+1),title:"Sneller"},[u(s,null,{default:m(()=>e[45]||(e[45]=[p("add")])),_:1,__:[45]})],8,Dt)])):D("",!0)])):D("",!0)]))),128))])])]),_:1,__:[47]})):D("",!0),oe.value?(_(),Z(R,{key:2,onDismiss:e[16]||(e[16]=t=>oe.value=!1)},{default:m(()=>[l("div",jt,[l("pre",At,F(x.value),1),l("pre",Ht,F(Ae(x.value).replace(/[\n\r\t]/g," ").match(/.{1,16}/g).join(`
`)),1)]),u(f,{modelValue:se.value,"onUpdate:modelValue":e[13]||(e[13]=t=>se.value=t),identifier:"ip"},{default:m(()=>e[48]||(e[48]=[l("span",null,"ip1",-1)])),_:1,__:[48]},8,["modelValue"]),u(f,{modelValue:ie.value,"onUpdate:modelValue":e[14]||(e[14]=t=>ie.value=t),identifier:"ip2"},{default:m(()=>e[49]||(e[49]=[l("span",null,"ip2",-1)])),_:1,__:[49]},8,["modelValue"]),u(b,{modelValue:y.value,"onUpdate:modelValue":e[15]||(e[15]=t=>y.value=t),identifier:"autoSend"},{default:m(()=>e[50]||(e[50]=[l("span",null,"autoSend",-1)])),_:1,__:[50]},8,["modelValue"])]),_:1})):D("",!0)])}}}),Mt=Ce(Nt,[["__scopeId","data-v-3e56827e"]]),Rt={key:0,class:"dropzone"},Et=_e({__name:"NarrowcastingView",setup(C){const n=Ve();Ie();const i=$e("history"),d=S(!1);n.$subscribe(()=>{var y;if(!i.download||!((y=n.table)!=null&&y.length)||a.value.length<10||d.value)return;const c=new Blob([a.value],{type:"text/plain"}),k=document.createElement("a");k.href=URL.createObjectURL(c),k.download="timetable.xml",k.click(),URL.revokeObjectURL(k.href),d.value=!0});const a=W(()=>{const c=y=>"  ".repeat(y),k=n.table.map((y,j)=>g(y,j).split("><").join(`>
${c(2)}<`)).join(`
${c(1)}`);return`<voorstellingen>
${c(1)}${k}
</voorstellingen>`});function g(c,k){return`<Shows><ID type="Long Integer">${k}</ID><DatumVan type="Date/Time">${M(c.scheduledTime,"dd-MM-yyyy")}</DatumVan><DatumTot type="Date/Time">${M(c.scheduledTime,"dd-MM-yyyy")}</DatumTot><Tijd type="Date/Time">${M(c.scheduledTime,"HH:mm")}</Tijd><Titel type="Text">${c.playlist}</Titel><Zaal type="Text">${c.auditoriumNumber}</Zaal><Kleur type="Long Integer">3</Kleur><Permanent type="Long Integer">1</Permanent></Shows>`}const w=S(null),{isOverDropZone:x}=Qe(w,{onDrop:n.filesUploaded,multiple:!1});return(c,k)=>{const y=Xe,j=tt,I=Mt;return _(),h("main",{ref_key:"main",ref:w},[u(y),u(j),u(I),P(x)?(_(),h("div",Rt," Laat los om bestand te uploaden ")):D("",!0)],512)}}});export{Et as default};
