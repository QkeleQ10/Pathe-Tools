import{_ as Ge,a as Xe,b as qe,c as Ye}from"./InputNumber-BQL4G3Au.js";import{_ as He}from"./Chip-DBSBR3Ii.js";import{M as ze,r as Ae,d as We,c as L,o as w,g as $,u as k,w as z,l as I,b as N,j as C,f as $e,_ as Be,e as te,i as Qe,h as se,C as Je,s as De,q as me,F as de,k as Ce,n as Ze,p as et}from"./index-C5ES1AEp.js";import{_ as tt,u as nt,a as it}from"./FileUploadBlock-BvVb1z_4.js";import{n as at}from"./nl-CmXxS_wI.js";function rt(d){if(Object.prototype.hasOwnProperty.call(d,"__esModule"))return d;var l=d.default;if(typeof l=="function"){var T=function i(){return this instanceof i?Reflect.construct(l,arguments,this.constructor):l.apply(this,arguments)};T.prototype=l.prototype}else T={};return Object.defineProperty(T,"__esModule",{value:!0}),Object.keys(d).forEach(function(i){var m=Object.getOwnPropertyDescriptor(d,i);Object.defineProperty(T,i,m.get?m:{enumerable:!0,get:function(){return d[i]}})}),T}var Ee={};const st={},ut=Object.freeze(Object.defineProperty({__proto__:null,default:st},Symbol.toStringTag,{value:"Module"})),Ie=rt(ut);var Se;function ot(){return Se||(Se=1,function(d){(function(l){l.parser=function(t,e){return new i(t,e)},l.SAXParser=i,l.SAXStream=x,l.createStream=h,l.MAX_BUFFER_LENGTH=64*1024;var T=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];l.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function i(t,e){if(!(this instanceof i))return new i(t,e);var c=this;F(c),c.q=c.c="",c.bufferCheckPosition=l.MAX_BUFFER_LENGTH,c.opt=e||{},c.opt.lowercase=c.opt.lowercase||c.opt.lowercasetags,c.looseCase=c.opt.lowercase?"toLowerCase":"toUpperCase",c.tags=[],c.closed=c.closedRoot=c.sawRoot=!1,c.tag=c.error=null,c.strict=!!t,c.noscript=!!(t||c.opt.noscript),c.state=a.BEGIN,c.strictEntities=c.opt.strictEntities,c.ENTITIES=c.strictEntities?Object.create(l.XML_ENTITIES):Object.create(l.ENTITIES),c.attribList=[],c.opt.xmlns&&(c.ns=Object.create(Z)),c.opt.unquotedAttributeValues===void 0&&(c.opt.unquotedAttributeValues=!t),c.trackPosition=c.opt.position!==!1,c.trackPosition&&(c.position=c.line=c.column=0),W(c,"onready")}Object.create||(Object.create=function(t){function e(){}e.prototype=t;var c=new e;return c}),Object.keys||(Object.keys=function(t){var e=[];for(var c in t)t.hasOwnProperty(c)&&e.push(c);return e});function m(t){for(var e=Math.max(l.MAX_BUFFER_LENGTH,10),c=0,s=0,v=T.length;s<v;s++){var K=t[T[s]].length;if(K>e)switch(T[s]){case"textNode":Y(t);break;case"cdata":b(t,"oncdata",t.cdata),t.cdata="";break;case"script":b(t,"onscript",t.script),t.script="";break;default:U(t,"Max buffer length exceeded: "+T[s])}c=Math.max(c,K)}var P=l.MAX_BUFFER_LENGTH-c;t.bufferCheckPosition=P+t.position}function F(t){for(var e=0,c=T.length;e<c;e++)t[T[e]]=""}function R(t){Y(t),t.cdata!==""&&(b(t,"oncdata",t.cdata),t.cdata=""),t.script!==""&&(b(t,"onscript",t.script),t.script="")}i.prototype={end:function(){O(this)},write:ce,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){R(this)}};var S;try{S=Ie.Stream}catch{S=function(){}}S||(S=function(){});var V=l.EVENTS.filter(function(t){return t!=="error"&&t!=="end"});function h(t,e){return new x(t,e)}function x(t,e){if(!(this instanceof x))return new x(t,e);S.apply(this),this._parser=new i(t,e),this.writable=!0,this.readable=!0;var c=this;this._parser.onend=function(){c.emit("end")},this._parser.onerror=function(s){c.emit("error",s),c._parser.error=null},this._decoder=null,V.forEach(function(s){Object.defineProperty(c,"on"+s,{get:function(){return c._parser["on"+s]},set:function(v){if(!v)return c.removeAllListeners(s),c._parser["on"+s]=v,v;c.on(s,v)},enumerable:!0,configurable:!1})})}x.prototype=Object.create(S.prototype,{constructor:{value:x}}),x.prototype.write=function(t){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(t)){if(!this._decoder){var e=Ie.StringDecoder;this._decoder=new e("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},x.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},x.prototype.on=function(t,e){var c=this;return!c._parser["on"+t]&&V.indexOf(t)!==-1&&(c._parser["on"+t]=function(){var s=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);s.splice(0,0,t),c.emit.apply(c,s)}),S.prototype.on.call(c,t,e)};var Q="[CDATA[",q="DOCTYPE",M="http://www.w3.org/XML/1998/namespace",B="http://www.w3.org/2000/xmlns/",Z={xml:M,xmlns:B},H=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,o=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,u=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function n(t){return t===" "||t===`
`||t==="\r"||t==="	"}function f(t){return t==='"'||t==="'"}function E(t){return t===">"||n(t)}function g(t,e){return t.test(e)}function _(t,e){return!g(t,e)}var a=0;l.STATE={BEGIN:a++,BEGIN_WHITESPACE:a++,TEXT:a++,TEXT_ENTITY:a++,OPEN_WAKA:a++,SGML_DECL:a++,SGML_DECL_QUOTED:a++,DOCTYPE:a++,DOCTYPE_QUOTED:a++,DOCTYPE_DTD:a++,DOCTYPE_DTD_QUOTED:a++,COMMENT_STARTING:a++,COMMENT:a++,COMMENT_ENDING:a++,COMMENT_ENDED:a++,CDATA:a++,CDATA_ENDING:a++,CDATA_ENDING_2:a++,PROC_INST:a++,PROC_INST_BODY:a++,PROC_INST_ENDING:a++,OPEN_TAG:a++,OPEN_TAG_SLASH:a++,ATTRIB:a++,ATTRIB_NAME:a++,ATTRIB_NAME_SAW_WHITE:a++,ATTRIB_VALUE:a++,ATTRIB_VALUE_QUOTED:a++,ATTRIB_VALUE_CLOSED:a++,ATTRIB_VALUE_UNQUOTED:a++,ATTRIB_VALUE_ENTITY_Q:a++,ATTRIB_VALUE_ENTITY_U:a++,CLOSE_TAG:a++,CLOSE_TAG_SAW_WHITE:a++,SCRIPT:a++,SCRIPT_ENDING:a++},l.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},l.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(l.ENTITIES).forEach(function(t){var e=l.ENTITIES[t],c=typeof e=="number"?String.fromCharCode(e):e;l.ENTITIES[t]=c});for(var p in l.STATE)l.STATE[l.STATE[p]]=p;a=l.STATE;function W(t,e,c){t[e]&&t[e](c)}function b(t,e,c){t.textNode&&Y(t),W(t,e,c)}function Y(t){t.textNode=D(t.opt,t.textNode),t.textNode&&W(t,"ontext",t.textNode),t.textNode=""}function D(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function U(t,e){return Y(t),t.trackPosition&&(e+=`
Line: `+t.line+`
Column: `+t.column+`
Char: `+t.c),e=new Error(e),t.error=e,W(t,"onerror",e),t}function O(t){return t.sawRoot&&!t.closedRoot&&y(t,"Unclosed root tag"),t.state!==a.BEGIN&&t.state!==a.BEGIN_WHITESPACE&&t.state!==a.TEXT&&U(t,"Unexpected end"),Y(t),t.c="",t.closed=!0,W(t,"onend"),i.call(t,t.strict,t.opt),t}function y(t,e){if(typeof t!="object"||!(t instanceof i))throw new Error("bad call to strictFail");t.strict&&U(t,e)}function A(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,c=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(c.ns=e.ns),t.attribList.length=0,b(t,"onopentagstart",c)}function ne(t,e){var c=t.indexOf(":"),s=c<0?["",t]:t.split(":"),v=s[0],K=s[1];return e&&t==="xmlns"&&(v="xmlns",K=""),{prefix:v,local:K}}function ie(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),t.attribList.indexOf(t.attribName)!==-1||t.tag.attributes.hasOwnProperty(t.attribName)){t.attribName=t.attribValue="";return}if(t.opt.xmlns){var e=ne(t.attribName,!0),c=e.prefix,s=e.local;if(c==="xmlns")if(s==="xml"&&t.attribValue!==M)y(t,"xml: prefix must be bound to "+M+`
Actual: `+t.attribValue);else if(s==="xmlns"&&t.attribValue!==B)y(t,"xmlns: prefix must be bound to "+B+`
Actual: `+t.attribValue);else{var v=t.tag,K=t.tags[t.tags.length-1]||t;v.ns===K.ns&&(v.ns=Object.create(K.ns)),v.ns[s]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,b(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}function J(t,e){if(t.opt.xmlns){var c=t.tag,s=ne(t.tagName);c.prefix=s.prefix,c.local=s.local,c.uri=c.ns[s.prefix]||"",c.prefix&&!c.uri&&(y(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),c.uri=s.prefix);var v=t.tags[t.tags.length-1]||t;c.ns&&v.ns!==c.ns&&Object.keys(c.ns).forEach(function(he){b(t,"onopennamespace",{prefix:he,uri:c.ns[he]})});for(var K=0,P=t.attribList.length;K<P;K++){var G=t.attribList[K],X=G[0],re=G[1],j=ne(X,!0),ee=j.prefix,Ve=j.local,xe=ee===""?"":c.ns[ee]||"",fe={name:X,value:re,prefix:ee,local:Ve,uri:xe};ee&&ee!=="xmlns"&&!xe&&(y(t,"Unbound namespace prefix: "+JSON.stringify(ee)),fe.uri=ee),t.tag.attributes[X]=fe,b(t,"onattribute",fe)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),b(t,"onopentag",t.tag),e||(!t.noscript&&t.tagName.toLowerCase()==="script"?t.state=a.SCRIPT:t.state=a.TEXT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function ae(t){if(!t.tagName){y(t,"Weird empty close tag."),t.textNode+="</>",t.state=a.TEXT;return}if(t.script){if(t.tagName!=="script"){t.script+="</"+t.tagName+">",t.tagName="",t.state=a.SCRIPT;return}b(t,"onscript",t.script),t.script=""}var e=t.tags.length,c=t.tagName;t.strict||(c=c[t.looseCase]());for(var s=c;e--;){var v=t.tags[e];if(v.name!==s)y(t,"Unexpected close tag");else break}if(e<0){y(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",t.state=a.TEXT;return}t.tagName=c;for(var K=t.tags.length;K-- >e;){var P=t.tag=t.tags.pop();t.tagName=t.tag.name,b(t,"onclosetag",t.tagName);var G={};for(var X in P.ns)G[X]=P.ns[X];var re=t.tags[t.tags.length-1]||t;t.opt.xmlns&&P.ns!==re.ns&&Object.keys(P.ns).forEach(function(j){var ee=P.ns[j];b(t,"onclosenamespace",{prefix:j,uri:ee})})}e===0&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=a.TEXT}function le(t){var e=t.entity,c=e.toLowerCase(),s,v="";return t.ENTITIES[e]?t.ENTITIES[e]:t.ENTITIES[c]?t.ENTITIES[c]:(e=c,e.charAt(0)==="#"&&(e.charAt(1)==="x"?(e=e.slice(2),s=parseInt(e,16),v=s.toString(16)):(e=e.slice(1),s=parseInt(e,10),v=s.toString(10))),e=e.replace(/^0+/,""),isNaN(s)||v.toLowerCase()!==e?(y(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(s))}function ue(t,e){e==="<"?(t.state=a.OPEN_WAKA,t.startTagPosition=t.position):n(e)||(y(t,"Non-whitespace before first tag."),t.textNode=e,t.state=a.TEXT)}function oe(t,e){var c="";return e<t.length&&(c=t.charAt(e)),c}function ce(t){var e=this;if(this.error)throw this.error;if(e.closed)return U(e,"Cannot write after close. Assign an onready handler.");if(t===null)return O(e);typeof t=="object"&&(t=t.toString());for(var c=0,s="";s=oe(t,c++),e.c=s,!!s;)switch(e.trackPosition&&(e.position++,s===`
`?(e.line++,e.column=0):e.column++),e.state){case a.BEGIN:if(e.state=a.BEGIN_WHITESPACE,s==="\uFEFF")continue;ue(e,s);continue;case a.BEGIN_WHITESPACE:ue(e,s);continue;case a.TEXT:if(e.sawRoot&&!e.closedRoot){for(var v=c-1;s&&s!=="<"&&s!=="&";)s=oe(t,c++),s&&e.trackPosition&&(e.position++,s===`
`?(e.line++,e.column=0):e.column++);e.textNode+=t.substring(v,c-1)}s==="<"&&!(e.sawRoot&&e.closedRoot&&!e.strict)?(e.state=a.OPEN_WAKA,e.startTagPosition=e.position):(!n(s)&&(!e.sawRoot||e.closedRoot)&&y(e,"Text data outside of root node."),s==="&"?e.state=a.TEXT_ENTITY:e.textNode+=s);continue;case a.SCRIPT:s==="<"?e.state=a.SCRIPT_ENDING:e.script+=s;continue;case a.SCRIPT_ENDING:s==="/"?e.state=a.CLOSE_TAG:(e.script+="<"+s,e.state=a.SCRIPT);continue;case a.OPEN_WAKA:if(s==="!")e.state=a.SGML_DECL,e.sgmlDecl="";else if(!n(s))if(g(H,s))e.state=a.OPEN_TAG,e.tagName=s;else if(s==="/")e.state=a.CLOSE_TAG,e.tagName="";else if(s==="?")e.state=a.PROC_INST,e.procInstName=e.procInstBody="";else{if(y(e,"Unencoded <"),e.startTagPosition+1<e.position){var K=e.position-e.startTagPosition;s=new Array(K).join(" ")+s}e.textNode+="<"+s,e.state=a.TEXT}continue;case a.SGML_DECL:if(e.sgmlDecl+s==="--"){e.state=a.COMMENT,e.comment="",e.sgmlDecl="";continue}e.doctype&&e.doctype!==!0&&e.sgmlDecl?(e.state=a.DOCTYPE_DTD,e.doctype+="<!"+e.sgmlDecl+s,e.sgmlDecl=""):(e.sgmlDecl+s).toUpperCase()===Q?(b(e,"onopencdata"),e.state=a.CDATA,e.sgmlDecl="",e.cdata=""):(e.sgmlDecl+s).toUpperCase()===q?(e.state=a.DOCTYPE,(e.doctype||e.sawRoot)&&y(e,"Inappropriately located doctype declaration"),e.doctype="",e.sgmlDecl=""):s===">"?(b(e,"onsgmldeclaration",e.sgmlDecl),e.sgmlDecl="",e.state=a.TEXT):(f(s)&&(e.state=a.SGML_DECL_QUOTED),e.sgmlDecl+=s);continue;case a.SGML_DECL_QUOTED:s===e.q&&(e.state=a.SGML_DECL,e.q=""),e.sgmlDecl+=s;continue;case a.DOCTYPE:s===">"?(e.state=a.TEXT,b(e,"ondoctype",e.doctype),e.doctype=!0):(e.doctype+=s,s==="["?e.state=a.DOCTYPE_DTD:f(s)&&(e.state=a.DOCTYPE_QUOTED,e.q=s));continue;case a.DOCTYPE_QUOTED:e.doctype+=s,s===e.q&&(e.q="",e.state=a.DOCTYPE);continue;case a.DOCTYPE_DTD:s==="]"?(e.doctype+=s,e.state=a.DOCTYPE):s==="<"?(e.state=a.OPEN_WAKA,e.startTagPosition=e.position):f(s)?(e.doctype+=s,e.state=a.DOCTYPE_DTD_QUOTED,e.q=s):e.doctype+=s;continue;case a.DOCTYPE_DTD_QUOTED:e.doctype+=s,s===e.q&&(e.state=a.DOCTYPE_DTD,e.q="");continue;case a.COMMENT:s==="-"?e.state=a.COMMENT_ENDING:e.comment+=s;continue;case a.COMMENT_ENDING:s==="-"?(e.state=a.COMMENT_ENDED,e.comment=D(e.opt,e.comment),e.comment&&b(e,"oncomment",e.comment),e.comment=""):(e.comment+="-"+s,e.state=a.COMMENT);continue;case a.COMMENT_ENDED:s!==">"?(y(e,"Malformed comment"),e.comment+="--"+s,e.state=a.COMMENT):e.doctype&&e.doctype!==!0?e.state=a.DOCTYPE_DTD:e.state=a.TEXT;continue;case a.CDATA:s==="]"?e.state=a.CDATA_ENDING:e.cdata+=s;continue;case a.CDATA_ENDING:s==="]"?e.state=a.CDATA_ENDING_2:(e.cdata+="]"+s,e.state=a.CDATA);continue;case a.CDATA_ENDING_2:s===">"?(e.cdata&&b(e,"oncdata",e.cdata),b(e,"onclosecdata"),e.cdata="",e.state=a.TEXT):s==="]"?e.cdata+="]":(e.cdata+="]]"+s,e.state=a.CDATA);continue;case a.PROC_INST:s==="?"?e.state=a.PROC_INST_ENDING:n(s)?e.state=a.PROC_INST_BODY:e.procInstName+=s;continue;case a.PROC_INST_BODY:if(!e.procInstBody&&n(s))continue;s==="?"?e.state=a.PROC_INST_ENDING:e.procInstBody+=s;continue;case a.PROC_INST_ENDING:s===">"?(b(e,"onprocessinginstruction",{name:e.procInstName,body:e.procInstBody}),e.procInstName=e.procInstBody="",e.state=a.TEXT):(e.procInstBody+="?"+s,e.state=a.PROC_INST_BODY);continue;case a.OPEN_TAG:g(o,s)?e.tagName+=s:(A(e),s===">"?J(e):s==="/"?e.state=a.OPEN_TAG_SLASH:(n(s)||y(e,"Invalid character in tag name"),e.state=a.ATTRIB));continue;case a.OPEN_TAG_SLASH:s===">"?(J(e,!0),ae(e)):(y(e,"Forward-slash in opening tag not followed by >"),e.state=a.ATTRIB);continue;case a.ATTRIB:if(n(s))continue;s===">"?J(e):s==="/"?e.state=a.OPEN_TAG_SLASH:g(H,s)?(e.attribName=s,e.attribValue="",e.state=a.ATTRIB_NAME):y(e,"Invalid attribute name");continue;case a.ATTRIB_NAME:s==="="?e.state=a.ATTRIB_VALUE:s===">"?(y(e,"Attribute without value"),e.attribValue=e.attribName,ie(e),J(e)):n(s)?e.state=a.ATTRIB_NAME_SAW_WHITE:g(o,s)?e.attribName+=s:y(e,"Invalid attribute name");continue;case a.ATTRIB_NAME_SAW_WHITE:if(s==="=")e.state=a.ATTRIB_VALUE;else{if(n(s))continue;y(e,"Attribute without value"),e.tag.attributes[e.attribName]="",e.attribValue="",b(e,"onattribute",{name:e.attribName,value:""}),e.attribName="",s===">"?J(e):g(H,s)?(e.attribName=s,e.state=a.ATTRIB_NAME):(y(e,"Invalid attribute name"),e.state=a.ATTRIB)}continue;case a.ATTRIB_VALUE:if(n(s))continue;f(s)?(e.q=s,e.state=a.ATTRIB_VALUE_QUOTED):(e.opt.unquotedAttributeValues||U(e,"Unquoted attribute value"),e.state=a.ATTRIB_VALUE_UNQUOTED,e.attribValue=s);continue;case a.ATTRIB_VALUE_QUOTED:if(s!==e.q){s==="&"?e.state=a.ATTRIB_VALUE_ENTITY_Q:e.attribValue+=s;continue}ie(e),e.q="",e.state=a.ATTRIB_VALUE_CLOSED;continue;case a.ATTRIB_VALUE_CLOSED:n(s)?e.state=a.ATTRIB:s===">"?J(e):s==="/"?e.state=a.OPEN_TAG_SLASH:g(H,s)?(y(e,"No whitespace between attributes"),e.attribName=s,e.attribValue="",e.state=a.ATTRIB_NAME):y(e,"Invalid attribute name");continue;case a.ATTRIB_VALUE_UNQUOTED:if(!E(s)){s==="&"?e.state=a.ATTRIB_VALUE_ENTITY_U:e.attribValue+=s;continue}ie(e),s===">"?J(e):e.state=a.ATTRIB;continue;case a.CLOSE_TAG:if(e.tagName)s===">"?ae(e):g(o,s)?e.tagName+=s:e.script?(e.script+="</"+e.tagName,e.tagName="",e.state=a.SCRIPT):(n(s)||y(e,"Invalid tagname in closing tag"),e.state=a.CLOSE_TAG_SAW_WHITE);else{if(n(s))continue;_(H,s)?e.script?(e.script+="</"+s,e.state=a.SCRIPT):y(e,"Invalid tagname in closing tag."):e.tagName=s}continue;case a.CLOSE_TAG_SAW_WHITE:if(n(s))continue;s===">"?ae(e):y(e,"Invalid characters in closing tag");continue;case a.TEXT_ENTITY:case a.ATTRIB_VALUE_ENTITY_Q:case a.ATTRIB_VALUE_ENTITY_U:var P,G;switch(e.state){case a.TEXT_ENTITY:P=a.TEXT,G="textNode";break;case a.ATTRIB_VALUE_ENTITY_Q:P=a.ATTRIB_VALUE_QUOTED,G="attribValue";break;case a.ATTRIB_VALUE_ENTITY_U:P=a.ATTRIB_VALUE_UNQUOTED,G="attribValue";break}if(s===";"){var X=le(e);e.opt.unparsedEntities&&!Object.values(l.XML_ENTITIES).includes(X)?(e.entity="",e.state=P,e.write(X)):(e[G]+=X,e.entity="",e.state=P)}else g(e.entity.length?r:u,s)?e.entity+=s:(y(e,"Invalid character in entity name"),e[G]+="&"+e.entity+s,e.entity="",e.state=P);continue;default:throw new Error(e,"Unknown state: "+e.state)}return e.position>=e.bufferCheckPosition&&m(e),e}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var t=String.fromCharCode,e=Math.floor,c=function(){var s=16384,v=[],K,P,G=-1,X=arguments.length;if(!X)return"";for(var re="";++G<X;){var j=Number(arguments[G]);if(!isFinite(j)||j<0||j>1114111||e(j)!==j)throw RangeError("Invalid code point: "+j);j<=65535?v.push(j):(j-=65536,K=(j>>10)+55296,P=j%1024+56320,v.push(K,P)),(G+1===X||v.length>s)&&(re+=t.apply(null,v),v.length=0)}return re};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:c,configurable:!0,writable:!0}):String.fromCodePoint=c}()})(d)}(Ee)),Ee}var Te,Oe;function ve(){return Oe||(Oe=1,Te={isArray:function(d){return Array.isArray?Array.isArray(d):Object.prototype.toString.call(d)==="[object Array]"}}),Te}var ge,we;function Fe(){if(we)return ge;we=1;var d=ve().isArray;return ge={copyOptions:function(l){var T,i={};for(T in l)l.hasOwnProperty(T)&&(i[T]=l[T]);return i},ensureFlagExists:function(l,T){(!(l in T)||typeof T[l]!="boolean")&&(T[l]=!1)},ensureSpacesExists:function(l){(!("spaces"in l)||typeof l.spaces!="number"&&typeof l.spaces!="string")&&(l.spaces=0)},ensureAlwaysArrayExists:function(l){(!("alwaysArray"in l)||typeof l.alwaysArray!="boolean"&&!d(l.alwaysArray))&&(l.alwaysArray=!1)},ensureKeyExists:function(l,T){(!(l+"Key"in T)||typeof T[l+"Key"]!="string")&&(T[l+"Key"]=T.compact?"_"+l:l)},checkFnExists:function(l,T){return l+"Fn"in T}},ge}var ye,Re;function je(){if(Re)return ye;Re=1;var d=ot(),l=Fe(),T=ve().isArray,i,m;function F(o){return i=l.copyOptions(o),l.ensureFlagExists("ignoreDeclaration",i),l.ensureFlagExists("ignoreInstruction",i),l.ensureFlagExists("ignoreAttributes",i),l.ensureFlagExists("ignoreText",i),l.ensureFlagExists("ignoreComment",i),l.ensureFlagExists("ignoreCdata",i),l.ensureFlagExists("ignoreDoctype",i),l.ensureFlagExists("compact",i),l.ensureFlagExists("alwaysChildren",i),l.ensureFlagExists("addParent",i),l.ensureFlagExists("trim",i),l.ensureFlagExists("nativeType",i),l.ensureFlagExists("nativeTypeAttributes",i),l.ensureFlagExists("sanitize",i),l.ensureFlagExists("instructionHasAttributes",i),l.ensureFlagExists("captureSpacesBetweenElements",i),l.ensureAlwaysArrayExists(i),l.ensureKeyExists("declaration",i),l.ensureKeyExists("instruction",i),l.ensureKeyExists("attributes",i),l.ensureKeyExists("text",i),l.ensureKeyExists("comment",i),l.ensureKeyExists("cdata",i),l.ensureKeyExists("doctype",i),l.ensureKeyExists("type",i),l.ensureKeyExists("name",i),l.ensureKeyExists("elements",i),l.ensureKeyExists("parent",i),l.checkFnExists("doctype",i),l.checkFnExists("instruction",i),l.checkFnExists("cdata",i),l.checkFnExists("comment",i),l.checkFnExists("text",i),l.checkFnExists("instructionName",i),l.checkFnExists("elementName",i),l.checkFnExists("attributeName",i),l.checkFnExists("attributeValue",i),l.checkFnExists("attributes",i),i}function R(o){var u=Number(o);if(!isNaN(u))return u;var r=o.toLowerCase();return r==="true"?!0:r==="false"?!1:o}function S(o,u){var r;if(i.compact){if(!m[i[o+"Key"]]&&(T(i.alwaysArray)?i.alwaysArray.indexOf(i[o+"Key"])!==-1:i.alwaysArray)&&(m[i[o+"Key"]]=[]),m[i[o+"Key"]]&&!T(m[i[o+"Key"]])&&(m[i[o+"Key"]]=[m[i[o+"Key"]]]),o+"Fn"in i&&typeof u=="string"&&(u=i[o+"Fn"](u,m)),o==="instruction"&&("instructionFn"in i||"instructionNameFn"in i)){for(r in u)if(u.hasOwnProperty(r))if("instructionFn"in i)u[r]=i.instructionFn(u[r],r,m);else{var n=u[r];delete u[r],u[i.instructionNameFn(r,n,m)]=n}}T(m[i[o+"Key"]])?m[i[o+"Key"]].push(u):m[i[o+"Key"]]=u}else{m[i.elementsKey]||(m[i.elementsKey]=[]);var f={};if(f[i.typeKey]=o,o==="instruction"){for(r in u)if(u.hasOwnProperty(r))break;f[i.nameKey]="instructionNameFn"in i?i.instructionNameFn(r,u,m):r,i.instructionHasAttributes?(f[i.attributesKey]=u[r][i.attributesKey],"instructionFn"in i&&(f[i.attributesKey]=i.instructionFn(f[i.attributesKey],r,m))):("instructionFn"in i&&(u[r]=i.instructionFn(u[r],r,m)),f[i.instructionKey]=u[r])}else o+"Fn"in i&&(u=i[o+"Fn"](u,m)),f[i[o+"Key"]]=u;i.addParent&&(f[i.parentKey]=m),m[i.elementsKey].push(f)}}function V(o){if("attributesFn"in i&&o&&(o=i.attributesFn(o,m)),(i.trim||"attributeValueFn"in i||"attributeNameFn"in i||i.nativeTypeAttributes)&&o){var u;for(u in o)if(o.hasOwnProperty(u)&&(i.trim&&(o[u]=o[u].trim()),i.nativeTypeAttributes&&(o[u]=R(o[u])),"attributeValueFn"in i&&(o[u]=i.attributeValueFn(o[u],u,m)),"attributeNameFn"in i)){var r=o[u];delete o[u],o[i.attributeNameFn(u,o[u],m)]=r}}return o}function h(o){var u={};if(o.body&&(o.name.toLowerCase()==="xml"||i.instructionHasAttributes)){for(var r=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,n;(n=r.exec(o.body))!==null;)u[n[1]]=n[2]||n[3]||n[4];u=V(u)}if(o.name.toLowerCase()==="xml"){if(i.ignoreDeclaration)return;m[i.declarationKey]={},Object.keys(u).length&&(m[i.declarationKey][i.attributesKey]=u),i.addParent&&(m[i.declarationKey][i.parentKey]=m)}else{if(i.ignoreInstruction)return;i.trim&&(o.body=o.body.trim());var f={};i.instructionHasAttributes&&Object.keys(u).length?(f[o.name]={},f[o.name][i.attributesKey]=u):f[o.name]=o.body,S("instruction",f)}}function x(o,u){var r;if(typeof o=="object"&&(u=o.attributes,o=o.name),u=V(u),"elementNameFn"in i&&(o=i.elementNameFn(o,m)),i.compact){if(r={},!i.ignoreAttributes&&u&&Object.keys(u).length){r[i.attributesKey]={};var n;for(n in u)u.hasOwnProperty(n)&&(r[i.attributesKey][n]=u[n])}!(o in m)&&(T(i.alwaysArray)?i.alwaysArray.indexOf(o)!==-1:i.alwaysArray)&&(m[o]=[]),m[o]&&!T(m[o])&&(m[o]=[m[o]]),T(m[o])?m[o].push(r):m[o]=r}else m[i.elementsKey]||(m[i.elementsKey]=[]),r={},r[i.typeKey]="element",r[i.nameKey]=o,!i.ignoreAttributes&&u&&Object.keys(u).length&&(r[i.attributesKey]=u),i.alwaysChildren&&(r[i.elementsKey]=[]),m[i.elementsKey].push(r);r[i.parentKey]=m,m=r}function Q(o){i.ignoreText||!o.trim()&&!i.captureSpacesBetweenElements||(i.trim&&(o=o.trim()),i.nativeType&&(o=R(o)),i.sanitize&&(o=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),S("text",o))}function q(o){i.ignoreComment||(i.trim&&(o=o.trim()),S("comment",o))}function M(o){var u=m[i.parentKey];i.addParent||delete m[i.parentKey],m=u}function B(o){i.ignoreCdata||(i.trim&&(o=o.trim()),S("cdata",o))}function Z(o){i.ignoreDoctype||(o=o.replace(/^ /,""),i.trim&&(o=o.trim()),S("doctype",o))}function H(o){o.note=o}return ye=function(o,u){var r=d.parser(!0,{}),n={};if(m=n,i=F(u),r.opt={strictEntities:!0},r.onopentag=x,r.ontext=Q,r.oncomment=q,r.onclosetag=M,r.onerror=H,r.oncdata=B,r.ondoctype=Z,r.onprocessinginstruction=h,r.write(o).close(),n[i.elementsKey]){var f=n[i.elementsKey];delete n[i.elementsKey],n[i.elementsKey]=f,delete n.text}return n},ye}var _e,Ke;function lt(){if(Ke)return _e;Ke=1;var d=Fe(),l=je();function T(i){var m=d.copyOptions(i);return d.ensureSpacesExists(m),m}return _e=function(i,m){var F,R,S,V;return F=T(m),R=l(i,F),V="compact"in F&&F.compact?"_parent":"parent","addParent"in F&&F.addParent?S=JSON.stringify(R,function(h,x){return h===V?"_":x},F.spaces):S=JSON.stringify(R,null,F.spaces),S.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},_e}var be,Pe;function Ue(){if(Pe)return be;Pe=1;var d=Fe(),l=ve().isArray,T,i;function m(r){var n=d.copyOptions(r);return d.ensureFlagExists("ignoreDeclaration",n),d.ensureFlagExists("ignoreInstruction",n),d.ensureFlagExists("ignoreAttributes",n),d.ensureFlagExists("ignoreText",n),d.ensureFlagExists("ignoreComment",n),d.ensureFlagExists("ignoreCdata",n),d.ensureFlagExists("ignoreDoctype",n),d.ensureFlagExists("compact",n),d.ensureFlagExists("indentText",n),d.ensureFlagExists("indentCdata",n),d.ensureFlagExists("indentAttributes",n),d.ensureFlagExists("indentInstruction",n),d.ensureFlagExists("fullTagEmptyElement",n),d.ensureFlagExists("noQuotesForNativeAttributes",n),d.ensureSpacesExists(n),typeof n.spaces=="number"&&(n.spaces=Array(n.spaces+1).join(" ")),d.ensureKeyExists("declaration",n),d.ensureKeyExists("instruction",n),d.ensureKeyExists("attributes",n),d.ensureKeyExists("text",n),d.ensureKeyExists("comment",n),d.ensureKeyExists("cdata",n),d.ensureKeyExists("doctype",n),d.ensureKeyExists("type",n),d.ensureKeyExists("name",n),d.ensureKeyExists("elements",n),d.checkFnExists("doctype",n),d.checkFnExists("instruction",n),d.checkFnExists("cdata",n),d.checkFnExists("comment",n),d.checkFnExists("text",n),d.checkFnExists("instructionName",n),d.checkFnExists("elementName",n),d.checkFnExists("attributeName",n),d.checkFnExists("attributeValue",n),d.checkFnExists("attributes",n),d.checkFnExists("fullTagEmptyElement",n),n}function F(r,n,f){return(!f&&r.spaces?`
`:"")+Array(n+1).join(r.spaces)}function R(r,n,f){if(n.ignoreAttributes)return"";"attributesFn"in n&&(r=n.attributesFn(r,i,T));var E,g,_,a,p=[];for(E in r)r.hasOwnProperty(E)&&r[E]!==null&&r[E]!==void 0&&(a=n.noQuotesForNativeAttributes&&typeof r[E]!="string"?"":'"',g=""+r[E],g=g.replace(/"/g,"&quot;"),_="attributeNameFn"in n?n.attributeNameFn(E,g,i,T):E,p.push(n.spaces&&n.indentAttributes?F(n,f+1,!1):" "),p.push(_+"="+a+("attributeValueFn"in n?n.attributeValueFn(g,E,i,T):g)+a));return r&&Object.keys(r).length&&n.spaces&&n.indentAttributes&&p.push(F(n,f,!1)),p.join("")}function S(r,n,f){return T=r,i="xml",n.ignoreDeclaration?"":"<?xml"+R(r[n.attributesKey],n,f)+"?>"}function V(r,n,f){if(n.ignoreInstruction)return"";var E;for(E in r)if(r.hasOwnProperty(E))break;var g="instructionNameFn"in n?n.instructionNameFn(E,r[E],i,T):E;if(typeof r[E]=="object")return T=r,i=g,"<?"+g+R(r[E][n.attributesKey],n,f)+"?>";var _=r[E]?r[E]:"";return"instructionFn"in n&&(_=n.instructionFn(_,E,i,T)),"<?"+g+(_?" "+_:"")+"?>"}function h(r,n){return n.ignoreComment?"":"<!--"+("commentFn"in n?n.commentFn(r,i,T):r)+"-->"}function x(r,n){return n.ignoreCdata?"":"<![CDATA["+("cdataFn"in n?n.cdataFn(r,i,T):r.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function Q(r,n){return n.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in n?n.doctypeFn(r,i,T):r)+">"}function q(r,n){return n.ignoreText?"":(r=""+r,r=r.replace(/&amp;/g,"&"),r=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in n?n.textFn(r,i,T):r)}function M(r,n){var f;if(r.elements&&r.elements.length)for(f=0;f<r.elements.length;++f)switch(r.elements[f][n.typeKey]){case"text":if(n.indentText)return!0;break;case"cdata":if(n.indentCdata)return!0;break;case"instruction":if(n.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function B(r,n,f){T=r,i=r.name;var E=[],g="elementNameFn"in n?n.elementNameFn(r.name,r):r.name;E.push("<"+g),r[n.attributesKey]&&E.push(R(r[n.attributesKey],n,f));var _=r[n.elementsKey]&&r[n.elementsKey].length||r[n.attributesKey]&&r[n.attributesKey]["xml:space"]==="preserve";return _||("fullTagEmptyElementFn"in n?_=n.fullTagEmptyElementFn(r.name,r):_=n.fullTagEmptyElement),_?(E.push(">"),r[n.elementsKey]&&r[n.elementsKey].length&&(E.push(Z(r[n.elementsKey],n,f+1)),T=r,i=r.name),E.push(n.spaces&&M(r,n)?`
`+Array(f+1).join(n.spaces):""),E.push("</"+g+">")):E.push("/>"),E.join("")}function Z(r,n,f,E){return r.reduce(function(g,_){var a=F(n,f,E&&!g);switch(_.type){case"element":return g+a+B(_,n,f);case"comment":return g+a+h(_[n.commentKey],n);case"doctype":return g+a+Q(_[n.doctypeKey],n);case"cdata":return g+(n.indentCdata?a:"")+x(_[n.cdataKey],n);case"text":return g+(n.indentText?a:"")+q(_[n.textKey],n);case"instruction":var p={};return p[_[n.nameKey]]=_[n.attributesKey]?_:_[n.instructionKey],g+(n.indentInstruction?a:"")+V(p,n,f)}},"")}function H(r,n,f){var E;for(E in r)if(r.hasOwnProperty(E))switch(E){case n.parentKey:case n.attributesKey:break;case n.textKey:if(n.indentText||f)return!0;break;case n.cdataKey:if(n.indentCdata||f)return!0;break;case n.instructionKey:if(n.indentInstruction||f)return!0;break;case n.doctypeKey:case n.commentKey:return!0;default:return!0}return!1}function o(r,n,f,E,g){T=r,i=n;var _="elementNameFn"in f?f.elementNameFn(n,r):n;if(typeof r>"u"||r===null||r==="")return"fullTagEmptyElementFn"in f&&f.fullTagEmptyElementFn(n,r)||f.fullTagEmptyElement?"<"+_+"></"+_+">":"<"+_+"/>";var a=[];if(n){if(a.push("<"+_),typeof r!="object")return a.push(">"+q(r,f)+"</"+_+">"),a.join("");r[f.attributesKey]&&a.push(R(r[f.attributesKey],f,E));var p=H(r,f,!0)||r[f.attributesKey]&&r[f.attributesKey]["xml:space"]==="preserve";if(p||("fullTagEmptyElementFn"in f?p=f.fullTagEmptyElementFn(n,r):p=f.fullTagEmptyElement),p)a.push(">");else return a.push("/>"),a.join("")}return a.push(u(r,f,E+1,!1)),T=r,i=n,n&&a.push((g?F(f,E,!1):"")+"</"+_+">"),a.join("")}function u(r,n,f,E){var g,_,a,p=[];for(_ in r)if(r.hasOwnProperty(_))for(a=l(r[_])?r[_]:[r[_]],g=0;g<a.length;++g){switch(_){case n.declarationKey:p.push(S(a[g],n,f));break;case n.instructionKey:p.push((n.indentInstruction?F(n,f,E):"")+V(a[g],n,f));break;case n.attributesKey:case n.parentKey:break;case n.textKey:p.push((n.indentText?F(n,f,E):"")+q(a[g],n));break;case n.cdataKey:p.push((n.indentCdata?F(n,f,E):"")+x(a[g],n));break;case n.doctypeKey:p.push(F(n,f,E)+Q(a[g],n));break;case n.commentKey:p.push(F(n,f,E)+h(a[g],n));break;default:p.push(F(n,f,E)+o(a[g],_,n,f,H(a[g],n)))}E=E&&!p.length}return p.join("")}return be=function(r,n){n=m(n);var f=[];return T=r,i="_root_",n.compact?f.push(u(r,n,0,!0)):(r[n.declarationKey]&&f.push(S(r[n.declarationKey],n,0)),r[n.elementsKey]&&r[n.elementsKey].length&&f.push(Z(r[n.elementsKey],n,0,!f.length))),f.join("")},be}var Ne,Le;function ct(){if(Le)return Ne;Le=1;var d=Ue();return Ne=function(l,T){l instanceof Buffer&&(l=l.toString());var i=null;if(typeof l=="string")try{i=JSON.parse(l)}catch{throw new Error("The JSON structure is invalid")}else i=l;return d(i,T)},Ne}var pe,Me;function ft(){if(Me)return pe;Me=1;var d=je(),l=lt(),T=Ue(),i=ct();return pe={xml2js:d,xml2json:l,js2xml:T,json2xml:i},pe}var mt=ft();const ke=ze("tmsXml",()=>{const d=Ae({}),l=Ae({});async function T(i){const m=i[0];if(!m||!dt(m))return;d.value={},l.value={};const F=await m.text(),R=mt.xml2js(F,{compact:!0});d.value=R==null?void 0:R.CompositionPlaylist,l.value={name:m.name,type:m.type,lastModified:m.lastModified,size:m.size}}return{obj:d,metadata:l,uploadXml:T}});function dt(d){return d.type==="text/xml"||d.name.endsWith(".xml")}const Et={id:"upload"},Tt={key:0,style:{"flex-grow":"1"}},gt={key:1,style:{"flex-grow":"1"}},yt=We({__name:"TmsXmlUploadSection",setup(d){const l=ke();return(T,i)=>{const m=tt;return w(),L("section",Et,[$(m,{onFilesUploaded:k(l).uploadXml,accept:"text/xml,.xml"},{default:z(()=>["name"in k(l).metadata?(w(),L("p",Tt,[I(C(k(l).metadata.name)+" ",1),i[0]||(i[0]=N("br",null,null,-1)),N("small",null," Laatst gewijzigd op "+C(k($e)(new Date(k(l).metadata.lastModified),"PPPpp",{locale:k(at)})),1)])):(w(),L("p",gt,i[1]||(i[1]=[I(" Geen gegevens "),N("br",null,null,-1),N("small",null,[I("Upload een "),N("b",null,"XML"),I("-bestand uit RosettaBridge met de knop of door hem hierheen te slepen.")],-1)])))]),_:1},8,["onFilesUploaded"])])}}}),_t=Be(yt,[["__scopeId","data-v-ad00094a"]]),bt={class:"flex",style:{"flex-wrap":"wrap"}},Nt={style:{flex:"50% 1 1"}},pt={key:0,class:"film"},At={class:"room"},vt={class:"title"},Ft={key:0,class:"time"},xt={key:1,class:"time"},ht={class:"flex chips"},Dt={class:"extra"},Ct={class:"flex proportional-reels"},It=["title"],St={class:"reels"},Ot=["title"],wt={key:0,class:"bold colour"},Rt={class:"extra-extra"},Kt={key:0},Pt={key:1},Lt={key:2},Mt={key:1},Bt={key:0,class:"dropzone"},jt={__name:"IntermissionFinderView",setup(d){const l=ke(),T=Ae(null),i=nt("intermission-percentage-dev",5),m=te(()=>{var o,u,r,n,f,E;return M((E=((r=(u=(o=l.obj)==null?void 0:o.ReelList)==null?void 0:u.Reel)==null?void 0:r[0])||((f=(n=l.obj)==null?void 0:n.ReelList)==null?void 0:f.Reel))==null?void 0:E.AssetList,([g])=>g.includes("CompositionMetadataAsset"))}),F=te(()=>{var o,u,r;return((o=M(m.value,([n])=>n.includes("TitleText")))==null?void 0:o._text)||((r=(u=l.obj)==null?void 0:u.AnnotationText)==null?void 0:r._text.split("_")[0])}),R=te(()=>{var o,u,r,n,f,E;return!!M((E=((r=(u=(o=l.obj)==null?void 0:o.ReelList)==null?void 0:u.Reel)==null?void 0:r[0])||((f=(n=l.obj)==null?void 0:n.ReelList)==null?void 0:f.Reel))==null?void 0:E.AssetList,([g])=>g.includes("StereoscopicPicture"))}),S=te(()=>{var o;return(o=M(M(M(m.value,([u])=>u.includes("SubDescriptors")),([u])=>u.includes("SubDescriptor")),([u])=>u.includes("SpokenLanguage")))==null?void 0:o._text}),V=te(()=>{var o;return(o=M(m.value,([u])=>u.includes("MainSubtitleLanguageList")))==null?void 0:o._text}),h=te(()=>{var r,n,f,E,g,_,a,p,W,b,Y;const o=(n=(r=l.obj)==null?void 0:r.ReelList)==null?void 0:n.Reel;let u=[];if((o==null?void 0:o.length)>0)u.push(...o==null?void 0:o.map((D,U)=>{var ne,ie,J,ae,le,ue,oe,ce,t;const O={},y=D==null?void 0:D.AssetList,A=M(y,([e])=>e.includes("Main")&&e.endsWith("Picture"));return O.title=((ne=A==null?void 0:A.AnnotationText)==null?void 0:ne._text)||`Reel ${U}`,O.frameRate=Number((J=(ie=A==null?void 0:A.EditRate)==null?void 0:ie._text)==null?void 0:J.split(" ")[0])||Number((le=(ae=A==null?void 0:A.FrameRate)==null?void 0:ae._text)==null?void 0:le.split(" ")[0]),O.frames=Number((ue=(A==null?void 0:A.Duration)||(A==null?void 0:A.IntrinsicDuration))==null?void 0:ue._text),O.intrinsicFrames=Number((oe=A==null?void 0:A.IntrinsicDuration)==null?void 0:oe._text),O.duration=O.frames/O.frameRate*1e3,O.intrinsicDuration=O.intrinsicFrames/O.frameRate*1e3,O.entryPoint=Number((ce=A==null?void 0:A.EntryPoint)==null?void 0:ce._text),O.id=(t=A==null?void 0:A.Id)==null?void 0:t._text,O}));else{const D={},U=o,O=U==null?void 0:U.AssetList,y=M(O,([A])=>A.includes("Main")&&A.endsWith("Picture"));D.title=((f=U==null?void 0:U.AnnotationText)==null?void 0:f._text)||"Reel 0",D.frameRate=Number((g=(E=y==null?void 0:y.EditRate)==null?void 0:E._text)==null?void 0:g.split(" ")[0])||Number((a=(_=y==null?void 0:y.FrameRate)==null?void 0:_._text)==null?void 0:a.split(" ")[0]),D.frames=Number((p=(y==null?void 0:y.Duration)||(y==null?void 0:y.IntrinsicDuration))==null?void 0:p._text),D.intrinsicFrames=Number((W=y==null?void 0:y.IntrinsicDuration)==null?void 0:W._text),D.duration=D.frames/D.frameRate*1e3,D.intrinsicDuration=D.intrinsicFrames/D.frameRate*1e3,D.entryPoint=Number((b=y==null?void 0:y.EntryPoint)==null?void 0:b._text),D.id=(Y=y==null?void 0:y.Id)==null?void 0:Y._text,u.push(D)}return u.forEach((D,U)=>{D.properDuration=D.duration/u.reduce((O,y)=>O+y.duration,0),D.properStart=u.slice(0,U).reduce((O,y)=>O+y.properDuration,0)}),u}),x=te(()=>[...h.value].sort((o,u)=>Math.abs(o.properStart-.5)-Math.abs(u.properStart-.5))[0].properStart),Q=te(()=>h.value.findIndex(o=>o.properStart===x.value)),q=te(()=>h.value.reduce((o,u)=>o+u.duration,0));function M(o,u){var r,n;if(typeof o=="object")return(n=(r=Object.entries(o))==null?void 0:r.find(u))==null?void 0:n[1]}function B(o=0,u=24){u=Number(u);let r=o*u/1e3;const n=Math.floor(r/u/60/60),f=Math.floor(r/u/60)%60,E=Math.floor(r/u)%60,g=Math.floor(r%u);return`${String(n).padStart(2,"0")}:${String(f).padStart(2,"0")}:${String(E).padStart(2,"0")}:${String(g).padStart(2,"0")}`}function Z(o,u){return`
${u+1}e reel

Titel: ${o.title||"Geen"}
ID: ${o.id}

Framerate: ${o.frameRate} fps
Duur: ${B(o.duration,o.frameRate)} (${o.frames} frames)

Intrinsieke duur: ${B(o.intrinsicDuration,o.frameRate)} (${o.intrinsicFrames} frames)
Startpunt: ${B(o.entryPoint,o.frameRate)} (${o.entryPoint} frames)`}const{isOverDropZone:H}=it(T,{onDrop:l.uploadXml,dataTypes:["text/xml",".xml"],multiple:!1});return(o,u)=>{var W;const r=Qe,n=_t,f=Je,E=He,g=qe,_=Xe,a=Ge,p=Ye;return w(),L(de,null,[$(r),N("main",{ref_key:"main",ref:T},[$(n),N("section",null,[N("div",bt,[N("div",Nt,[u[21]||(u[21]=N("h2",null,"Filminformatie",-1)),(W=k(l).metadata)!=null&&W.name?(w(),L("div",pt,[N("div",At,[$(f,{fill:"",style:{"--size":"24px",opacity:"0.5"}},{default:z(()=>u[2]||(u[2]=[I("theaters")])),_:1,__:[2]})]),N("h3",vt,C(F.value),1),h.value.some(b=>b.frameRate!==h.value[0].frameRate)?(w(),L("div",xt,"Framerate verschilt per reel")):(w(),L("div",Ft,[I(C(B(q.value,h.value[0].frameRate))+" ",1),N("span",{class:De({bold:h.value[0].frameRate!==24,colour:h.value[0].frameRate!==24})}," ("+C(h.value[0].frameRate)+" fps) ",3)])),N("div",ht,[R.value?(w(),me(E,{key:0},{default:z(()=>[$(f,{fill:""},{default:z(()=>u[3]||(u[3]=[I("eyeglasses")])),_:1,__:[3]}),u[4]||(u[4]=I("3D "))]),_:1,__:[4]})):se("",!0),S.value?(w(),me(E,{key:1,class:"translucent-white"},{default:z(()=>[$(f,{fill:""},{default:z(()=>u[5]||(u[5]=[I("volume_up")])),_:1,__:[5]}),I(" "+C(S.value),1)]),_:1})):se("",!0),V.value?(w(),me(E,{key:2,class:"translucent-white"},{default:z(()=>[$(f,{fill:""},{default:z(()=>u[6]||(u[6]=[I("subtitles")])),_:1,__:[6]}),I(" "+C(V.value),1)]),_:1})):se("",!0)]),N("div",Dt,[u[20]||(u[20]=N("h4",null,"Reels",-1)),N("div",Ct,[(w(!0),L(de,null,Ce(h.value,(b,Y)=>(w(),L("div",{class:De(["reel",{"after-intermission":x.value===b.properStart&&Math.abs(x.value-.5)<k(i)/100}]),style:Ze({"--propFrac":b.properDuration}),title:Z(b,Y)},null,14,It))),256))]),N("table",St,[u[7]||(u[7]=N("thead",null,[N("tr",null,[N("td",null,"Reel"),N("td",null,"Duur (hh:mm:ss:ff)"),N("td",null,"Starttijd (hh:mm:ss:ff)")])],-1)),(w(!0),L(de,null,Ce(h.value,(b,Y)=>(w(),L("tr",{title:Z(b,Y)},[N("td",null,C(Y+1),1),N("td",null,[I(C(B(b.duration,b.frameRate))+" ",1),b.frameRate!==h.value[0].frameRate?(w(),L("span",wt," ("+C(b.frameRate)+" fps) ",1)):se("",!0)]),N("td",null,C(B(b.properStart*q.value,b.frameRate))+" ("+C((b.properStart*100).toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}))+"%) ",1)],8,Ot))),256))]),N("div",Rt,[u[19]||(u[19]=N("h4",null,"Pauzesuggestie",-1)),Math.abs(x.value-.5)<k(i)/100?(w(),L("p",Kt,[I(" Een pauze zou kunnen worden ingepland tussen de "+C(Q.value),1),u[8]||(u[8]=N("sup",null,"e",-1)),I(" en de "+C(Q.value+1),1),u[9]||(u[9]=N("sup",null,"e",-1)),I(" reel (na "+C(B(x.value*q.value,h.value[0].frameRate))+" of "+C((x.value*100).toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}))+"%). ",1)])):h.value.length>1?(w(),L("p",Pt,[I(" Er is geen reel die tussen "+C(50-k(i))+"% en "+C(50+k(i))+"% van de film eindigt. ",1),Math.abs(x.value-.5)-k(i)/100<.05?(w(),L("a",{key:0,class:"link",onClick:u[0]||(u[0]=b=>i.value=Math.ceil(Math.abs(x.value-.5)*100))}," Maximale afwijking bijstellen tot "+C(Math.ceil(Math.abs(x.value-.5)*100))+"%?",1)):se("",!0),u[10]||(u[10]=N("br",null,null,-1)),I(" Een pauze zou kunnen worden ingepland tijdens de "+C(Q.value+1),1),u[11]||(u[11]=N("sup",null,"e",-1)),u[12]||(u[12]=I(" reel (bijvoorbeeld na ")),N("b",null,C(B(.5*q.value,h.value[0].frameRate)),1),u[13]||(u[13]=I(" of 50%). ")),u[14]||(u[14]=N("br",null,null,-1))])):(w(),L("p",Lt,[u[15]||(u[15]=I(" Er is maar één reel. ")),u[16]||(u[16]=N("br",null,null,-1)),u[17]||(u[17]=I(" Een pauze zou halverwege kunnen worden ingepland (bijvoorbeeld na ")),N("b",null,C(B(.5*q.value,h.value[0].frameRate)),1),u[18]||(u[18]=I(" of 50%). "))]))])])])):(w(),L("p",Mt,"Geen bestand geüpload"))]),$(p,{style:{flex:"229px 1 1"}},{default:z(()=>[$(a,null,{default:z(()=>[$(_,{value:"Configuratie"},{default:z(()=>[N("fieldset",null,[u[23]||(u[23]=N("legend",null,"Pauzesuggestie",-1)),$(g,{modelValue:k(i),"onUpdate:modelValue":u[1]||(u[1]=b=>et(i)?i.value=b:null),modelModifiers:{number:!0},identifier:"intermissionPercentageDev",unit:"%"},{default:z(()=>[u[22]||(u[22]=I(" Maximale afwijking van middenpunt ")),N("small",null,"De filmpauze kan worden geplaatst tussen "+C(50-k(i))+"% en "+C(50+k(i))+"% van de film. ",1)]),_:1,__:[22]},8,["modelValue"])])]),_:1})]),_:1})]),_:1})])]),k(H)?(w(),L("div",Bt," Laat los om bestand te uploaden ")):se("",!0)],512)],64)}}},qt=Be(jt,[["__scopeId","data-v-19dd3a56"]]);export{qt as default};
