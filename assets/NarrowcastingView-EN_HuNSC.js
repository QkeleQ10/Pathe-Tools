var Pe=Object.defineProperty;var Fe=(S,n,i)=>n in S?Pe(S,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):S[n]=i;var U=(S,n,i)=>Fe(S,typeof n!="symbol"?n+"":n,i);import{a as Le,_ as Ie}from"./server-93_2qsv4.js";import{d as xe,A as qe,B as Ee,e as X,f as N,c as y,o as b,b as l,a as Oe,_ as Ve,r as C,x as We,H as Ge,I as Ze,q as ve,h as z,g as r,w as p,l as v,u as M,p as Se,y as Ke,C as Je,n as W,s as R,j as $,J as Xe,F as H,k as A,K as Ye,i as Qe}from"./index-CtDS5ven.js";import{b as Ue,c as $e,_ as et,a as tt}from"./FileUploadBlock-DnecZAH7.js";import{u as Be,a as lt,_ as nt}from"./TimetableUploadSection-DTDsGL6n.js";import"./nl-DjY-uKhQ.js";const ot=["for"],st={class:"title"},it={class:"input"},at=["id","disabled","value"],rt=xe({__name:"InputDate",props:qe({identifier:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(S){const n=Ee(S,"modelValue"),i=X({get(){return n.value?N(n.value,"yyyy-MM-dd'T'HH:mm"):""},set(u){const a=new Date(u);isNaN(a.getTime())||(n.value=a)}});return(u,a)=>(b(),y("label",{class:"input time-input",for:u.identifier},[l("div",st,[Oe(u.$slots,"default",{},void 0,!0)]),l("div",it,[l("input",{type:"datetime-local",id:u.identifier,disabled:u.disabled,value:i.value,onBlur:a[0]||(a[0]=_=>i.value=_.target.value)},null,40,at)])],8,ot))}}),ut=Ve(rt,[["__scopeId","data-v-e53689b9"]]);class be{constructor(n=65535,i=65535,u){U(this,"packet");let a;if(u instanceof Uint8Array)a=u;else if(Array.isArray(u)){a=new Uint8Array(u.reduce((m,w)=>m+w.messageBody.length,0));let h=0;for(const m of u)a.set(m.messageBody,h),h+=m.messageBody.length}else a=u.messageBody;const _=new Uint8Array(9);_.set([170,187,n>>8,n&255,i>>8,i&255,a.length>>8,a.length&255,n>>8^n&255^i>>8^i&255^a.length>>8^a.length&255]);const T=new Uint8Array(1);T.set([a.reduce((h,m)=>h^m,0)]),this.packet=new Uint8Array(_.length+a.length+T.length),this.packet.set(_),this.packet.set(a,_.length),this.packet.set(T,_.length+a.length)}toString(){return Array.from(this.packet).map(n=>n.toString(16).padStart(2,"0")).join(" ").toUpperCase()}}class we{constructor(){U(this,"messageBody")}}U(we,"functionCode",0);class _e extends we{constructor(n){super();let i;if(n instanceof Uint8Array)i=n;else if(Array.isArray(n)){i=new Uint8Array(n.reduce((_,T)=>_+T.messageBody.length,0));let a=0;for(const _ of n)i.set(_.messageBody,a),a+=_.messageBody.length}else i=n.messageBody;const u=new Uint8Array(1+i.length);u.set([this.constructor.functionCode]),u.set(i,1),this.messageBody=u}}U(_e,"functionCode",0);class De extends we{constructor(n){super();const i=new Uint8Array(8);i.set([this.constructor.functionCode]),i.set([n.getFullYear()-2e3,n.getMonth()+1,n.getDate(),n.getDay(),n.getHours(),n.getMinutes(),n.getSeconds()],1),this.messageBody=i}}U(De,"functionCode",1);class L{constructor(){U(this,"messageBody")}}U(L,"commandCode",0);const le=class le extends L{constructor(){super();const n=new Uint8Array(1);n.set([le.commandCode]),this.messageBody=n}};U(le,"commandCode",1);let Y=le;const ne=class ne extends L{constructor(n=0,i=3,u=0,a=0,_=0,T){super();const h=je(T),m=new Uint8Array(6+h.length+1);m.set([ne.commandCode]),m.set([n,i,u,a,_],1),m.set(h,6),m.set([0],m.length-1),this.messageBody=m}};U(ne,"commandCode",3);let ye=ne;const oe=class oe extends L{constructor(n=2,i=0,u=3,a=0,_=55,T=0){super();const h=new Uint8Array(7);h.set([oe.commandCode]),h.set([n,i,u,a,_,T],1),this.messageBody=h}};U(oe,"commandCode",4);let ke=oe;const se=class se extends L{constructor(n=0,i=0,u=9){super();const a=new Uint8Array(5);a.set([se.commandCode]),a.set([n>>8,n&255,i,u],1),this.messageBody=a}};U(se,"commandCode",7);let Q=se;const ie=class ie extends L{constructor(n=0,i=4,u=0,a=3,_=0,T=0,h=0,m){super();const w=je(m),x=new Uint8Array(8+w.length+1);x.set([ie.commandCode]),x.set([n,i,u,a,_,T,h],1),x.set(w,8),x.set([0],x.length-1),this.messageBody=x}};U(ie,"commandCode",8);let he=ie;const ae=class ae extends L{constructor(){super();const n=new Uint8Array(1);n.set([ae.commandCode]),this.messageBody=n}};U(ae,"commandCode",31);let ee=ae;const te={"":0,"":1,"":2,"":3,"":4,"":5,"":6,"\x07":7,"\b":8,"	":9,"\n":10,"\v":11,"\f":12,"\r":13,"":14,"":15,"":16,"":17,"":18,"":19,"":20,"":21,"":22,"":23,"":24,"":25,"":26,"\x1B":27,"":28,"":29,"":30,"":31," ":32,"!":33,'"':34,"#":35,$:36,"%":37,"&":38,"'":39,"(":40,")":41,"*":42,"+":43,",":44,"-":45,".":46,"/":47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,";":59,"<":60,"=":61,">":62,"?":63,"@":64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,"[":91,"\\":92,"]":93,"^":94,_:95,"`":96,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,"{":123,"|":124,"}":125,"~":126,"":127,"Â€":128,"Â":129,"Â‚":130,"Âƒ":131,"Â„":132,"Â…":133,"Â†":134,"Â‡":135,"Âˆ":136,"Â‰":137,"ÂŠ":138,"Â‹":139,"ÂŒ":140,"Â":141,"ÂŽ":142,"Â":143,"Â":144,"Â‘":145,"Â’":146,"Â“":147,"Â”":148,"Â•":149,"Â–":150,"Â—":151,"Â˜":152,"Â™":153,"Âš":154,"Â›":155,"Âœ":156,"Â":157,"Âž":158,"ÂŸ":159,"Â ":160,"Â¡":161,"Â¢":162,"Â£":163,"Â¤":164,"Â¥":165,"Â¦":166,"Â§":167,"Â¨":168,"Â©":169,Âª:170,"Â«":171,"Â¬":172,"Â­":173,"Â®":174,"Â¯":175,"Â°":176,"Â±":177,"Â²":178,"Â³":179,"Â´":180,Âµ:181,"Â¶":182,"Â·":183,"Â¸":184,"Â¹":185,Âº:186,"Â»":187,"Â¼":188,"Â½":189,"Â¾":190,"Â¿":191,Ã€:192,Ã:193,Ã‚:194,Ãƒ:195,Ã„:196,Ã…:197,Ã†:198,Ã‡:199,Ãˆ:200,Ã‰:201,ÃŠ:202,Ã‹:203,ÃŒ:204,Ã:205,ÃŽ:206,Ã:207,Ã:208,Ã‘:209,Ã’:210,Ã“:211,Ã”:212,Ã•:213,Ã–:214,"Ã—":215,Ã˜:216,Ã™:217,Ãš:218,Ã›:219,Ãœ:220,Ã:221,Ãž:222,ÃŸ:223,Ã :224,Ã¡:225,Ã¢:226,Ã£:227,Ã¤:228,Ã¥:229,Ã¦:230,Ã§:231,Ã¨:232,Ã©:233,Ãª:234,Ã«:235,Ã¬:236,Ã­:237,Ã®:238,Ã¯:239,Ã°:240,Ã±:241,Ã²:242,Ã³:243,Ã´:244,Ãµ:245,Ã¶:246,"Ã·":247,Ã¸:248,Ã¹:249,Ãº:250,Ã»:251,Ã¼:252,Ã½:253,Ã¾:254,Ã¿:255};function je(S){const n=S.split("").reduce((i,u)=>(te.hasOwnProperty(u)&&i.push(te[u]),i),[]);return new Uint8Array(n)}const dt={style:{display:"flex",gap:"32px","flex-wrap":"wrap"}},ct={style:{flex:"40% 1 1"}},mt={class:"flex",style:{"flex-direction":"column"}},pt={class:"flex buttons",style:{"flex-wrap":"wrap"}},ft={class:"matrix-clock"},gt={style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"8px"}},vt={key:0},bt={style:{"overflow-y":"auto","max-height":"70vh"}},_t=["id"],yt={key:0},kt={id:"configurations"},ht={class:"flex buttons"},xt={id:"display-lines"},wt={class:"flex"},Tt={key:0,class:"flex",style:{"padding-left":"32px"}},Ct={class:"flex select-icons"},St=["onClick","title"],$t={class:"flex select-icons"},Vt=["onClick","title"],Ut={class:"flex select-icons"},Bt=["onClick","title"],Dt={key:0,class:"flex select-icons"},jt=["onClick"],Ht=["onClick"],At={class:"flex",style:{"flex-direction":"column"}},Nt={class:"flex buttons"},Rt={style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"8px"}},zt={class:"flex"},Mt={style:{width:"48ch"}},Pt={style:{width:"16ch"}},Ft=xe({__name:"CinemecTimetableSection",setup(S){const n=Xe("now"),i=Ue("history"),u=Be(),a=C(!1),_=C(!1),T=C(!0),h=C(!1),m=C(null),w=C(null),x=C([null,null]),D=$e("theatre-name","PathÃ© Utrecht Leidsche Rijn"),P=$e("ticker-text","De ~C3;Rooftop~C1; is weer geopend! Check pathÃ©.nl of de PathÃ©-app voor alle voorstellingen."),q=C(!0),G=C(!0),Z=C(!0),re=C(!!i.prototype),ue=C("10.10.87.81"),de=C("10.10.87.82"),B=C([]),j={empty:()=>({fcolor:3,bcolor:0,textString:"",enabled:!1,align:"left",speed:7}),black:()=>({fcolor:3,bcolor:0,textString:"",enabled:!0,align:"left",speed:7}),ticker:(o=j.black())=>P.value.length?{fcolor:1,bcolor:0,textString:P.value,enabled:!0,align:"marquee",speed:7}:o},E={walkin:{name:"Voorstellingen",lines:()=>[{textString:`Welkom bij ${D.value}!`.padEnd(56)+"Zaal",fcolor:2,bcolor:0,enabled:!0,align:"left",speed:7},...me(6),j.ticker(j.empty())]},walkout:{name:"Uitloop",lines:()=>[...me(2,j.black()),{textString:"Hartelijk dank voor je filmbezoek!",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"Wij hopen dat je genoten hebt.",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"Graag tot ziens bij",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:`${D.value}`,fcolor:2,bcolor:0,enabled:!0,align:"center",speed:7},j.black(),j.ticker()]},noinfo:{name:"Geen info",lines:()=>[...me(2,j.black()),{textString:`Welkom bij ${D.value}!`,fcolor:2,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"De timetable toont momenteel geen actuele",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"informatie. Raadpleeg je ticket, de schermen bij",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"de kassa of een medewerker voor het zaalnummer.",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},j.black(),j.ticker()]}},K=()=>[...B.value].sort((o,e)=>o.scheduledTime.getTime()-e.scheduledTime.getTime()).filter(o=>o.scheduledTime.getTime()-Date.now()>-102e4),He=X(()=>B.value.length&&K().length?E.walkin.lines():new Date().getHours()>=21||new Date().getHours()<1?E.walkout.lines():E.noinfo.lines()),ce=C(E.walkin.lines()),Te=X(()=>G.value?He.value:ce.value);u.$subscribe(()=>{u.table.length&&(q.value&&We(()=>{O()}),B.value=[...u.table].sort((o,e)=>o.scheduledTime.getTime()-e.scheduledTime.getTime()).map((o,e)=>({scheduledTime:o.scheduledTime,title:o.title.replace(/[â€“-â€”]/g,"-").split("").filter(g=>g in te).join(""),auditorium:o.auditorium==="Rooftop"?"RT":o.auditorium.replace(/^\w+\s/,"").split(" ")[0],i:e})))});function Ae(o){if(!(o!=null&&o.textString))return[];const e=o.textString.split(/(?=~[CB]\d;|~[FNRI];)/g),g=[];let c=o.fcolor,s=o.bcolor,f=!1;for(const V of e)V.startsWith("~C")?c=parseInt(V.substring(2,3),10):V.startsWith("~B")?s=parseInt(V.substring(2,3),10):V.startsWith("~R")?[c,s]=[s,c]:V.startsWith("~F")?f=!0:V.startsWith("~N")?f=!1:V.startsWith("~I")&&(c=o.fcolor,s=o.bcolor),g.push({textString:V.replace(/~[CB]\d;|~[FNRI];/g,""),fcolor:c,bcolor:s,flash:f});return g}function me(o,e=j.empty()){return Array.from({length:o},()=>({...e}))}function Ce(o,e){let g=[],c=0;for(let s=0;s<o.length;s++)if(o[s].enabled)g.push(o[s]);else{let f=K()[c++];if(!f){g.push({textString:"",enabled:!0,fcolor:3,bcolor:0,align:"left",speed:7});continue}const V=f.scheduledTime.getTime()-Date.now()<-54e4,ge=f.scheduledTime.getTime()-Date.now()<0&&!V;let F=`${N(f.scheduledTime,"HH:mm")} ${f.title.substring(0,51).padEnd(51)}${f.auditorium.toString().substring(0,3).padStart(3)}`;V&&(F=`${N(f.scheduledTime,"HH:mm")} ${f.title.substring(0,40).padEnd(40)} ~C1;is gestart~C3;${f.auditorium.toString().substring(0,3).padStart(3)}`),ge&&(F=`${N(f.scheduledTime,"HH:mm")} ${f.title.substring(0,38).padEnd(38)} ~F;~C1;gaat starten~N;~C3;${f.auditorium.toString().substring(0,3).padStart(3)}`),g.push({textString:F,enabled:!0,fcolor:3,bcolor:0,align:"left",speed:7})}return g}function Ne(o=Ce(Te.value)){if(Z.value&&!K().length&&(new Date().getHours()>=1&&new Date().getHours()<9||new Date().getHours()===9&&new Date().getMinutes()<30))return new be(null,null,new _e([new Y,new Q(null,null,9),new ee]));let e=[],g=[];for(let c=0;c<o.length;c++){const s=o[c];s.enabled&&(s.align==="marquee"||s.align==="marquee-reverse"?g.push(new he(s.align==="marquee"?6:5,s.speed,null,s.fcolor,s.bcolor,null,c+1,s.textString)):e.push(new ye(null,s.fcolor,s.bcolor,null,c+1,s.align==="center"?ze(s.textString,60):s.align==="right"?s.textString.padStart(60):s.textString)))}return new be(null,null,new _e([new Y,new ke,...e,new Q(null,null,9),...g,new ee]))}async function O(o=Ne().toString(),e=!1){const g=[ue.value,de.value].filter(c=>c.length);for(;h.value;)await new Promise(c=>setTimeout(c,1e3));if(!e&&o===m.value&&g.every((c,s)=>x.value[s]==="ok")){console.info("No changes detected, skipping send.");return}h.value=!0,await Promise.allSettled(g.map(async(c,s)=>{try{const f=await fetch("http://localhost:5000/send-bytes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:c,port:"9100",hex:o})});if(f.ok)x.value[s]="ok";else throw new Error(`HTTP error! status: ${f.status}`)}catch(f){console.error(`Failed to send to ${c}:`,f),x.value[s]="error"}})),w.value=new Date,m.value=o.toString(),h.value=!1}function Re(o){return o.trim().split(/\s+/).map(c=>{const s=parseInt(c,16);return String.fromCharCode(s)}).join("")}function ze(o,e,g=" "){const c=Math.floor((e-o.length)/2);return g.repeat(c)+o+g.repeat(e-o.length-c)}let pe=null,fe=null;return Ge(()=>{B.value=[...u.table].sort((o,e)=>o.scheduledTime.getTime()-e.scheduledTime.getTime()).map((o,e)=>({scheduledTime:o.scheduledTime,title:o.title.replace(/[â€“-â€”]/g,"-").split("").filter(g=>g in te).join(""),auditorium:o.auditorium==="Rooftop"?"RT":o.auditorium.replace(/^\w+\s/,"").split(" ")[0],i:e})),fe=setTimeout(()=>{q.value&&O(),pe=setInterval(()=>{q.value&&O()},1e4)},1e4-Date.now()%1e4)}),Ze(()=>{pe&&clearInterval(pe),fe&&clearTimeout(fe)}),(o,e)=>{const g=lt,c=Le,s=Je,f=Ke,V=et,ge=ut,F=Ie;return b(),y("section",null,[l("div",dt,[l("div",ct,[e[28]||(e[28]=l("h2",null,"Opties",-1)),l("div",mt,[r(g,{identifier:"autoConfigure",modelValue:G.value,"onUpdate:modelValue":e[0]||(e[0]=t=>G.value=t)},{default:p(()=>e[17]||(e[17]=[v(" Automatisch de beste configuratie kiezen "),l("small",null,"Een gepaste configuratie wordt weergegeven als er geen inlopen zijn.",-1)])),_:1,__:[17]},8,["modelValue"]),r(g,{identifier:"autoBlack",modelValue:Z.value,"onUpdate:modelValue":e[1]||(e[1]=t=>Z.value=t)},{default:p(()=>e[18]||(e[18]=[v(" Verlichting 's nachts automatisch uitschakelen "),l("small",null,"Tussen 01:00 en 09:30 is het bord zwart.",-1)])),_:1,__:[18]},8,["modelValue"]),r(c,{identifier:"theatreName",modelValue:M(D),"onUpdate:modelValue":e[2]||(e[2]=t=>Se(D)?D.value=t:null)},{default:p(()=>e[19]||(e[19]=[v(" Naam theater ")])),_:1,__:[19]},8,["modelValue"]),r(c,{identifier:"tickerText",modelValue:M(P),"onUpdate:modelValue":e[3]||(e[3]=t=>Se(P)?P.value=t:null)},{datalist:p(()=>e[20]||(e[20]=[l("option",{value:"De ~C3;Rooftop~C1; is weer geopend! Check pathÃ©.nl of de PathÃ©-app voor alle voorstellingen."}," Rooftop open",-1)])),default:p(()=>[e[21]||(e[21]=v(" Lichtkrant "))]),_:1,__:[21]},8,["modelValue"]),l("div",pt,[r(f,{onClick:e[4]||(e[4]=t=>a.value=!0)},{default:p(()=>[r(s,null,{default:p(()=>e[22]||(e[22]=[v("edit")])),_:1,__:[22]}),e[23]||(e[23]=l("span",null,"Voorstellingen",-1))]),_:1,__:[23]}),r(f,{class:"secondary",onClick:e[5]||(e[5]=t=>_.value=!0),style:W(G.value?"opacity: 0.2; pointer-events: none;":"")},{default:p(()=>[r(s,null,{default:p(()=>e[24]||(e[24]=[v("edit")])),_:1,__:[24]}),e[25]||(e[25]=l("span",null,"Configuratie",-1))]),_:1,__:[25]},8,["style"]),r(f,{class:"secondary",onClick:e[6]||(e[6]=t=>re.value=!0)},{default:p(()=>[r(s,null,{default:p(()=>e[26]||(e[26]=[v("construction")])),_:1,__:[26]}),e[27]||(e[27]=l("span",null,"Geavanceerd",-1))]),_:1,__:[27]})])])]),r(V,{style:{flex:"585px 0 0",display:"flex"}},{default:p(()=>[l("div",null,[e[30]||(e[30]=l("h2",null,"Voorbeeld",-1)),l("div",{class:R(["block",{blackout:Z.value&&!K().length&&(new Date().getHours()>=1&&new Date().getHours()<9||new Date().getHours()===9&&new Date().getMinutes()<30)}]),id:"matrix-display"},[e[29]||(e[29]=l("span",{id:"matrix-display-title"},"PathÃ© Timetable",-1)),l("pre",ft,$(M(N)(M(n),"HH:mm")),1),(b(!0),y(H,null,A(Ce(Te.value,M(n)),(t,k)=>(b(),y("div",{class:R(["matrix-row",`align${t.align||"left"}`]),style:W({"--marquee-duration":(.02*Math.max(60,t.textString.replace(/~[CB]\d;|~[FNRI];/g,"").length)+.08)*(-1*t.speed+13)+"s"})},[l("div",null,[(b(!0),y(H,null,A(Ae(t),d=>(b(),y("span",{key:k,class:R(`fcolor${(d==null?void 0:d.fcolor)||0} bcolor${(d==null?void 0:d.bcolor)||0} flash${d!=null&&d.flash?1:0}`)},$((d==null?void 0:d.textString)||""),3))),128))])],6))),256))],2)]),l("div",gt,[l("small",null,"Laatst verzonden om "+$(w.value?M(N)(w.value,"HH:mm:ss"):"onbekend"),1),l("small",null,$(h.value?"Verzenden...":""),1),(b(!0),y(H,null,A(x.value,(t,k)=>(b(),y("small",{key:k}," Scherm "+$(k+1)+": "+$(t?t==="ok"?"OK":t==="error"?"Fout":t:"Niets verzonden"),1))),128))]),e[31]||(e[31]=l("p",null,[v(" Dit voorbeeld is slechts indicatief. "),l("br"),l("br"),l("b",null,"Tip:"),v(" In invoervelden kunnen de volgende codes worden gebruikt:"),l("br"),l("code",null,"~Cn;"),v("â€ƒ tekstkleur (waarbij n = 0, 1, 2 of 3)"),l("br"),l("code",null,"~Bn;"),v("â€ƒ achtergrondkleur (waarbij n = 0, 1, 2 of 3)"),l("br"),l("code",null,"~R; "),v("â€ƒ kleuren omwisselen"),l("br"),l("code",null,"~I; "),v("â€ƒ kleuren resetten"),l("br"),l("code",null,"~F; "),v("â€ƒ knipperen"),l("br"),l("code",null,"~N; "),v("â€ƒ niet meer knipperen"),l("br")],-1))]),_:1,__:[31]})]),a.value?(b(),ve(F,{key:0,onDismiss:e[9]||(e[9]=t=>a.value=!1),id:"walkin-editor"},{default:p(()=>[e[37]||(e[37]=l("h3",null,"Voorstellingen",-1)),B.value.some(t=>t.title.length>38)?(b(),y("p",vt,e[32]||(e[32]=[l("b",null,"Let op:",-1),v(" roodgekleurde filmtitels zijn te lang en worden mogelijk afgekapt.")]))):z("",!0),r(g,{identifier:"syncFilmTitles",modelValue:T.value,"onUpdate:modelValue":e[7]||(e[7]=t=>T.value=t)},{default:p(()=>e[33]||(e[33]=[v(" Alle identieke filmtitels tegelijk bewerken ")])),_:1,__:[33]},8,["modelValue"]),l("div",bt,[r(Ye,{name:"list"},{default:p(()=>[(b(!0),y(H,null,A([...B.value].sort((t,k)=>t.scheduledTime.getTime()-k.scheduledTime.getTime()),t=>(b(),y("div",{class:"flex walkin",key:t.i,id:`walkin-${t.i}`,style:W({opacity:t.scheduledTime.getTime()-Date.now()<-54e4?.5:1})},[r(ge,{class:"no-label walkin-time",identifier:`walkin-${t.i}-time`,modelValue:t.scheduledTime,"onUpdate:modelValue":k=>t.scheduledTime=k},null,8,["identifier","modelValue","onUpdate:modelValue"]),r(c,{class:R(["no-label walkin-title",{"too-long":t.title.length>38}]),spellcheck:!1,autocomplete:"off",identifier:`walkin-${t.i}-title`,"model-value":t.title,"onUpdate:modelValue":k=>{T.value?B.value.filter(d=>d.title===t.title).forEach(d=>d.title=k):t.title=k}},null,8,["identifier","model-value","onUpdate:modelValue","class"]),r(c,{class:"no-label walkin-auditorium",spellcheck:!1,autocomplete:"off",identifier:`walkin-${t.i}-auditorium`,modelValue:t.auditorium,"onUpdate:modelValue":k=>t.auditorium=k},null,8,["identifier","modelValue","onUpdate:modelValue"]),r(s,{style:{float:"right",cursor:"pointer",padding:"2px"},onClick:k=>B.value.splice(B.value.findIndex(d=>d.scheduledTime===t.scheduledTime&&d.title===t.title&&d.auditorium===t.auditorium),1)},{default:p(()=>e[34]||(e[34]=[v(" delete")])),_:2,__:[34]},1032,["onClick"])],12,_t))),128))]),_:1}),B.value.length?z("",!0):(b(),y("p",yt,"Geen voorstellingen gepland."))]),r(f,{class:"secondary",onClick:e[8]||(e[8]=t=>B.value.push({scheduledTime:new Date,title:"",auditorium:"",i:B.value.length}))},{default:p(()=>[r(s,null,{default:p(()=>e[35]||(e[35]=[v("add")])),_:1,__:[35]}),e[36]||(e[36]=l("span",null,"Nieuwe voorstelling",-1))]),_:1,__:[36]})]),_:1,__:[37]})):z("",!0),_.value?(b(),ve(F,{key:1,onDismiss:e[10]||(e[10]=t=>_.value=!1)},{default:p(()=>[e[43]||(e[43]=l("h3",null,"Configuratie",-1)),l("div",kt,[e[42]||(e[42]=l("div",{class:"flex",style:{"flex-direction":"column"}},null,-1)),l("div",ht,[(b(),y(H,null,A(E,(t,k)=>r(f,{class:"secondary",key:k,onClick:d=>ce.value=t.lines()},{default:p(()=>[v($(t.name),1)]),_:2},1032,["onClick"])),64))]),l("div",xt,[(b(!0),y(H,null,A(ce.value,(t,k)=>(b(),y("div",{class:"display-line",key:k},[l("div",wt,[r(g,{class:"no-label",identifier:`line-${k}-enabled`,modelValue:t.enabled,"onUpdate:modelValue":d=>t.enabled=d},null,8,["identifier","modelValue","onUpdate:modelValue"]),r(c,{class:R(["no-label",{"too-long":t.textString.length>60}]),identifier:`line-${k}-text`,modelValue:t.textString,"onUpdate:modelValue":d=>t.textString=d},null,8,["identifier","modelValue","onUpdate:modelValue","class"])]),t.textString.length?(b(),y("div",Tt,[l("div",Ct,[(b(),y(H,null,A({left:["Links uitlijnen","format_align_left"],center:["Centreren","format_align_center"],right:["Rechts uitlijnen","format_align_right"],marquee:["Lichtkrant","keyboard_double_arrow_left"],"marquee-reverse":["Omgekeerde lichtkrant","keyboard_double_arrow_right"]},(d,J)=>l("a",{onClick:I=>t.align=J,class:R({selected:t.align===J}),title:d[0]},[r(s,null,{default:p(()=>[v($(d[1]),1)]),_:2},1024)],10,St)),64))]),l("div",$t,[(b(),y(H,null,A({0:["Zwarte tekst","#000"],1:["Rode tekst","rgb(227, 46, 46)"],2:["Groene tekst","rgb(35, 160, 35)"],3:["Oranje tekst","rgb(255, 178, 36)"]},(d,J,I)=>l("a",{onClick:Me=>t.fcolor=I,class:R({selected:t.fcolor===I}),title:d[0]},[r(s,{style:W({color:d[1]})},{default:p(()=>e[38]||(e[38]=[v("format_color_text")])),_:2,__:[38]},1032,["style"])],10,Vt)),64))]),l("div",Ut,[(b(),y(H,null,A({0:["Zwarte tekst","#000"],1:["Rode tekst","rgb(227, 46, 46)"],2:["Groene tekst","rgb(35, 160, 35)"],3:["Oranje tekst","rgb(255, 178, 36)"]},(d,J,I)=>l("a",{onClick:Me=>t.bcolor=I,class:R({selected:t.bcolor===I}),title:d[0]},[r(s,{style:W({color:d[1]})},{default:p(()=>e[39]||(e[39]=[v("format_color_fill")])),_:2,__:[39]},1032,["style"])],10,Bt)),64))]),t.align==="marquee"||t.align==="marquee-reverse"?(b(),y("div",Dt,[l("a",{onClick:d=>t.speed=Math.max(0,t.speed-1),title:"Langzamer"},[r(s,null,{default:p(()=>e[40]||(e[40]=[v("remove")])),_:1,__:[40]})],8,jt),l("span",null,$(t.speed),1),l("a",{onClick:d=>t.speed=Math.min(9,t.speed+1),title:"Sneller"},[r(s,null,{default:p(()=>e[41]||(e[41]=[v("add")])),_:1,__:[41]})],8,Ht)])):z("",!0)])):z("",!0)]))),128))])])]),_:1,__:[43]})):z("",!0),re.value?(b(),ve(F,{key:2,onDismiss:e[16]||(e[16]=t=>re.value=!1)},{default:p(()=>[e[51]||(e[51]=l("h3",null,"Geavanceerde opties",-1)),l("div",At,[r(c,{modelValue:ue.value,"onUpdate:modelValue":e[11]||(e[11]=t=>ue.value=t),identifier:"ip"},{default:p(()=>e[44]||(e[44]=[l("span",null,"IP-adres scherm 1",-1)])),_:1,__:[44]},8,["modelValue"]),r(c,{modelValue:de.value,"onUpdate:modelValue":e[12]||(e[12]=t=>de.value=t),identifier:"ip2"},{default:p(()=>e[45]||(e[45]=[l("span",null,"IP-adres scherm 2",-1)])),_:1,__:[45]},8,["modelValue"]),r(g,{modelValue:q.value,"onUpdate:modelValue":e[13]||(e[13]=t=>q.value=t),identifier:"autoSend"},{default:p(()=>e[46]||(e[46]=[l("span",null,"Automatisch verzenden",-1)])),_:1,__:[46]},8,["modelValue"]),l("div",Nt,[r(f,{class:"secondary",onClick:e[14]||(e[14]=t=>O(new be(null,null,new De(new Date)).toString()))},{default:p(()=>[r(s,null,{default:p(()=>e[47]||(e[47]=[v("update")])),_:1,__:[47]}),e[48]||(e[48]=l("span",null,"Klok bijwerken",-1))]),_:1,__:[48]}),r(f,{class:"secondary",onClick:e[15]||(e[15]=t=>O())},{default:p(()=>[r(s,null,{default:p(()=>e[49]||(e[49]=[v("send")])),_:1,__:[49]}),e[50]||(e[50]=l("span",null,"Nu verzenden",-1))]),_:1,__:[50]})])]),e[52]||(e[52]=l("h3",null,"Laatst verzonden pakket",-1)),l("div",Rt,[l("small",null,"Laatst verzonden om "+$(w.value?M(N)(w.value,"HH:mm:ss"):"onbekend"),1),l("small",null,$(h.value?"Verzenden...":""),1),(b(!0),y(H,null,A(x.value,(t,k)=>(b(),y("small",{key:k}," Scherm "+$(k+1)+": "+$(t?t==="ok"?"OK":t==="error"?"Fout":t:"Niets verzonden"),1))),128))]),l("div",zt,[l("pre",Mt,$(m.value),1),l("pre",Pt,$(Re(m.value).replace(/[\n\r\t]/g," ").match(/.{1,16}/g).join(`
`)),1)])]),_:1,__:[51,52]})):z("",!0)])}}}),Lt=Ve(Ft,[["__scopeId","data-v-aa139c3d"]]),It={key:0,class:"dropzone"},Kt=xe({__name:"NarrowcastingView",setup(S){const n=Be(),i=Ue("history"),u=C(!1);n.$subscribe(()=>{var x;if(!i.download||!((x=n.table)!=null&&x.length)||a.value.length<10||u.value)return;const m=new Blob([a.value],{type:"text/plain"}),w=document.createElement("a");w.href=URL.createObjectURL(m),w.download="timetable.xml",w.click(),URL.revokeObjectURL(w.href),u.value=!0});const a=X(()=>{const m=x=>"  ".repeat(x),w=n.table.map((x,D)=>_(x,D).split("><").join(`>
${m(2)}<`)).join(`
${m(1)}`);return`<voorstellingen>
${m(1)}${w}
</voorstellingen>`});function _(m,w){return`<Shows><ID type="Long Integer">${w}</ID><DatumVan type="Date/Time">${N(m.scheduledTime,"dd-MM-yyyy")}</DatumVan><DatumTot type="Date/Time">${N(m.scheduledTime,"dd-MM-yyyy")}</DatumTot><Tijd type="Date/Time">${N(m.scheduledTime,"HH:mm")}</Tijd><Titel type="Text">${m.playlist}</Titel><Zaal type="Text">${m.auditoriumNumber}</Zaal><Kleur type="Long Integer">3</Kleur><Permanent type="Long Integer">1</Permanent></Shows>`}const T=C(null),{isOverDropZone:h}=tt(T,{onDrop:n.filesUploaded,multiple:!1});return(m,w)=>{const x=Qe,D=nt,P=Lt;return b(),y("main",{ref_key:"main",ref:T},[r(x),r(D),r(P),M(h)?(b(),y("div",It," Laat los om bestand te uploaden ")):z("",!0)],512)}}});export{Kt as default};
