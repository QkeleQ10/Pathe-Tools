import{d as j,e as Y,f as Z,_ as ee,a as le,b as ne,S as se}from"./FileUploadButton-BGcmOUY6.js";import{x as U,c as a,o,a as N,d as L,y as O,z as G,g as n,A as P,L as te,r as C,e as r,i as R,u as p,l as A,w as u,k as i,C as q,h as D,F as I,j as E,p as F,q as z,_ as oe,I as ae,B as ue}from"./index-C01LYYkr.js";const re={},ie={class:"primary center",type:"button"};function de($,g){return o(),a("button",ie,[N($.$slots,"default",{},void 0,!0)])}const H=U(re,[["render",de],["__scopeId","data-v-a22debdb"]]),ce=["for"],pe={class:"title"},me=["id"],ve=L({__name:"InputText",props:O({identifier:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup($){const g=G($,"modelValue");return(s,t)=>(o(),a("label",{class:"input",for:s.identifier},[n("div",pe,[N(s.$slots,"default",{},void 0,!0)]),P(n("input",{type:"text",id:s.identifier,"onUpdate:modelValue":t[0]||(t[0]=m=>g.value=m)},null,8,me),[[te,g.value]])],8,ce))}}),_e=U(ve,[["__scopeId","data-v-7bce26f6"]]),fe={id:"upload"},ge={class:"block"},ke={class:"flex block"},we={key:0,class:"pictures",style:{"flex-grow":"1"}},be=["src","onClick"],$e={key:1,style:{"flex-grow":"1"}},ye={key:2,style:{"flex-grow":"1"}},Ve={key:3,style:{"flex-grow":"1"}},he={key:4,style:{"flex-grow":"1"}},Se={key:5,class:"buttons",style:{"flex-shrink":"0"}},xe={key:0},x="https://kid-daring-robin.ngrok-free.app",Ce=L({__name:"SlideshowUploadSection",props:{modelValue:{},modelModifiers:{}},emits:O(["slide-clicked"],["update:modelValue"]),setup($,{emit:g}){const s=C("creds_missing"),t=G($,"modelValue"),m=g,c=j("server-username",""),k=j("server-password","");c.value&&h();async function h(){t.value=[],s.value="loading";try{const e=await(await fetch(`${x}/users/${c.value}/pictures`,{headers:{"ngrok-skip-browser-warning":"true"}})).json();t.value=await Promise.all(e.map(async v=>await S(v))),s.value="success"}catch{s.value="error"}}async function w(_){s.value="loading";try{const e=new FormData;for(const f of _)e.append("pictures",f);const y=await(await fetch(`${x}/users/${c.value}/pictures`,{method:"POST",headers:{Authorization:"Basic "+btoa(`${c.value}:${k.value}`),"ngrok-skip-browser-warning":"true"},body:e})).json();t.value=[...t.value,...await Promise.all(y.files.map(async f=>await S(f)))].sort((f,l)=>f.localeCompare(l)),s.value="success"}catch{s.value="error"}}async function T(){s.value="loading";try{await fetch(`${x}/users/${c.value}/pictures`,{method:"DELETE",headers:{Authorization:"Basic "+btoa(`${c.value}:${k.value}`),"ngrok-skip-browser-warning":"true"}}),t.value=[],s.value="success"}catch{s.value="error"}}async function S(_){const v=await(await fetch(`${x}/users/${c.value}/pictures/${_}`,{headers:{"ngrok-skip-browser-warning":"true"}})).blob();return URL.createObjectURL(v)}return(_,e)=>{const v=_e,y=q,f=H,l=Y;return o(),a("section",fe,[e[12]||(e[12]=n("h2",null,"Waarschuwing",-1)),n("div",ge,[n("p",null," Dit is experimenteel. Het werkt alleen als de tijdelijke server actief is ("+R(x)+"). "),r(v,{modelValue:p(c),"onUpdate:modelValue":e[0]||(e[0]=b=>A(c)?c.value=b:null),identifier:"username"},{default:u(()=>e[2]||(e[2]=[n("span",null,"Gebruikersnaam",-1)])),_:1},8,["modelValue"]),r(v,{modelValue:p(k),"onUpdate:modelValue":e[1]||(e[1]=b=>A(k)?k.value=b:null),identifier:"password"},{default:u(()=>e[3]||(e[3]=[n("span",null,"Wachtwoord",-1)])),_:1},8,["modelValue"]),r(f,{onClick:h},{default:u(()=>[r(y,null,{default:u(()=>e[4]||(e[4]=[i("cloud_download")])),_:1}),e[5]||(e[5]=i("Nu ophalen "))]),_:1})]),e[13]||(e[13]=n("h2",null,"Dia's",-1)),n("div",ke,[t.value.length&&s.value==="success"?(o(),a("div",we,[(o(!0),a(I,null,E(t.value,(b,B)=>(o(),a("img",{src:b,onClick:V=>m("slide-clicked",B)},null,8,be))),256))])):s.value==="success"?(o(),a("p",$e,e[6]||(e[6]=[i(" Geen afbeeldingen geüpload "),n("br",null,null,-1),n("small",null,"Geen afbeeldingen aanwezig op server.",-1)]))):s.value==="error"?(o(),a("p",ye,e[7]||(e[7]=[i(" Ophalen van afbeeldingen mislukt "),n("br",null,null,-1),n("small",null,"De inloggegevens zijn niet correct of er is een probleem met de server.",-1)]))):s.value==="creds_missing"?(o(),a("p",Ve,e[8]||(e[8]=[i(" Ophalen van afbeeldingen mislukt "),n("br",null,null,-1),n("small",null,"Een gebruikersnaam ontbreekt.",-1)]))):(o(),a("p",he,e[9]||(e[9]=[i(" Afbeeldingen ophalen... "),n("br",null,null,-1),n("small",null,"Even geduld...",-1)]))),p(c)&&p(k)?(o(),a("div",Se,[r(l,{id:"file-upload-area",class:z({large:!t.value.length}),onFilesUploaded:w,accept:"image/*",multiple:""},{default:u(()=>[t.value.length?D("",!0):(o(),a("small",xe,"Of sleep bestanden hiernaartoe"))]),_:1},8,["class"]),t.value.length?(o(),F(f,{key:0,onClick:T},{default:u(()=>[r(y,null,{default:u(()=>e[10]||(e[10]=[i("delete_forever")])),_:1}),e[11]||(e[11]=i("Alles verwijderen "))]),_:1})):D("",!0)])):D("",!0)])])}}}),Te=U(Ce,[["__scopeId","data-v-6dbfaaf7"]]),Me={class:"container dark"},De={id:"pictures"},Ie={class:"grid"},Ue=["src"],Be={key:0,class:"message"},je={class:"control dotnav"},Ae=["onClick"],Ee={key:0},Fe={key:1},ze=L({__name:"SlideshowView",setup($){const g=C(null),s=C([]),t=C(0),m=j("slideshow-duration",60),{isFullscreen:c,enter:k,toggle:h}=Z(g),w=C(!1);let T,S;function _(){w.value=!0,clearTimeout(T),T=setTimeout(()=>{w.value=!1},2e3)}function e(){clearTimeout(S),S=setTimeout(()=>{v(),e()},m.value*1e3)}function v(){t.value=(t.value+1)%s.value.length||0}function y(){t.value=(t.value-1+s.value.length)%s.value.length||0}return e(),(f,l)=>{const b=oe,B=Te,V=q,W=ne,J=H,K=le,Q=ee,X=se;return o(),a(I,null,[r(b),n("main",Me,[r(B,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=d=>s.value=d),onSlideClicked:l[1]||(l[1]=d=>t.value=d)},null,8,["modelValue"]),n("section",De,[n("div",Ie,[n("div",null,[l[11]||(l[11]=n("h2",null,"Diavoorstelling",-1)),n("div",{class:z(["carousel",{"mouse-moving":w.value}]),ref_key:"carousel",ref:g,onMousemove:_,onMouseenter:l[3]||(l[3]=d=>w.value=!0),onMouseleave:l[4]||(l[4]=d=>w.value=!1)},[r(ae,{name:"slide"},{default:u(()=>[(o(!0),a(I,null,E(s.value,(d,M)=>P((o(),a("img",{key:d,src:d},null,8,Ue)),[[ue,M===t.value]])),128))]),_:1}),s.value.length?D("",!0):(o(),a("p",Be,"Geen afbeeldingen geüpload")),n("button",{class:"control fullscreen",onClick:l[2]||(l[2]=(...d)=>p(h)&&p(h)(...d))},[p(c)?(o(),F(V,{key:0},{default:u(()=>l[7]||(l[7]=[i("fullscreen_exit")])),_:1})):(o(),F(V,{key:1},{default:u(()=>l[8]||(l[8]=[i("fullscreen")])),_:1}))]),n("button",{class:"control previous",onClick:y},[r(V,null,{default:u(()=>l[9]||(l[9]=[i("chevron_left")])),_:1})]),n("button",{class:"control next",onClick:v},[r(V,null,{default:u(()=>l[10]||(l[10]=[i("chevron_right")])),_:1})]),n("div",je,[(o(!0),a(I,null,E(s.value,(d,M)=>(o(),a("button",{onClick:Le=>t.value=M,class:z({active:M===t.value})},null,10,Ae))),256))])],34)]),r(X,null,{default:u(()=>[r(Q,null,{default:u(()=>[r(K,{value:"Opties"},{default:u(()=>[n("fieldset",null,[l[15]||(l[15]=n("legend",null,"Automatische weergave",-1)),r(W,{modelValue:p(m),"onUpdate:modelValue":l[5]||(l[5]=d=>A(m)?m.value=d:null),modelModifiers:{number:!0},onChange:e,identifier:"slideDuration",step:"1",min:"0",max:"240",unit:"s"},{default:u(()=>[l[12]||(l[12]=i(" Seconden per dia ")),p(m)>0?(o(),a("small",Ee," Elke "+R(p(m))+" seconden wordt de volgende dia getoond. ",1)):(o(),a("small",Fe," De automatische weergave is uitgeschakeld. "))]),_:1},8,["modelValue"]),r(J,{class:"full",onClick:l[6]||(l[6]=d=>{t.value=0,e(),p(k)()})},{default:u(()=>[r(V,null,{default:u(()=>l[13]||(l[13]=[i("play_arrow")])),_:1}),l[14]||(l[14]=i("Automatische weergave starten "))]),_:1})])]),_:1})]),_:1})]),_:1})])])])],64)}}}),Ge=U(ze,[["__scopeId","data-v-b2bb84fd"]]);export{Ge as default};
