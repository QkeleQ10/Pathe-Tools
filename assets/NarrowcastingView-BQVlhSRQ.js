import{d as v,a as x,b as h,_ as D}from"./FileUploadBlock-WSfuaRBZ.js";import{u as k,_ as $}from"./TimetableUploadSection-CnWvMhbB.js";import{d as N,b as L,f as m,r as S,c as b,e as s,h as t,g as V,_ as X,i as c,u as d,k as u,w as p,o as y,x as I}from"./index-fEQ7AaRa.js";import"./server-Dsn4IpdH.js";import"./nl-BrHMK7y0.js";const U={class:"flex",style:{"flex-wrap":"wrap-reverse"}},j={style:{flex:"100% 1 1"}},M={class:"block"},O={class:"block"},B={key:0,class:"dropzone"},C=N({__name:"NarrowcastingView",setup(R){const a=k(),f=v("history");a.$subscribe(()=>{var l;const e=window.narrowcastXml;if(window.datadump=a.table,window.narrowcastXml=r.value,!f.download||!((l=a.table)!=null&&l.length)||r.value.length<10||e===window.narrowcastXml)return;const n=new Blob([r.value],{type:"text/plain"}),o=document.createElement("a");o.href=URL.createObjectURL(n),o.download="timetable.xml",o.click(),URL.revokeObjectURL(o.href)});const r=L(()=>{const e=o=>"  ".repeat(o),n=a.table.map((o,l)=>g(o,l).split("><").join(`>
${e(2)}<`)).join(`
${e(1)}`);return`<voorstellingen>
${e(1)}${n}
</voorstellingen>`});function g(e,n){return`<Shows><ID type="Long Integer">${n}</ID><DatumVan type="Date/Time">${m(e.scheduledTime,"dd-MM-yyyy")}</DatumVan><DatumTot type="Date/Time">${m(e.scheduledTime.getTime()+864e5,"dd-MM-yyyy")}</DatumTot><Tijd type="Date/Time">${m(e.scheduledTime,"HH:mm")}</Tijd><Titel type="Text">${e.playlist}</Titel><Zaal type="Text">${e.auditoriumNumber}</Zaal><Kleur type="Long Integer">4</Kleur><Permanent type="Long Integer">1</Permanent></Shows>`}const _=S(null),{isOverDropZone:w}=x(_,{onDrop:a.filesUploaded,multiple:!1});return(e,n)=>{const o=X,l=$,i=h,T=D;return y(),b("main",{ref_key:"main",ref:_},[s(o),s(l),t("section",null,[t("div",U,[t("div",j,[n[0]||(n[0]=t("h2",{style:{"margin-bottom":"0"}},"Datadump",-1)),t("small",null,c(d(a).table.length)+" voorstellingen",1),n[1]||(n[1]=t("p",null,[u("Aangeboden als array in publieke variabele "),t("code",null,"datadump"),u(" en als pseudo-xml-string in publieke variabele "),t("code",null,"narrowcastXml"),u(". ")],-1)),s(T,null,{default:p(()=>[s(i,{value:"JSON"},{default:p(()=>[t("div",M,[t("code",null,c(JSON.stringify(d(a).table,null,2)),1)])]),_:1}),s(i,{value:"XML"},{default:p(()=>[t("div",O,[t("code",null,c(r.value),1)])]),_:1})]),_:1})])])]),d(w)?(y(),b("div",B," Laat los om bestand te uploaden ")):V("",!0)],512)}}}),K=I(C,[["__scopeId","data-v-68d716e3"]]);export{K as default};
