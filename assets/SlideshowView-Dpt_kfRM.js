import{d as P,e as j,f as se,g as ne,_ as te,a as oe,b as ae,S as ue}from"./FileUploadButton-DekjYQdv.js";import{x as F,c as a,o,a as G,d as L,y as R,z as q,g as s,A as H,L as re,r as b,e as r,i as W,u as y,l as A,w as u,k as i,C as J,h as I,F as B,j as E,p as N,q as z,_ as ie,I as de,B as ce}from"./index-DgXSe68A.js";const me={},pe={class:"primary center",type:"button"};function ve(V,f){return o(),a("button",pe,[G(V.$slots,"default",{},void 0,!0)])}const K=F(me,[["render",ve],["__scopeId","data-v-a22debdb"]]),_e=["for"],fe={class:"title"},ge=["id"],ke=L({__name:"InputText",props:R({identifier:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(V){const f=q(V,"modelValue");return(n,t)=>(o(),a("label",{class:"input",for:n.identifier},[s("div",fe,[G(n.$slots,"default",{},void 0,!0)]),H(s("input",{type:"text",id:n.identifier,"onUpdate:modelValue":t[0]||(t[0]=m=>f.value=m)},null,8,ge),[[re,f.value]])],8,_e))}}),we=F(ke,[["__scopeId","data-v-7bce26f6"]]),be={id:"upload"},ye={class:"block"},$e={class:"flex block"},he={key:0,class:"pictures",style:{"flex-grow":"1"}},Ve=["src","onClick"],Se={key:1,style:{"flex-grow":"1"}},xe={key:2,style:{"flex-grow":"1"}},Ce={key:3,style:{"flex-grow":"1"}},Te={key:4,style:{"flex-grow":"1"}},Me={key:5,class:"buttons",style:{"flex-shrink":"0"}},Ue={key:0},T="https://kid-daring-robin.ngrok-free.app",De=L({__name:"SlideshowUploadSection",props:{modelValue:{},modelModifiers:{}},emits:R(["slide-clicked"],["update:modelValue"]),setup(V,{emit:f}){const n=b("creds_missing"),t=q(V,"modelValue"),m=f,$=P("history"),d=$.username?b($.username):j("server-username",""),g=$.password?b($.password):j("server-password","");d.value&&M();async function M(){t.value=[],n.value="loading";try{const e=await(await fetch(`${T}/users/${d.value}/pictures`,{headers:{"ngrok-skip-browser-warning":"true"}})).json();t.value=await Promise.all(e.map(async _=>await k(_))),n.value="success"}catch{n.value="error"}}async function S(p){n.value="loading";try{const e=new FormData;for(const v of p)e.append("pictures",v);const h=await(await fetch(`${T}/users/${d.value}/pictures`,{method:"POST",headers:{Authorization:"Basic "+btoa(`${d.value}:${g.value}`),"ngrok-skip-browser-warning":"true"},body:e})).json();t.value=[...t.value,...await Promise.all(h.files.map(async v=>await k(v)))].sort((v,w)=>v.localeCompare(w)),n.value="success"}catch{n.value="error"}}async function U(){n.value="loading";try{await fetch(`${T}/users/${d.value}/pictures`,{method:"DELETE",headers:{Authorization:"Basic "+btoa(`${d.value}:${g.value}`),"ngrok-skip-browser-warning":"true"}}),t.value=[],n.value="success"}catch{n.value="error"}}async function k(p){const _=await(await fetch(`${T}/users/${d.value}/pictures/${p}`,{headers:{"ngrok-skip-browser-warning":"true"}})).blob();return URL.createObjectURL(_)}return(p,e)=>{const _=we,h=J,v=K,w=se;return o(),a("section",be,[e[12]||(e[12]=s("h2",null,"Waarschuwing",-1)),s("div",ye,[s("p",null," Dit is experimenteel. Het werkt alleen als de tijdelijke server actief is ("+W(T)+"). "),r(_,{modelValue:y(d),"onUpdate:modelValue":e[0]||(e[0]=x=>A(d)?d.value=x:null),identifier:"username"},{default:u(()=>e[2]||(e[2]=[s("span",null,"Gebruikersnaam",-1)])),_:1},8,["modelValue"]),r(_,{modelValue:y(g),"onUpdate:modelValue":e[1]||(e[1]=x=>A(g)?g.value=x:null),identifier:"password"},{default:u(()=>e[3]||(e[3]=[s("span",null,"Wachtwoord",-1)])),_:1},8,["modelValue"]),r(v,{onClick:M},{default:u(()=>[r(h,null,{default:u(()=>e[4]||(e[4]=[i("cloud_download")])),_:1}),e[5]||(e[5]=i("Nu ophalen "))]),_:1})]),e[13]||(e[13]=s("h2",null,"Dia's",-1)),s("div",$e,[t.value.length&&n.value==="success"?(o(),a("div",he,[(o(!0),a(B,null,E(t.value,(x,l)=>(o(),a("img",{src:x,onClick:O=>m("slide-clicked",l)},null,8,Ve))),256))])):n.value==="success"?(o(),a("p",Se,e[6]||(e[6]=[i(" Geen afbeeldingen geÃ¼pload "),s("br",null,null,-1),s("small",null,"Geen afbeeldingen aanwezig op server.",-1)]))):n.value==="error"?(o(),a("p",xe,e[7]||(e[7]=[i(" Ophalen van afbeeldingen mislukt "),s("br",null,null,-1),s("small",null,"De inloggegevens zijn niet correct of er is een probleem met de server.",-1)]))):n.value==="creds_missing"?(o(),a("p",Ce,e[8]||(e[8]=[i(" Ophalen van afbeeldingen mislukt "),s("br",null,null,-1),s("small",null,"Een gebruikersnaam ontbreekt.",-1)]))):(o(),a("p",Te,e[9]||(e[9]=[i(" Afbeeldingen ophalen... "),s("br",null,null,-1),s("small",null,"Even geduld...",-1)]))),y(d)&&y(g)?(o(),a("div",Me,[r(w,{id:"file-upload-area",class:z({large:!t.value.length}),onFilesUploaded:S,accept:"image/*",multiple:""},{default:u(()=>[t.value.length?I("",!0):(o(),a("small",Ue,"Of sleep bestanden hiernaartoe"))]),_:1},8,["class"]),t.value.length?(o(),N(v,{key:0,onClick:U},{default:u(()=>[r(h,null,{default:u(()=>e[10]||(e[10]=[i("delete_forever")])),_:1}),e[11]||(e[11]=i("Alles verwijderen "))]),_:1})):I("",!0)])):I("",!0)])])}}}),Ie=F(De,[["__scopeId","data-v-a17d766c"]]),Be={class:"container dark"},Fe={id:"pictures"},je={class:"grid"},Ae=["src"],Ee={key:0,class:"message"},Ne={class:"control dotnav"},ze=["onClick"],Le={key:0},Oe={key:1},Pe=L({__name:"SlideshowView",setup(V){const f=b(null),n=b([]),t=b(0),m=j("slideshow-duration",60),{isFullscreen:$,enter:d,exit:g}=ne(f),M=P("history"),S=b(M.fullscreen==="true");function U(){$.value||S.value?(S.value=!1,g()):d()}const k=b(!1);let p,e;function _(){k.value=!0,clearTimeout(p),p=setTimeout(()=>{k.value=!1},2e3)}function h(){t.value=(t.value+1)%n.value.length||0}function v(){t.value=(t.value-1+n.value.length)%n.value.length||0}function w(){clearTimeout(e),e=setTimeout(()=>{h(),w()},m.value*1e3)}return w(),(x,l)=>{const O=ie,Q=Ie,C=J,X=ae,Y=K,Z=oe,ee=te,le=ue;return o(),a(B,null,[r(O),s("main",Be,[r(Q,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=c=>n.value=c),onSlideClicked:l[1]||(l[1]=c=>t.value=c)},null,8,["modelValue"]),s("section",Fe,[s("div",je,[s("div",null,[l[10]||(l[10]=s("h2",null,"Diavoorstelling",-1)),s("div",{class:z(["carousel",{"mouse-moving":k.value,"fake-fullscreen":S.value}]),ref_key:"carousel",ref:f,onMousemove:_,onMouseenter:l[2]||(l[2]=c=>k.value=!0),onMouseleave:l[3]||(l[3]=c=>k.value=!1)},[r(de,{name:"slide"},{default:u(()=>[(o(!0),a(B,null,E(n.value,(c,D)=>H((o(),a("img",{key:c,src:c},null,8,Ae)),[[ce,D===t.value]])),128))]),_:1}),n.value.length?I("",!0):(o(),a("p",Ee,"Niet beschikbaar")),s("button",{class:"control fullscreen",onClick:U},[y($)||S.value?(o(),N(C,{key:0},{default:u(()=>l[6]||(l[6]=[i("fullscreen_exit")])),_:1})):(o(),N(C,{key:1},{default:u(()=>l[7]||(l[7]=[i("fullscreen")])),_:1}))]),s("button",{class:"control previous",onClick:v},[r(C,null,{default:u(()=>l[8]||(l[8]=[i("chevron_left")])),_:1})]),s("button",{class:"control next",onClick:h},[r(C,null,{default:u(()=>l[9]||(l[9]=[i("chevron_right")])),_:1})]),s("div",Ne,[(o(!0),a(B,null,E(n.value,(c,D)=>(o(),a("button",{onClick:Ge=>t.value=D,class:z({active:D===t.value})},null,10,ze))),256))])],34)]),r(le,null,{default:u(()=>[r(ee,null,{default:u(()=>[r(Z,{value:"Opties"},{default:u(()=>[s("fieldset",null,[l[14]||(l[14]=s("legend",null,"Automatische weergave",-1)),r(X,{modelValue:y(m),"onUpdate:modelValue":l[4]||(l[4]=c=>A(m)?m.value=c:null),modelModifiers:{number:!0},onChange:w,identifier:"slideDuration",step:"1",min:"1",max:"240",unit:"s"},{default:u(()=>[l[11]||(l[11]=i(" Seconden per dia ")),y(m)>0?(o(),a("small",Le," Elke "+W(y(m))+" seconden wordt de volgende dia getoond. ",1)):(o(),a("small",Oe," De automatische weergave is uitgeschakeld. "))]),_:1},8,["modelValue"]),r(Y,{class:"full",onClick:l[5]||(l[5]=c=>{t.value=0,w(),U()})},{default:u(()=>[r(C,null,{default:u(()=>l[12]||(l[12]=[i("play_arrow")])),_:1}),l[13]||(l[13]=i("Automatische weergave starten "))]),_:1})])]),_:1})]),_:1})]),_:1})])])])],64)}}}),He=F(Pe,[["__scopeId","data-v-b2f97a9b"]]);export{He as default};
