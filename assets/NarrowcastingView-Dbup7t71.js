import{u as b,_ as f}from"./TimetableUploadSection-jz6lKRmF.js";import{d as g,b as w,f as r,r as T,c as m,e as c,h as t,g as v,_ as D,k as i,i as u,u as p,o as _,x}from"./index-rNB9_vxW.js";import{a as k}from"./FileUploadBlock-DNBVPqiF.js";import"./server-CoPpC-Uk.js";import"./nl-Djo1dkoy.js";const h={class:"flex",style:{"flex-wrap":"wrap-reverse"}},N={style:{flex:"100% 1 1"}},L={class:"block"},V={class:"block"},$={key:0,class:"dropzone"},I=g({__name:"NarrowcastingView",setup(S){const a=b();a.$subscribe(()=>{var s;const l=window.narrowcastXml;if(window.datadump=a.table,window.narrowcastXml=n.value,!((s=a.table)!=null&&s.length)||n.value.length<10||l===window.narrowcastXml)return;const e=new Blob([n.value],{type:"text/plain"}),o=document.createElement("a");o.href=URL.createObjectURL(e),o.download="data.txt",o.click(),URL.revokeObjectURL(o.href)});const n=w(()=>{return`<voorstellingen>${a.table.map(l).join("")}</voorstellingen>`;function l(e,o){return`<Shows><ID type="Long Integer">${o}</ID><Titel type="Text">${e.playlist}</Titel><Zaal type="Text">${e.auditoriumNumber}</Zaal><Kleur type="Long Integer">4</Kleur><Permanent type="Long Integer">1</Permanent><DatumVan type="Date/Time">${r(e.scheduledTime,"dd-MM-yyyy")}</DatumVan><DatumTot type="Date/Time">${r(e.scheduledTime.getTime()+86400,"dd-MM-yyyy")}</DatumTot><Tijd type="Date/Time">${r(e.scheduledTime,"hh:mm:ss")}</Tijd></Shows>`}}),d=T(null),{isOverDropZone:y}=k(d,{onDrop:a.filesUploaded,multiple:!1});return(l,e)=>{const o=D,s=f;return _(),m("main",{ref_key:"main",ref:d},[c(o),c(s),t("section",null,[t("div",h,[t("div",N,[e[0]||(e[0]=t("h2",null,"Datadump",-1)),e[1]||(e[1]=t("p",null,[i("Aangeboden als array in publieke variabele "),t("code",null,"datadump"),i(" en als pseudo-xml-string in publieke variabele "),t("code",null,"narrowcastXml"),i(". ")],-1)),t("div",L,[t("code",null,u(JSON.stringify(p(a).table)),1)]),e[2]||(e[2]=t("br",null,null,-1)),t("div",V,[t("code",null,u(n.value),1)])])])]),p(y)?(_(),m("div",$," Laat los om bestand te uploaden ")):v("",!0)],512)}}}),O=x(I,[["__scopeId","data-v-e20ca064"]]);export{O as default};
