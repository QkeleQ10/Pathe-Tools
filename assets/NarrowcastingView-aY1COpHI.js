var $e=Object.defineProperty;var Ue=(C,n,i)=>n in C?$e(C,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):C[n]=i;var V=(C,n,i)=>Ue(C,typeof n!="symbol"?n+"":n,i);import{a as je,_ as Be,u as Ae}from"./server-3qM79Fh3.js";import{d as pe,A as De,B as Re,e as he,c as T,o as y,b as l,a as Ne,_ as ve,r as $,q as ce,h as z,g as c,w as f,l as v,y as Le,C as Me,s as N,F as A,k as D,j as L,u as ne,f as M,I as He,J as Pe,m as Fe,K as Ie,n as me,i as We}from"./index-BHXAo82h.js";import{b as ye,_ as qe,a as ze}from"./FileUploadBlock-DjSIhoYB.js";import{u as ke,a as Oe,_ as Ee}from"./TimetableUploadSection-BsGqp4J5.js";import"./nl-CI3zH-hu.js";const Ze=["for"],Ge={class:"title"},Je={class:"input"},Ke=["id","disabled","value"],Ye=pe({__name:"InputTime",props:De({identifier:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(C){const n=Re(C,"modelValue"),i=he({get(){return n.value?n.value.getHours().toString().padStart(2,"0")+":"+n.value.getMinutes().toString().padStart(2,"0"):""},set(r){const[s,m]=r.split(":").map(Number);if(isNaN(s)||isNaN(m))return;const g=new Date(n.value||Date.now());g.setHours(s,m,0,0),n.value=g}});return(r,s)=>(y(),T("label",{class:"input time-input",for:r.identifier},[l("div",Ge,[Ne(r.$slots,"default",{},void 0,!0)]),l("div",Je,[l("input",{type:"time",id:r.identifier,disabled:r.disabled,value:i.value,onBlur:s[0]||(s[0]=m=>i.value=m.target.value)},null,40,Ke)])],8,Ze))}}),Xe=ve(Ye,[["__scopeId","data-v-b16943c1"]]);class te{constructor(n=65535,i=65535,r){V(this,"packet");let s;if(r instanceof Uint8Array)s=r;else if(Array.isArray(r)){s=new Uint8Array(r.reduce((u,w)=>u+w.messageBody.length,0));let x=0;for(const u of r)s.set(u.messageBody,x),x+=u.messageBody.length}else s=r.messageBody;const m=new Uint8Array(9);m.set([170,187,n>>8,n&255,i>>8,i&255,s.length>>8,s.length&255,n>>8^n&255^i>>8^i&255^s.length>>8^s.length&255]);const g=new Uint8Array(1);g.set([s.reduce((x,u)=>x^u,0)]),this.packet=new Uint8Array(m.length+s.length+g.length),this.packet.set(m),this.packet.set(s,m.length),this.packet.set(g,m.length+s.length)}toString(){return Array.from(this.packet).map(n=>n.toString(16).padStart(2,"0")).join(" ").toUpperCase()}}class fe{constructor(){V(this,"messageBody")}}V(fe,"functionCode",0);class le extends fe{constructor(n){super();let i;if(n instanceof Uint8Array)i=n;else if(Array.isArray(n)){i=new Uint8Array(n.reduce((m,g)=>m+g.messageBody.length,0));let s=0;for(const m of n)i.set(m.messageBody,s),s+=m.messageBody.length}else i=n.messageBody;const r=new Uint8Array(1+i.length);r.set([this.constructor.functionCode]),r.set(i,1),this.messageBody=r}}V(le,"functionCode",0);class xe extends fe{constructor(n){super();const i=new Uint8Array(8);i.set([this.constructor.functionCode]),i.set([n.getFullYear()-2e3,n.getMonth()+1,n.getDate(),n.getDay(),n.getHours(),n.getMinutes(),n.getSeconds()],1),this.messageBody=i}}V(xe,"functionCode",1);class H{constructor(){V(this,"messageBody")}}V(H,"commandCode",0);const oe=class oe extends H{constructor(){super();const n=new Uint8Array(1);n.set([oe.commandCode]),this.messageBody=n}};V(oe,"commandCode",1);let O=oe;const se=class se extends H{constructor(n=0,i=3,r=0,s=0,m=0,g){super();const x=we(g),u=new Uint8Array(6+x.length+1);u.set([se.commandCode]),u.set([n,i,r,s,m],1),u.set(x,6),u.set([0],u.length-1),this.messageBody=u}};V(se,"commandCode",3);let U=se;const ie=class ie extends H{constructor(n=2,i=0,r=3,s=0,m=55,g=0){super();const x=new Uint8Array(7);x.set([ie.commandCode]),x.set([n,i,r,s,m,g],1),this.messageBody=x}};V(ie,"commandCode",4);let E=ie;const ae=class ae extends H{constructor(n=0,i=0,r=9){super();const s=new Uint8Array(5);s.set([ae.commandCode]),s.set([n>>8,n&255,i,r],1),this.messageBody=s}};V(ae,"commandCode",7);let Z=ae;const re=class re extends H{constructor(n=0,i=4,r=0,s=3,m=0,g=0,x=0,u){super();const w=we(u),k=new Uint8Array(8+w.length+1);k.set([re.commandCode]),k.set([n,i,r,s,m,g,x],1),k.set(w,8),k.set([0],k.length-1),this.messageBody=k}};V(re,"commandCode",8);let G=re;const ue=class ue extends H{constructor(){super();const n=new Uint8Array(1);n.set([ue.commandCode]),this.messageBody=n}};V(ue,"commandCode",31);let J=ue;const Qe={"":0,"":1,"":2,"":3,"":4,"":5,"":6,"\x07":7,"\b":8,"	":9,"\n":10,"\v":11,"\f":12,"\r":13,"":14,"":15,"":16,"":17,"":18,"":19,"":20,"":21,"":22,"":23,"":24,"":25,"":26,"\x1B":27,"":28,"":29,"":30,"":31," ":32,"!":33,'"':34,"#":35,$:36,"%":37,"&":38,"'":39,"(":40,")":41,"*":42,"+":43,",":44,"-":45,".":46,"/":47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,";":59,"<":60,"=":61,">":62,"?":63,"@":64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,"[":91,"\\":92,"]":93,"^":94,_:95,"`":96,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,"{":123,"|":124,"}":125,"~":126,"":127,"":128,"":129,"":130,"":131,"":132,"":133,"":134,"":135,"":136,"":137,"":138,"":139,"":140,"":141,"":142,"":143,"":144,"":145,"":146,"":147,"":148,"":149,"":150,"":151,"":152,"":153,"":154,"":155,"":156,"":157,"":158,"":159," ":160,"¡":161,"¢":162,"£":163,"¤":164,"¥":165,"¦":166,"§":167,"¨":168,"©":169,ª:170,"«":171,"¬":172,"­":173,"®":174,"¯":175,"°":176,"±":177,"²":178,"³":179,"´":180,µ:181,"¶":182,"·":183,"¸":184,"¹":185,º:186,"»":187,"¼":188,"½":189,"¾":190,"¿":191,À:192,Á:193,Â:194,Ã:195,Ä:196,Å:197,Æ:198,Ç:199,È:200,É:201,Ê:202,Ë:203,Ì:204,Í:205,Î:206,Ï:207,Ð:208,Ñ:209,Ò:210,Ó:211,Ô:212,Õ:213,Ö:214,"×":215,Ø:216,Ù:217,Ú:218,Û:219,Ü:220,Ý:221,Þ:222,ß:223,à:224,á:225,â:226,ã:227,ä:228,å:229,æ:230,ç:231,è:232,é:233,ê:234,ë:235,ì:236,í:237,î:238,ï:239,ð:240,ñ:241,ò:242,ó:243,ô:244,õ:245,ö:246,"÷":247,ø:248,ù:249,ú:250,û:251,ü:252,ý:253,þ:254,ÿ:255};function we(C){const n=C.split("").map(i=>Qe[i]??0);return new Uint8Array(n)}const et={style:{display:"flex",gap:"32px","flex-wrap":"wrap"}},tt={style:{flex:"40% 1 1"}},nt={class:"flex",style:{"flex-direction":"column"}},lt={class:"flex buttons"},ot={id:"display-lines"},st={class:"flex"},it={key:0,class:"flex",style:{"padding-left":"32px"}},at={class:"flex select-icons"},rt=["onClick","title"],ut={class:"flex select-icons"},dt=["onClick","title"],ct={class:"flex select-icons"},mt=["onClick","title"],pt={key:0,class:"flex select-icons"},ft=["onClick"],gt=["onClick"],bt={class:"block",id:"matrix-display"},_t={class:"matrix-clock"},ht={class:"flex buttons"},vt={class:"flex"},yt={class:"flex"},kt={style:{width:"48ch"}},xt={style:{width:"16ch"}},_e="De ~C3;Rooftop~C1; is weer geopend! Check pathé.nl of de Pathé-app voor alle voorstellingen.",wt=pe({__name:"CinemecTimetableSection",setup(C){const n=He("now"),i=ye("history"),r=ke(),s=$(!1),m=$(!0),g=$(""),x=$(!!i.prototype),u=$("http://localhost:5000/send-bytes"),w=$("10.10.87.81"),k=$("10.10.87.82"),j=$(!0),P=$(!0),R=$([]),W={default:{name:"Standaard met lichtkrant",lines:[{textString:"Welkom bij Pathé Utrecht Leidsche Rijn!                 Zaal",fcolor:2,bcolor:0,enabled:!0,align:"left",speed:7},...K(6),{textString:_e,fcolor:1,bcolor:0,enabled:!0,align:"marquee",speed:7}]},walkout:{name:"Uitloop met lichtkrant",lines:[...K(2,{fcolor:3,bcolor:0,textString:"",enabled:!0,align:"left",speed:7}),{textString:"Hartelijk dank voor je filmbezoek!",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"Wij hopen dat je genoten hebt.",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"Graag tot ziens bij",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"Pathé Utrecht Leidsche Rijn",fcolor:2,bcolor:0,enabled:!0,align:"center",speed:7},{fcolor:3,bcolor:0,textString:"",enabled:!0,align:"left",speed:7},{textString:_e,fcolor:1,bcolor:0,enabled:!0,align:"marquee",speed:7}]},test:{name:"Test",lines:[...K(2,{fcolor:3,bcolor:0,textString:"",enabled:!0,align:"left",speed:7}),{textString:"Welkom bij Pathé Utrecht Leidsche Rijn!",fcolor:2,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"De timetable toont momenteel geen actuele",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"informatie. Raadpleeg uw ticket of de",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},{textString:"schermen bij de kassa voor het zaalnummer.",fcolor:3,bcolor:0,enabled:!0,align:"center",speed:7},...K(2,{fcolor:3,bcolor:0,textString:"",enabled:!0,align:"left",speed:7})]}},F=$(W.default.lines);r.$subscribe(()=>{r.table.length&&(Y(),R.value=[...r.table].sort((o,e)=>o.scheduledTime.getTime()-e.scheduledTime.getTime()).map((o,e)=>({scheduledTime:o.scheduledTime,title:o.title,auditorium:o.auditorium==="Rooftop"?"RT":o.auditorium.replace(/^\w+\s/,"").split(" ")[0],i:e})))});function Te(o){if(!(o!=null&&o.textString))return[];const e=o.textString.split(/(?=~[CB]\d;|~[FNRI];)/g),b=[];let p=o.fcolor,h=o.bcolor,a=!1;for(const _ of e)_.startsWith("~C")?p=parseInt(_.substring(2,3),10):_.startsWith("~B")?h=parseInt(_.substring(2,3),10):_.startsWith("~R")?[p,h]=[h,p]:_.startsWith("~F")?a=!0:_.startsWith("~N")?a=!1:_.startsWith("~I")&&(p=o.fcolor,h=o.bcolor),b.push({textString:_.replace(/~[CB]\d;|~[FNRI];/g,""),fcolor:p,bcolor:h,flash:a});return b}function K(o,e={fcolor:3,bcolor:0,textString:"",enabled:!1,align:"left",speed:7}){return Array.from({length:o},()=>({...e}))}function q(o,e){let b=[];const p=[...R.value].sort((a,_)=>a.scheduledTime.getTime()-_.scheduledTime.getTime()).filter(a=>a.scheduledTime.getTime()-Date.now()>-9e5);let h=0;for(let a=0;a<o.length;a++)if(o[a].enabled)b.push(o[a]);else{let _=p[h++];if(!_){b.push({textString:"",enabled:!0,fcolor:3,bcolor:0,align:"left",speed:7});continue}const X=_.scheduledTime.getTime()-Date.now()<-54e4,Q=_.scheduledTime.getTime()-Date.now()<3e5&&!X;let t=`${M(_.scheduledTime,"HH:mm")} ${_.title.substring(0,51).padEnd(51)}${_.auditorium.toString().substring(0,3).padStart(3)}`;X&&(t=`${M(_.scheduledTime,"HH:mm")} ${_.title.substring(0,40).padEnd(40)} ~C1;is gestart~C3;${_.auditorium.toString().substring(0,3).padStart(3)}`),Q&&(t=`${M(_.scheduledTime,"HH:mm")} ${_.title.substring(0,38).padEnd(38)} ~F;~C1;gaat starten~N;~C3;${_.auditorium.toString().substring(0,3).padStart(3)}`),b.push({textString:t,enabled:!0,fcolor:3,bcolor:0,align:"left",speed:7})}return b}function ge(o){const e=q(o);console.log(e);let b=[],p=[];for(let h=0;h<e.length;h++){const a=e[h];a.enabled&&(a.align==="marquee"||a.align==="marquee-reverse"?p.push(new G(a.align==="marquee"?6:5,a.speed,null,a.fcolor,a.bcolor,null,h+1,a.textString)):b.push(new U(null,a.fcolor,a.bcolor,null,h+1,a.align==="center"?B(a.textString,60):a.align==="right"?a.textString.padStart(60):a.textString)))}return new te(null,null,new le([new O,new E,...b,new Z(null,4,9),...p,new J]))}const de={testMessage:()=>new te(null,null,new le([new O,new E(2,null,3,null,55,0),new U(null,2,0,0,2,B("Welkom bij Pathé Utrecht Leidsche Rijn!",60)),new U(null,3,0,0,3,B("De timetable toont momenteel geen actuele",60)),new U(null,3,0,0,4,B("informatie. Raadpleeg uw ticket of de",60)),new U(null,3,0,0,5,B("schermen bij de kassa voor het zaalnummer.",60)),new Z(null,4,9),new G(6,7,null,1,null,0,8,"De Rooftop is weer geopend! Check pathé.nl of de Pathé-app voor alle voorstellingen."),new J])),setClock:()=>new te(null,null,new xe(new Date)),thankYou:()=>new te(null,null,new le([new O,new E(2,null,3,null,55,0),new U(null,3,0,0,3,B("Hartelijk dank voor je filmbezoek!",60)),new U(null,3,0,0,4,B("Wij hopen dat je genoten hebt.",60)),new U(null,3,0,0,5,B("Graag tot ziens bij",60)),new U(null,2,0,0,6,B("Pathé Utrecht Leidsche Rijn",60)),new Z(null,4,9),new G(6,7,null,1,null,0,8,"De Rooftop is weer geopend! Check pathé.nl of de Pathé-app voor alle voorstellingen."),new J])),schedule:()=>[...r.table].filter(e=>e.scheduledTime.getTime()-Date.now()>-9e5).sort((e,b)=>e.scheduledTime.getTime()-b.scheduledTime.getTime()).slice(0,6).length?ge(q(W.default.lines)):de.thankYou()};function Se(o){const e=ge(q(o));g.value=e.toString(),be()}async function be(){if(w.value){let o=await fetch(u.value,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:w.value,port:"9100",hex:g.value})});console.log(o)}if(k.value){let o=await fetch(u.value,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:k.value,port:"9100",hex:g.value})});console.log(o)}}function Ce(o){return o.trim().split(/\s+/).map(p=>{const h=parseInt(p,16);return String.fromCharCode(h)}).join("")}function B(o,e,b=" "){const p=Math.floor((e-o.length)/2);return b.repeat(p)+o+b.repeat(e-o.length-p)}setTimeout(()=>{Y(),setInterval(()=>{Y()},6e4)},6e4-Date.now()%6e4);function Y(o=j.value){P.value&&([...R.value].sort((b,p)=>b.scheduledTime.getTime()-p.scheduledTime.getTime()).filter(b=>b.scheduledTime.getTime()-Date.now()>-9e5).length?F.value=W.default.lines:F.value=W.walkout.lines),o&&Se(q(F.value))}return(o,e)=>{const b=Oe,p=Me,h=Le,a=je,_=qe,X=Xe,Q=Be;return y(),T("section",null,[l("div",et,[l("div",tt,[e[22]||(e[22]=l("h2",null,"Opties",-1)),l("div",nt,[c(b,{identifier:"autoWalkOut",modelValue:P.value,"onUpdate:modelValue":e[0]||(e[0]=t=>P.value=t)},{default:f(()=>e[14]||(e[14]=[v(" Automatisch de beste configuratie kiezen ")])),_:1,__:[14]},8,["modelValue"]),c(b,{identifier:"autoSend",modelValue:j.value,"onUpdate:modelValue":e[1]||(e[1]=t=>j.value=t)},{default:f(()=>e[15]||(e[15]=[v(" Elke minuut automatisch verzenden ")])),_:1,__:[15]},8,["modelValue"]),c(h,{class:"full",onClick:e[2]||(e[2]=t=>s.value=!0)},{default:f(()=>[c(p,null,{default:f(()=>e[16]||(e[16]=[v("edit")])),_:1,__:[16]}),e[17]||(e[17]=l("span",null,"Voorstellingen bewerken",-1))]),_:1,__:[17]})]),e[23]||(e[23]=l("h2",null,"Configuratie",-1)),l("div",{id:"configurations",class:N({disabled:P.value})},[l("div",lt,[(y(),T(A,null,D(W,(t,S)=>c(h,{class:"secondary",key:S,onClick:d=>F.value=[...t.lines]},{default:f(()=>[v(L(t.name),1)]),_:2},1032,["onClick"])),64))]),l("div",ot,[(y(!0),T(A,null,D(F.value,(t,S)=>(y(),T("div",{class:"display-line",key:S},[l("div",st,[c(b,{class:"no-label",identifier:`line-${S}-enabled`,modelValue:t.enabled,"onUpdate:modelValue":d=>t.enabled=d},null,8,["identifier","modelValue","onUpdate:modelValue"]),c(a,{class:N(["no-label",{"too-long":t.textString.length>60}]),identifier:`line-${S}-text`,modelValue:t.textString,"onUpdate:modelValue":d=>t.textString=d},null,8,["identifier","modelValue","onUpdate:modelValue","class"])]),t.textString.length?(y(),T("div",it,[l("div",at,[(y(),T(A,null,D({left:["Links uitlijnen","format_align_left"],center:["Centreren","format_align_center"],right:["Rechts uitlijnen","format_align_right"],marquee:["Lichtkrant","keyboard_double_arrow_left"],"marquee-reverse":["Omgekeerde lichtkrant","keyboard_double_arrow_right"]},(d,ee)=>l("a",{onClick:I=>t.align=ee,class:N({selected:t.align===ee}),title:d[0]},[c(p,null,{default:f(()=>[v(L(d[1]),1)]),_:2},1024)],10,rt)),64))]),l("div",ut,[(y(),T(A,null,D({0:["Zwarte tekst","#000"],1:["Rode tekst","rgb(227, 46, 46)"],2:["Groene tekst","rgb(35, 160, 35)"],3:["Oranje tekst","rgb(255, 178, 36)"]},(d,ee,I)=>l("a",{onClick:Ve=>t.fcolor=I,class:N({selected:t.fcolor===I}),title:d[0]},[c(p,{style:me({color:d[1]})},{default:f(()=>e[18]||(e[18]=[v("format_color_text")])),_:2,__:[18]},1032,["style"])],10,dt)),64))]),l("div",ct,[(y(),T(A,null,D({0:["Zwarte tekst","#000"],1:["Rode tekst","rgb(227, 46, 46)"],2:["Groene tekst","rgb(35, 160, 35)"],3:["Oranje tekst","rgb(255, 178, 36)"]},(d,ee,I)=>l("a",{onClick:Ve=>t.bcolor=I,class:N({selected:t.bcolor===I}),title:d[0]},[c(p,{style:me({color:d[1]})},{default:f(()=>e[19]||(e[19]=[v("format_color_fill")])),_:2,__:[19]},1032,["style"])],10,mt)),64))]),t.align==="marquee"||t.align==="marquee-reverse"?(y(),T("div",pt,[l("a",{onClick:d=>t.speed=Math.max(0,t.speed-1),title:"Langzamer"},[c(p,null,{default:f(()=>e[20]||(e[20]=[v("remove")])),_:1,__:[20]})],8,ft),l("span",null,L(t.speed),1),l("a",{onClick:d=>t.speed=Math.min(9,t.speed+1),title:"Sneller"},[c(p,null,{default:f(()=>e[21]||(e[21]=[v("add")])),_:1,__:[21]})],8,gt)])):z("",!0)])):z("",!0)]))),128))])],2)]),c(_,{style:{flex:"585px 0 0",display:"flex"}},{default:f(()=>[l("div",null,[e[25]||(e[25]=l("h2",null,"Voorbeeld",-1)),l("div",bt,[e[24]||(e[24]=l("span",{id:"matrix-display-title"},"Pathé Timetable",-1)),l("pre",_t,L(ne(M)(ne(n),"HH:mm")),1),(y(!0),T(A,null,D(q(F.value,ne(n)),(t,S)=>(y(),T("div",{class:N(["matrix-row",`align${t.align||"left"}`]),style:me({"--marquee-duration":(.02*Math.max(60,t.textString.replace(/~[CB]\d;|~[FNRI];/g,"").length)+.08)*(-1*t.speed+13)+"s"})},[l("div",null,[(y(!0),T(A,null,D(Te(t),d=>(y(),T("span",{key:S,class:N(`fcolor${(d==null?void 0:d.fcolor)||0} bcolor${(d==null?void 0:d.bcolor)||0} flash${d!=null&&d.flash?1:0}`)},L((d==null?void 0:d.textString)||""),3))),128))])],6))),256))])]),l("div",ht,[c(h,{class:"secondary",onClick:e[3]||(e[3]=t=>Y(!0))},{default:f(()=>[c(p,null,{default:f(()=>e[26]||(e[26]=[v("send")])),_:1,__:[26]}),e[27]||(e[27]=l("span",null,"Nu verzenden",-1))]),_:1,__:[27]}),c(h,{class:"secondary",onClick:e[4]||(e[4]=t=>x.value=!0),style:{opacity:"0.2"}},{default:f(()=>[c(p,null,{default:f(()=>e[28]||(e[28]=[v("code")])),_:1,__:[28]}),e[29]||(e[29]=l("span",null,"Foutopsporing",-1))]),_:1,__:[29]})]),e[30]||(e[30]=l("p",null,[l("b",null,"Tip:"),v(" In invoervelden kunnen de volgende codes worden gebruikt:"),l("br"),l("code",null,"~Cn;"),v("  tekstkleur (waarbij n = 0, 1, 2 of 3)"),l("br"),l("code",null,"~Bn;"),v("  achtergrondkleur (waarbij n = 0, 1, 2 of 3)"),l("br"),l("code",null,"~R; "),v("  kleuren omwisselen"),l("br"),l("code",null,"~I; "),v("  kleuren resetten"),l("br"),l("code",null,"~F; "),v("  knipperen"),l("br"),l("code",null,"~N; "),v("  niet meer knipperen"),l("br")],-1))]),_:1,__:[30]})]),s.value?(y(),ce(Q,{key:0,onDismiss:e[7]||(e[7]=t=>s.value=!1)},{default:f(()=>[e[34]||(e[34]=l("h3",null,"Voorstellingen",-1)),c(b,{identifier:"syncFilmTitles",modelValue:m.value,"onUpdate:modelValue":e[5]||(e[5]=t=>m.value=t)},{default:f(()=>e[31]||(e[31]=[v(" Filmtitel synchroniseren met andere voorstellingen ")])),_:1,__:[31]},8,["modelValue"]),l("div",null,[c(Pe,{name:"list"},{default:f(()=>[(y(!0),T(A,null,D([...R.value].sort((t,S)=>t.scheduledTime.getTime()-S.scheduledTime.getTime()),t=>(y(),T("div",{class:"flex walkin",key:t.i},[c(X,{class:"no-label walkin-time",identifier:`walkin-${t.i}-time`,modelValue:t.scheduledTime,"onUpdate:modelValue":S=>t.scheduledTime=S},null,8,["identifier","modelValue","onUpdate:modelValue"]),c(a,{class:N(["no-label walkin-title",{"too-long":t.title.length>38}]),spellcheck:!1,autocomplete:"off",identifier:`walkin-${t.i}`,"model-value":t.title,"onUpdate:modelValue":S=>{m.value?R.value.filter(d=>d.title===t.title).forEach(d=>d.title=S):t.title=S}},null,8,["identifier","model-value","onUpdate:modelValue","class"]),c(a,{class:"no-label walkin-auditorium",spellcheck:!1,autocomplete:"off",identifier:`walkin-${t.i}-auditorium`,modelValue:t.auditorium,"onUpdate:modelValue":S=>t.auditorium=S},null,8,["identifier","modelValue","onUpdate:modelValue"]),c(p,{style:{float:"right",cursor:"pointer",padding:"2px"},onClick:S=>R.value.splice(t.i,1)},{default:f(()=>e[32]||(e[32]=[v(" delete")])),_:2,__:[32]},1032,["onClick"])]))),128))]),_:1})]),c(h,{class:"secondary",onClick:e[6]||(e[6]=t=>R.value.push({scheduledTime:new Date,title:"",auditorium:"",i:R.value.length}))},{default:f(()=>e[33]||(e[33]=[v(" Nieuwe voorstelling ")])),_:1,__:[33]})]),_:1,__:[34]})):z("",!0),x.value?(y(),ce(Q,{key:1,onDismiss:e[13]||(e[13]=t=>x.value=!1)},{default:f(()=>[Fe(l("textarea",{"onUpdate:modelValue":e[8]||(e[8]=t=>g.value=t),identifier:"input"},null,512),[[Ie,g.value]]),l("div",vt,[(y(!0),T(A,null,D(Object.keys(de),t=>(y(),ce(h,{class:"secondary",onClick:S=>g.value=de[t]().toString()},{default:f(()=>[v(L(t),1)]),_:2},1032,["onClick"]))),256))]),l("div",yt,[l("pre",kt,L(g.value),1),l("pre",xt,L(Ce(g.value).replace(/[\n\r\t]/g," ").match(/.{1,16}/g).join(`
`)),1)]),c(a,{modelValue:u.value,"onUpdate:modelValue":e[9]||(e[9]=t=>u.value=t),identifier:"host"},{default:f(()=>e[35]||(e[35]=[l("span",null,"host",-1)])),_:1,__:[35]},8,["modelValue"]),c(a,{modelValue:w.value,"onUpdate:modelValue":e[10]||(e[10]=t=>w.value=t),identifier:"ip"},{default:f(()=>e[36]||(e[36]=[l("span",null,"ip",-1)])),_:1,__:[36]},8,["modelValue"]),c(a,{modelValue:k.value,"onUpdate:modelValue":e[11]||(e[11]=t=>k.value=t),identifier:"ip2"},{default:f(()=>e[37]||(e[37]=[l("span",null,"ip2",-1)])),_:1,__:[37]},8,["modelValue"]),c(b,{modelValue:j.value,"onUpdate:modelValue":e[12]||(e[12]=t=>j.value=t),identifier:"repeat"},{default:f(()=>e[38]||(e[38]=[l("span",null,"repeat",-1)])),_:1,__:[38]},8,["modelValue"]),c(h,{onClick:be},{default:f(()=>e[39]||(e[39]=[v("sendRequest")])),_:1,__:[39]})]),_:1})):z("",!0)])}}}),Tt=ve(wt,[["__scopeId","data-v-54b468e6"]]),St={key:0,class:"dropzone"},At=pe({__name:"NarrowcastingView",setup(C){const n=ke();Ae();const i=ye("history"),r=$(!1);n.$subscribe(()=>{var k;if(!i.download||!((k=n.table)!=null&&k.length)||s.value.length<10||r.value)return;const u=new Blob([s.value],{type:"text/plain"}),w=document.createElement("a");w.href=URL.createObjectURL(u),w.download="timetable.xml",w.click(),URL.revokeObjectURL(w.href),r.value=!0});const s=he(()=>{const u=k=>"  ".repeat(k),w=n.table.map((k,j)=>m(k,j).split("><").join(`>
${u(2)}<`)).join(`
${u(1)}`);return`<voorstellingen>
${u(1)}${w}
</voorstellingen>`});function m(u,w){return`<Shows><ID type="Long Integer">${w}</ID><DatumVan type="Date/Time">${M(u.scheduledTime,"dd-MM-yyyy")}</DatumVan><DatumTot type="Date/Time">${M(u.scheduledTime,"dd-MM-yyyy")}</DatumTot><Tijd type="Date/Time">${M(u.scheduledTime,"HH:mm")}</Tijd><Titel type="Text">${u.playlist}</Titel><Zaal type="Text">${u.auditoriumNumber}</Zaal><Kleur type="Long Integer">3</Kleur><Permanent type="Long Integer">1</Permanent></Shows>`}const g=$(null),{isOverDropZone:x}=ze(g,{onDrop:n.filesUploaded,multiple:!1});return(u,w)=>{const k=We,j=Ee,P=Tt;return y(),T("main",{ref_key:"main",ref:g},[c(k),c(j),c(P),ne(x)?(y(),T("div",St," Laat los om bestand te uploaden ")):z("",!0)],512)}}});export{At as default};
